!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rexparse=t():e.rexparse=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=326)}({0:function(e,t){e.exports=function(e,t,r){if(e&&"number"!=typeof e){if(e.hasOwnProperty(t))return e[t];if(-1!==t.indexOf(".")){for(var n=t.split("."),i=e,a=r,s=0;s<n.length;s++){if(!i.hasOwnProperty(n[s])){a=r;break}a=i[n[s]],i=i[n[s]]}return a}return r}return r}},15:function(e,t,r){"use strict";t.a=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},2:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(e){return null==e||""===e||0===e.length};t.a=function(e,t,r){if("object"===n(e))if(i(t)){if(null==r)return;"object"===n(r)&&(e=r)}else{"string"==typeof t&&(t=t.split("."));var a=t.pop();((function(e,t,r){void 0===r&&(r={});var a=e;if(i(t));else{var s;"string"==typeof t&&(t=t.split("."));for(var o=0,u=t.length;o<u;o++){var l;null!=a[s=t[o]]&&"object"===n(a[s])||(l=o===u-1?r:{},a[s]=l),a=a[s]}}return a})(e,t))[a]=r}}},27:function(e,t,r){"use strict";t.a=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=t.length),e.length=n-r;for(var i=0,a=e.length;i<a;i++)e[i]=t[i+r];return e}},31:function(e,t){e.exports=function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}},326:function(e,t,r){"use strict";r.r(t);var n=r(59),i=r.n(n),a=r(0),s=r.n(a),o=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=1/0);var n=[],i=r<=1e3,a=Math.min(r,1e3);return new Promise(function(r,s){!function t(o){e.skip(o).limit(a).find().then(function(e){n.push.apply(n,e),i||e.length<a?r(n):t(o+a)}).catch(s)}(t)})};function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[],this.resetFromJSON(t)}var t,r,n;return t=e,(r=[{key:"resetFromJSON",value:function(e){this.items.length=0,this.startIndex=0,this.pageIndex=0,this.isLastPage=!1,this.setLinesCount(s()(e,"lines",10))}},{key:"setLinesCount",value:function(e){return this.linesInPage=e,this}},{key:"loadLines",value:function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=1/0),this.items.length=0;var n=this;return new Promise(function(i,a){o(e,t,r).then(function(e){n.items=e,n.startIndex=t,n.pageIndex=Math.floor(t/n.linesInPage),n.isLastPage=!(r<=1e3)||e.length<r,i(e,t)}).catch(function(e){n.isLastPage=!1,a(e)})})}},{key:"loadPage",value:function(e,t){var r=t*this.linesInPage;return this.loadLines(e,r,this.linesInPage)}},{key:"loadCurrentPage",value:function(e){return this.loadLines(e,this.startIndex,this.linesInPage)}},{key:"loadNextPage",value:function(e){var t=this.startIndex+this.linesInPage;return this.loadLines(e,t,this.linesInPage)}},{key:"loadPreviousPage",value:function(e){var t=this.startIndex-this.linesInPage;return this.loadLines(e,t,this.linesInPage)}},{key:"getItem",value:function(e){return this.items[e-this.startIndex]}},{key:"findFirst",value:function(e,t,r){void 0===r&&(r=0);for(var n,i=this.items.length;n<i;n++)if(this.items[n].get(e)===t)return n+this.startIndex;return-1}}])&&u(t.prototype,r),n&&u(t,n),e}(),f=r(27),c=r(15),d=function(e,t){var r;if(e instanceof t)r=e;else for(var n in r=new t,e)r.set(n,e[n]);return r},h=function(e,t,r){if(!t&&!r)return e;var n=i.a.User.current();if(!n)return e;var a=new i.a.ACL(n);return r||a.setPublicWriteAccess(!0),t||a.setPublicReadAccess(!0),e.setACL(a),e},p=function(e){for(var t,r,n=this.createQuery().select("id"),i=e instanceof this.customClass,a=0,s=this.primaryKeys.length;a<s;a++)t=this.primaryKeys[a],r=i?e.get(t):e[t],n.equalTo(t,r);return n},v=function(e){var t=d(e,this.customClass);return h(t,this.ownerRead,this.ownerWrite),t.save()},y=function(e){if(Object(c.a)(e))return this.saveItems(e);var t=this;return new Promise(function(r,n){t.primaryKeys.length>0?p.call(t,e).first().then(function(i){if(i){var a=i.id;e instanceof t.customClass?e.set("id",a):e.id=a}v.call(t,e).then(r).catch(n)}).catch(n):v.call(t,e).then(r).catch(n)})},b=function(e){if(this.primaryKeys.length>0){for(var t=[],r=0,n=e.length;r<n;r++)t.push(this.save(e[r]));return Promise.all(t)}var a,s=[];for(r=0,n=e.length;r<n;r++)a=d(e[r],this.customClass),h(a,this.ownerRead,this.ownerWrite),s.push(a);return i.a.Object.saveAll(s)},m=function(e){return e.select("id"),new Promise(function(t,r){o(e).then(function(e){0!==e.length?i.a.Object.destroyAll(e).then(t).catch(r):t(e)}).catch(r)})},g=r(31),_=r.n(g),C=function(e,t){"number"==typeof e&&(t=e,e=void 0),void 0===e&&(e=this.createQuery()),void 0===t&&(t=1);var r=this;return new Promise(function(n,i){e.select("id"),r.loadAll(e).then(function(a){_()(a),t=Math.min(t,a.length);for(var s=[],o=0;o<t;o++)s.push(a[o].id);e=r.createQuery().containedIn("objectId",s),r.loadAll(e).then(n).catch(i)}).catch(i)})},O=function(e){return void 0===e&&(e=this.createQuery()),e.count()};function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setClassName(s()(t,"className","Item")),this.primaryKeys=[];var r=s()(t,"primaryKeys",void 0);r&&this.setPrimaryKey(r),this.setOwnerReadMode(s()(t,"ownerRead",void 0)),this.setOwnerWriteMode(s()(t,"ownerWrite",void 0)),this.pageLoader=new l({lines:s()(t,"lines",10)})}var t,r,n;return t=e,(r=[{key:"setClassName",value:function(e){return this.customClass=i.a.Object.extend(e),this}},{key:"setPrimaryKey",value:function(e){return e?"string"==typeof e?(this.primaryKeys.length=1,this.primaryKeys[0]=e):Object(f.a)(this.primaryKeys,e):this.primaryKeys.length=0,this}},{key:"setOwnerReadMode",value:function(e){return this.ownerRead=e,this}},{key:"setOwnerWriteMode",value:function(e){return this.ownerWrite=e,this}},{key:"createItem",value:function(){return new this.customClass}},{key:"createQuery",value:function(){return new i.a.Query(this.customClass)}},{key:"loadItem",value:function(e){return this.createQuery().get(e)}},{key:"loadPage",value:function(e,t){return this.pageLoader.loadPage(e,t)}},{key:"loadCurrentPage",value:function(e){return this.pageLoader.loadCurrentPage(e)}},{key:"loadNextPage",value:function(e){return this.pageLoader.loadNextPage(e)}},{key:"loadPreviousPage",value:function(e){return this.pageLoader.loadPreviousPage(e)}},{key:"loadLines",value:function(e,t,r){return this.pageLoader.loadLines(e,t,r)}},{key:"loadAll",value:function(e){return void 0===e&&(e=this.createQuery()),this.pageLoader.loadLines(e)}},{key:"removeItem",value:function(e){return this.createItem().set("id",e).destroy()}},{key:"startIndex",get:function(){return this.pageLoader.startIndex}},{key:"pageIndex",get:function(){return this.pageLoader.pageIndex}},{key:"isLastPage",get:function(){return this.pageLoader.isLastPage}}])&&P(t.prototype,r),n&&P(t,n),e}(),S={save:y,saveItems:b,remove:m,loadRandomItems:C,getItemCount:O};Object.assign(w.prototype,S);var k=w,E=function(e,t){return new Promise(function(r,n){i.a.User.logOut().then(function(){return i.a.User.logIn(e,t)}).then(r,function(){(new i.a.User).set("username",e).set("password",t).signUp().then(function(){return i.a.User.logIn(e,t)}).then(r).catch(n)})})},A=r(2);Object(A.a)(window,"Parse",i.a),Object(A.a)(window,"RexPlugins.Parse.ItemTable",k),Object(A.a)(window,"RexPlugins.Parse.QuickLogin",E)},59:function(e,t,r){var n,i,a,s,o;function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o=function(){return function e(t,r,n){function i(o,u){if(!r[o]){if(!t[o]){if(!u&&("function"==typeof s&&s))return s(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[o]={exports:{}};t[o][0].call(f.exports,function(e){return i(t[o][1][e]||e)},f,f.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof s&&s,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.track=function(e,t){if(0===(e=(e=(e=e||"").replace(/^\s*/,"")).replace(/\s*$/,"")).length)throw new TypeError("A name for the custom event must be provided");for(var r in t)if("string"!=typeof r||"string"!=typeof t[r])throw new TypeError('track() dimensions expects keys and values of type "string".');return i.default.getAnalyticsController().track(e,t)};var i=n(e("./CoreManager")),a={track:function(e,t){return i.default.getRESTController().request("POST","events/"+e,{dimensions:t})}};i.default.setAnalyticsController(a)},{"./CoreManager":3,"@babel/runtime/helpers/interopRequireDefault":52}],2:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.run=function(e,t,r){if(r=r||{},"string"!=typeof e||0===e.length)throw new TypeError("Cloud function name must be a string.");var n={};return r.useMasterKey&&(n.useMasterKey=r.useMasterKey),r.sessionToken&&(n.sessionToken=r.sessionToken),i.default.getCloudController().run(e,t,n)},r.getJobsData=function(){return i.default.getCloudController().getJobsData({useMasterKey:!0})},r.startJob=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("Cloud job name must be a string.");return i.default.getCloudController().startJob(e,t,{useMasterKey:!0})},r.getJobStatus=function(e){return new u.default("_JobStatus").get(e,{useMasterKey:!0})};var i=n(e("./CoreManager")),a=n(e("./decode")),s=n(e("./encode")),o=n(e("./ParseError")),u=n(e("./ParseQuery")),l={run:function(e,t,r){var n=i.default.getRESTController(),u=(0,s.default)(t,!0);return n.request("POST","functions/"+e,u,r).then(function(e){var t=(0,a.default)(e);if(t&&t.hasOwnProperty("result"))return Promise.resolve(t.result);throw new o.default(o.default.INVALID_JSON,"The server returned an invalid response.")})},getJobsData:function(e){return i.default.getRESTController().request("GET","cloud_code/jobs/data",null,e)},startJob:function(e,t,r){var n=i.default.getRESTController(),a=(0,s.default)(t,!0);return n.request("POST","jobs/"+e,a,r)}};i.default.setCloudController(l)},{"./CoreManager":3,"./ParseError":13,"./ParseQuery":21,"./decode":36,"./encode":37,"@babel/runtime/helpers/interopRequireDefault":52}],3:[function(e,t,r){(function(e){"use strict";var r={IS_NODE:void 0!==e&&!!e.versions&&!!e.versions.node&&!e.versions.electron,REQUEST_ATTEMPT_LIMIT:5,SERVER_URL:"https://api.parse.com/1",LIVEQUERY_SERVER_URL:null,VERSION:"js2.1.0",APPLICATION_ID:null,JAVASCRIPT_KEY:null,MASTER_KEY:null,USE_MASTER_KEY:!1,PERFORM_USER_REWRITE:!0,FORCE_REVOCABLE_SESSION:!1};function n(e,t,r){t.forEach(function(t){if("function"!=typeof r[t])throw new Error("".concat(e," must implement ").concat(t,"()"))})}t.exports={get:function(e){if(r.hasOwnProperty(e))return r[e];throw new Error("Configuration key not found: "+e)},set:function(e,t){r[e]=t},setAnalyticsController:function(e){n("AnalyticsController",["track"],e),r.AnalyticsController=e},getAnalyticsController:function(){return r.AnalyticsController},setCloudController:function(e){n("CloudController",["run","getJobsData","startJob"],e),r.CloudController=e},getCloudController:function(){return r.CloudController},setConfigController:function(e){n("ConfigController",["current","get"],e),r.ConfigController=e},getConfigController:function(){return r.ConfigController},setFileController:function(e){n("FileController",["saveFile","saveBase64"],e),r.FileController=e},getFileController:function(){return r.FileController},setInstallationController:function(e){n("InstallationController",["currentInstallationId"],e),r.InstallationController=e},getInstallationController:function(){return r.InstallationController},setObjectController:function(e){n("ObjectController",["save","fetch","destroy"],e),r.ObjectController=e},getObjectController:function(){return r.ObjectController},setObjectStateController:function(e){n("ObjectStateController",["getState","initializeState","removeState","getServerData","setServerData","getPendingOps","setPendingOp","pushPendingState","popPendingState","mergeFirstPendingState","getObjectCache","estimateAttribute","estimateAttributes","commitServerChanges","enqueueTask","clearAllState"],e),r.ObjectStateController=e},getObjectStateController:function(){return r.ObjectStateController},setPushController:function(e){n("PushController",["send"],e),r.PushController=e},getPushController:function(){return r.PushController},setQueryController:function(e){n("QueryController",["find","aggregate"],e),r.QueryController=e},getQueryController:function(){return r.QueryController},setRESTController:function(e){n("RESTController",["request","ajax"],e),r.RESTController=e},getRESTController:function(){return r.RESTController},setSchemaController:function(e){n("SchemaController",["get","create","update","delete","send","purge"],e),r.SchemaController=e},getSchemaController:function(){return r.SchemaController},setSessionController:function(e){n("SessionController",["getSession"],e),r.SessionController=e},getSessionController:function(){return r.SessionController},setStorageController:function(e){e.async?n("An async StorageController",["getItemAsync","setItemAsync","removeItemAsync"],e):n("A synchronous StorageController",["getItem","setItem","removeItem"],e),r.StorageController=e},getStorageController:function(){return r.StorageController},setAsyncStorage:function(e){r.AsyncStorage=e},getAsyncStorage:function(){return r.AsyncStorage},setUserController:function(e){n("UserController",["setCurrentUser","currentUser","currentUserAsync","signUp","logIn","become","logOut","requestPasswordReset","upgradeToRevocableSession","linkWith"],e),r.UserController=e},getUserController:function(){return r.UserController},setLiveQueryController:function(e){n("LiveQueryController",["subscribe","unsubscribe","open","close"],e),r.LiveQueryController=e},getLiveQueryController:function(){return r.LiveQueryController},setHooksController:function(e){n("HooksController",["create","get","update","remove"],e),r.HooksController=e},getHooksController:function(){return r.HooksController}}}).call(this,e("_process"))},{_process:60}],4:[function(e,t,r){"use strict";t.exports=e("events").EventEmitter},{events:61}],5:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a,s=n(e("./parseDate")),o=n(e("./ParseUser")),u=!1,l={authenticate:function(e){var t=this;"undefined"==typeof FB&&e.error(this,"Facebook SDK not found."),FB.login(function(r){r.authResponse?e.success&&e.success(t,{id:r.authResponse.userID,access_token:r.authResponse.accessToken,expiration_date:new Date(1e3*r.authResponse.expiresIn+(new Date).getTime()).toJSON()}):e.error&&e.error(t,r)},{scope:i})},restoreAuthentication:function(e){if(e){var t=(0,s.default)(e.expiration_date),r=t?(t.getTime()-(new Date).getTime())/1e3:0,n={userID:e.id,accessToken:e.access_token,expiresIn:r},i={};if(a)for(var o in a)i[o]=a[o];i.authResponse=n,i.status=!1;var u=FB.getAuthResponse();u&&u.userID!==n.userID&&FB.logout(),FB.init(i)}return!0},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}},f={init:function(e){if("undefined"==typeof FB)throw new Error("The Facebook JavaScript SDK must be loaded before calling init.");if(a={},e)for(var t in e)a[t]=e[t];a.status&&"undefined"!=typeof console&&(console.warn||console.log||function(){}).call(console,'The "status" flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.'),a.status=!1,FB.init(a),o.default._registerAuthenticationProvider(l),u=!0},isLinked:function(e){return e._isLinked("facebook")},logIn:function(e,t){if(e&&"string"!=typeof e){var r={};if(t)for(var n in t)r[n]=t[n];return r.authData=e,o.default._logInWith("facebook",r)}if(!u)throw new Error("You must initialize FacebookUtils before calling logIn.");return i=e,o.default._logInWith("facebook",t)},link:function(e,t,r){if(t&&"string"!=typeof t){var n={};if(r)for(var a in r)n[a]=r[a];return n.authData=t,e._linkWith("facebook",n)}if(!u)throw new Error("You must initialize FacebookUtils before calling link.");return i=t,e._linkWith("facebook",r)},unlink:function(e,t){if(!u)throw new Error("You must initialize FacebookUtils before calling unlink.");return e._unlinkFrom("facebook",t)}};r.default=f},{"./ParseUser":26,"./parseDate":40,"@babel/runtime/helpers/interopRequireDefault":52}],6:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault")(e("./Storage")),i=null;function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var s={currentInstallationId:function(){if("string"==typeof i)return Promise.resolve(i);var e=n.default.generatePath("installationId");return n.default.getItemAsync(e).then(function(t){return t?i=t:(t=a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a(),n.default.setItemAsync(e,t).then(function(){return i=t}))})},_clearCache:function(){i=null},_setInstallationIdCache:function(e){i=e}};t.exports=s},{"./Storage":30,"@babel/runtime/helpers/interopRequireDefault":52}],7:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),f=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("@babel/runtime/helpers/defineProperty")),d=n(e("./EventEmitter")),h=n(e("./ParseObject")),p=n(e("./LiveQuerySubscription")),v=e("./promiseUtils"),y="initialized",b="reconnecting",m="disconnected",g="subscribe",_="close",C="error",O="close",P="error",w=function(e){function t(e){var r,n=e.applicationId,i=e.serverURL,s=e.javascriptKey,l=e.masterKey,d=e.sessionToken;if((0,a.default)(this,t),r=(0,o.default)(this,(0,u.default)(t).call(this)),(0,c.default)((0,f.default)((0,f.default)(r)),"attempts",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"id",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"requestId",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"applicationId",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"serverURL",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"javascriptKey",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"masterKey",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"sessionToken",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"connectPromise",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"subscriptions",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"socket",void 0),(0,c.default)((0,f.default)((0,f.default)(r)),"state",void 0),!i||0!==i.indexOf("ws"))throw new Error("You need to set a proper Parse LiveQuery server url before using LiveQueryClient");return r.reconnectHandle=null,r.attempts=1,r.id=0,r.requestId=1,r.serverURL=i,r.applicationId=n,r.javascriptKey=s,r.masterKey=l,r.sessionToken=d,r.connectPromise=(0,v.resolvingPromise)(),r.subscriptions=new Map,r.state=y,r}return(0,l.default)(t,e),(0,s.default)(t,[{key:"shouldOpen",value:function(){return this.state===y||this.state===m}},{key:"subscribe",value:function(e,t){var r=this;if(e){var n=e.className,i=e.toJSON(),a=i.where,s=i.keys?i.keys.split(","):void 0,o={op:g,requestId:this.requestId,query:{className:n,where:a,fields:s}};t&&(o.sessionToken=t);var u=new p.default(this.requestId,e,t);return this.subscriptions.set(this.requestId,u),this.requestId+=1,this.connectPromise.then(function(){r.socket.send(JSON.stringify(o))}),u.on("error",function(){}),u}}},{key:"unsubscribe",value:function(e){var t=this;if(e){this.subscriptions.delete(e.id);var r={op:"unsubscribe",requestId:e.id};this.connectPromise.then(function(){t.socket.send(JSON.stringify(r))})}}},{key:"open",value:function(){var e=this,t=this._getWebSocketImplementation();t?(this.state!==b&&(this.state="connecting"),this.socket=new t(this.serverURL),this.socket.onopen=function(){e._handleWebSocketOpen()},this.socket.onmessage=function(t){e._handleWebSocketMessage(t)},this.socket.onclose=function(){e._handleWebSocketClose()},this.socket.onerror=function(t){e._handleWebSocketError(t)}):this.emit(C,"Can not find WebSocket implementation")}},{key:"resubscribe",value:function(){var e=this;this.subscriptions.forEach(function(t,r){var n=t.query,i=n.toJSON(),a=i.where,s=i.keys?i.keys.split(","):void 0,o=n.className,u=t.sessionToken,l={op:g,requestId:r,query:{className:o,where:a,fields:s}};u&&(l.sessionToken=u),e.connectPromise.then(function(){e.socket.send(JSON.stringify(l))})})}},{key:"close",value:function(){if(this.state!==y&&this.state!==m){this.state=m,this.socket.close();var e=!0,t=!1,r=void 0;try{for(var n,i=this.subscriptions.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0)n.value.emit(O)}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}this._handleReset(),this.emit(_)}}},{key:"_getWebSocketImplementation",value:function(){return"function"==typeof WebSocket||"object"===("undefined"==typeof WebSocket?"undefined":(0,i.default)(WebSocket))?WebSocket:null}},{key:"_handleReset",value:function(){this.attempts=1,this.id=0,this.requestId=1,this.connectPromise=(0,v.resolvingPromise)(),this.subscriptions=new Map}},{key:"_handleWebSocketOpen",value:function(){this.attempts=1;var e={op:"connect",applicationId:this.applicationId,javascriptKey:this.javascriptKey,masterKey:this.masterKey,sessionToken:this.sessionToken};this.socket.send(JSON.stringify(e))}},{key:"_handleWebSocketMessage",value:function(e){var t=e.data;"string"==typeof t&&(t=JSON.parse(t));var r=null;switch(t.requestId&&(r=this.subscriptions.get(t.requestId)),t.op){case"connected":this.state===b&&this.resubscribe(),this.emit("open"),this.id=t.clientId,this.connectPromise.resolve(),this.state="connected";break;case"subscribed":r&&r.emit("open");break;case"error":t.requestId?r&&r.emit(P,t.error):this.emit(C,t.error);break;case"unsubscribed":break;default:var n=t.object.className;delete t.object.__type,delete t.object.className;var i=new h.default(n);if(i._finishFetch(t.object),!r)break;r.emit(t.op,i)}}},{key:"_handleWebSocketClose",value:function(){if(this.state!==m){this.state="closed",this.emit(_);var e=!0,t=!1,r=void 0;try{for(var n,i=this.subscriptions.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0)n.value.emit(O)}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}this._handleReconnect()}}},{key:"_handleWebSocketError",value:function(e){this.emit(C,e);var t=!0,r=!1,n=void 0;try{for(var i,a=this.subscriptions.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)i.value.emit(P)}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}this._handleReconnect()}},{key:"_handleReconnect",value:function(){var e=this;if(this.state!==m){this.state=b;var t,r=(t=this.attempts,Math.random()*Math.min(30,Math.pow(2,t)-1)*1e3);this.reconnectHandle&&clearTimeout(this.reconnectHandle),this.reconnectHandle=setTimeout(function(){e.attempts++,e.connectPromise=(0,v.resolvingPromise)(),e.open()}.bind(this),r)}}}]),t}(d.default);r.default=w},{"./EventEmitter":4,"./LiveQuerySubscription":8,"./ParseObject":18,"./promiseUtils":41,"@babel/runtime/helpers/assertThisInitialized":44,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55,"@babel/runtime/helpers/typeof":58}],8:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./EventEmitter")),f=n(e("./CoreManager")),c=function(e){function t(e,r,n){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,o.default)(t).call(this))).id=e,a.query=r,a.sessionToken=n,a}return(0,u.default)(t,e),(0,a.default)(t,[{key:"unsubscribe",value:function(){var e=this;return f.default.getLiveQueryController().getDefaultLiveQueryClient().then(function(t){t.unsubscribe(e),e.emit("close")})}}]),t}(l.default);r.default=c},{"./CoreManager":3,"./EventEmitter":4,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55}],9:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.defaultState=function(){return{serverData:{},pendingOps:[{}],objectCache:{},tasks:new l.default,existed:!1}},r.setServerData=function(e,t){for(var r in t)void 0!==t[r]?e[r]=t[r]:delete e[r]},r.setPendingOp=function(e,t,r){var n=e.length-1;r?e[n][t]=r:delete e[n][t]},r.pushPendingState=function(e){e.push({})},r.popPendingState=c,r.mergeFirstPendingState=function(e){var t=c(e),r=e[0];for(var n in t)if(r[n]&&t[n]){var i=r[n].mergeWith(t[n]);i&&(r[n]=i)}else r[n]=t[n]},r.estimateAttribute=function(e,t,r,n,i){for(var a=e[i],s=0;s<t.length;s++)t[s][i]&&(t[s][i]instanceof f.RelationOp?n&&(a=t[s][i].applyTo(a,{className:r,id:n},i)):a=t[s][i].applyTo(a));return a},r.estimateAttributes=function(e,t,r,n){var i={};for(var a in e)i[a]=e[a];for(var s=0;s<t.length;s++)for(a in t[s])t[s][a]instanceof f.RelationOp?n&&(i[a]=t[s][a].applyTo(i[a],{className:r,id:n},a)):i[a]=t[s][a].applyTo(i[a]);return i},r.commitServerChanges=function(e,t,r){for(var n in r){var l=r[n];if((e[n]=l)&&"object"===(0,i.default)(l)&&!(l instanceof o.default)&&!(l instanceof s.default)&&!(l instanceof u.default)){var f=(0,a.default)(l,!1,!0);t[n]=JSON.stringify(f)}}};var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("./encode")),s=n(e("./ParseFile")),o=n(e("./ParseObject")),u=n(e("./ParseRelation")),l=n(e("./TaskQueue")),f=e("./ParseOp");function c(e){var t=e.shift();return e.length||(e[0]={}),t}},{"./ParseFile":14,"./ParseObject":18,"./ParseOp":19,"./ParseRelation":22,"./TaskQueue":32,"./encode":37,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],10:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault"),a=i(e("./decode")),s=i(e("./encode")),o=i(e("./CoreManager")),u=i(e("./InstallationController")),l=n(e("./ParseOp")),f=i(e("./RESTController")),c={initialize:function(e,t){o.default.get("IS_NODE")&&console.log("It looks like you're using the browser version of the SDK in a node.js environment. You should require('parse/node') instead."),c._initialize(e,t)},_initialize:function(e,t,r){o.default.set("APPLICATION_ID",e),o.default.set("JAVASCRIPT_KEY",t),o.default.set("MASTER_KEY",r),o.default.set("USE_MASTER_KEY",!1)},setAsyncStorage:function(e){o.default.setAsyncStorage(e)}};Object.defineProperty(c,"applicationId",{get:function(){return o.default.get("APPLICATION_ID")},set:function(e){o.default.set("APPLICATION_ID",e)}}),Object.defineProperty(c,"javaScriptKey",{get:function(){return o.default.get("JAVASCRIPT_KEY")},set:function(e){o.default.set("JAVASCRIPT_KEY",e)}}),Object.defineProperty(c,"masterKey",{get:function(){return o.default.get("MASTER_KEY")},set:function(e){o.default.set("MASTER_KEY",e)}}),Object.defineProperty(c,"serverURL",{get:function(){return o.default.get("SERVER_URL")},set:function(e){o.default.set("SERVER_URL",e)}}),Object.defineProperty(c,"liveQueryServerURL",{get:function(){return o.default.get("LIVEQUERY_SERVER_URL")},set:function(e){o.default.set("LIVEQUERY_SERVER_URL",e)}}),c.ACL=e("./ParseACL").default,c.Analytics=e("./Analytics"),c.Cloud=e("./Cloud"),c.CoreManager=e("./CoreManager"),c.Config=e("./ParseConfig").default,c.Error=e("./ParseError").default,c.FacebookUtils=e("./FacebookUtils").default,c.File=e("./ParseFile").default,c.GeoPoint=e("./ParseGeoPoint").default,c.Polygon=e("./ParsePolygon").default,c.Installation=e("./ParseInstallation").default,c.Object=e("./ParseObject").default,c.Op={Set:l.SetOp,Unset:l.UnsetOp,Increment:l.IncrementOp,Add:l.AddOp,Remove:l.RemoveOp,AddUnique:l.AddUniqueOp,Relation:l.RelationOp},c.Push=e("./Push"),c.Query=e("./ParseQuery").default,c.Relation=e("./ParseRelation").default,c.Role=e("./ParseRole").default,c.Schema=e("./ParseSchema").default,c.Session=e("./ParseSession").default,c.Storage=e("./Storage"),c.User=e("./ParseUser").default,c.LiveQuery=e("./ParseLiveQuery").default,c.LiveQueryClient=e("./LiveQueryClient").default,c._request=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.default.getRESTController().request.apply(null,t)},c._ajax=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.default.getRESTController().ajax.apply(null,t)},c._decode=function(e,t){return(0,a.default)(t)},c._encode=function(e,t,r){return(0,s.default)(e,r)},c._getInstallationId=function(){return o.default.getInstallationController().currentInstallationId()},o.default.setInstallationController(u.default),o.default.setRESTController(f.default),c.Parse=c,t.exports=c},{"./Analytics":1,"./Cloud":2,"./CoreManager":3,"./FacebookUtils":5,"./InstallationController":6,"./LiveQueryClient":7,"./ParseACL":11,"./ParseConfig":12,"./ParseError":13,"./ParseFile":14,"./ParseGeoPoint":15,"./ParseInstallation":16,"./ParseLiveQuery":17,"./ParseObject":18,"./ParseOp":19,"./ParsePolygon":20,"./ParseQuery":21,"./ParseRelation":22,"./ParseRole":23,"./ParseSchema":24,"./ParseSession":25,"./ParseUser":26,"./Push":27,"./RESTController":28,"./Storage":30,"./decode":36,"./encode":37,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/interopRequireWildcard":53}],11:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/defineProperty")),u=n(e("./ParseRole")),l=n(e("./ParseUser")),f=function(){function e(t){if((0,a.default)(this,e),(0,o.default)(this,"permissionsById",void 0),this.permissionsById={},t&&"object"===(0,i.default)(t))if(t instanceof l.default)this.setReadAccess(t,!0),this.setWriteAccess(t,!0);else for(var r in t){var n=t[r];if("string"!=typeof r)throw new TypeError("Tried to create an ACL with an invalid user id.");for(var s in this.permissionsById[r]={},n){var u=n[s];if("read"!==s&&"write"!==s)throw new TypeError("Tried to create an ACL with an invalid permission type.");if("boolean"!=typeof u)throw new TypeError("Tried to create an ACL with an invalid permission value.");this.permissionsById[r][s]=u}}else if("function"==typeof t)throw new TypeError("ParseACL constructed with a function. Did you forget ()?")}return(0,s.default)(e,[{key:"toJSON",value:function(){var e={};for(var t in this.permissionsById)e[t]=this.permissionsById[t];return e}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var r=Object.keys(this.permissionsById),n=Object.keys(t.permissionsById);if(r.length!==n.length)return!1;for(var i in this.permissionsById){if(!t.permissionsById[i])return!1;if(this.permissionsById[i].read!==t.permissionsById[i].read)return!1;if(this.permissionsById[i].write!==t.permissionsById[i].write)return!1}return!0}},{key:"_setAccess",value:function(e,t,r){if(t instanceof l.default)t=t.id;else if(t instanceof u.default){var n=t.getName();if(!n)throw new TypeError("Role must have a name");t="role:"+n}if("string"!=typeof t)throw new TypeError("userId must be a string.");if("boolean"!=typeof r)throw new TypeError("allowed must be either true or false.");var i=this.permissionsById[t];if(!i){if(!r)return;i={},this.permissionsById[t]=i}r?this.permissionsById[t][e]=!0:(delete i[e],0===Object.keys(i).length&&delete this.permissionsById[t])}},{key:"_getAccess",value:function(e,t){if(t instanceof l.default){if(!(t=t.id))throw new Error("Cannot get access for a ParseUser without an ID")}else if(t instanceof u.default){var r=t.getName();if(!r)throw new TypeError("Role must have a name");t="role:"+r}var n=this.permissionsById[t];return!!n&&!!n[e]}},{key:"setReadAccess",value:function(e,t){this._setAccess("read",e,t)}},{key:"getReadAccess",value:function(e){return this._getAccess("read",e)}},{key:"setWriteAccess",value:function(e,t){this._setAccess("write",e,t)}},{key:"getWriteAccess",value:function(e){return this._getAccess("write",e)}},{key:"setPublicReadAccess",value:function(e){this.setReadAccess("*",e)}},{key:"getPublicReadAccess",value:function(){return this.getReadAccess("*")}},{key:"setPublicWriteAccess",value:function(e){this.setWriteAccess("*",e)}},{key:"getPublicWriteAccess",value:function(){return this.getWriteAccess("*")}},{key:"getRoleReadAccess",value:function(e){if(e instanceof u.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");return this.getReadAccess("role:"+e)}},{key:"getRoleWriteAccess",value:function(e){if(e instanceof u.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");return this.getWriteAccess("role:"+e)}},{key:"setRoleReadAccess",value:function(e,t){if(e instanceof u.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");this.setReadAccess("role:"+e,t)}},{key:"setRoleWriteAccess",value:function(e,t){if(e instanceof u.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");this.setWriteAccess("role:"+e,t)}}]),e}();r.default=f},{"./ParseRole":23,"./ParseUser":26,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],12:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/defineProperty")),u=n(e("./CoreManager")),l=n(e("./decode")),f=n(e("./escape")),c=n(e("./ParseError")),d=n(e("./Storage")),h=function(){function e(){(0,a.default)(this,e),(0,o.default)(this,"attributes",void 0),(0,o.default)(this,"_escapedAttributes",void 0),this.attributes={},this._escapedAttributes={}}return(0,s.default)(e,[{key:"get",value:function(e){return this.attributes[e]}},{key:"escape",value:function(e){var t=this._escapedAttributes[e];if(t)return t;var r=this.attributes[e],n="";return null!=r&&(n=(0,f.default)(r.toString())),this._escapedAttributes[e]=n}}],[{key:"current",value:function(){return u.default.getConfigController().current()}},{key:"get",value:function(){return u.default.getConfigController().get()}}]),e}(),p=null,v="currentConfig";function y(e){try{var t=JSON.parse(e);if(t&&"object"===(0,i.default)(t))return(0,l.default)(t)}catch(e){return null}}var b={current:function(){if(p)return p;var e,t=new h,r=d.default.generatePath(v);if(!d.default.async()){if(e=d.default.getItem(r)){var n=y(e);n&&(t.attributes=n,p=t)}return t}return d.default.getItemAsync(r).then(function(e){if(e){var r=y(e);r&&(t.attributes=r,p=t)}return t})},get:function(){return u.default.getRESTController().request("GET","config",{},{}).then(function(e){if(!e||!e.params){var t=new c.default(c.default.INVALID_JSON,"Config JSON response invalid.");return Promise.reject(t)}var r=new h;for(var n in r.attributes={},e.params)r.attributes[n]=(0,l.default)(e.params[n]);return p=r,d.default.setItemAsync(d.default.generatePath(v),JSON.stringify(e.params)).then(function(){return r})})}};u.default.setConfigController(b);var m=h;r.default=m},{"./CoreManager":3,"./ParseError":13,"./Storage":30,"./decode":36,"./escape":38,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],13:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),f=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,o.default)(t).call(this,r))).code=e,Object.defineProperty((0,l.default)((0,l.default)(n)),"message",{enumerable:!0,value:r}),n}return(0,u.default)(t,e),(0,a.default)(t,[{key:"toString",value:function(){return"ParseError: "+this.code+" "+this.message}}]),t}((0,n(e("@babel/runtime/helpers/wrapNativeSuper")).default)(Error));f.OTHER_CAUSE=-1,f.INTERNAL_SERVER_ERROR=1,f.CONNECTION_FAILED=100,f.OBJECT_NOT_FOUND=101,f.INVALID_QUERY=102,f.INVALID_CLASS_NAME=103,f.MISSING_OBJECT_ID=104,f.INVALID_KEY_NAME=105,f.INVALID_POINTER=106,f.INVALID_JSON=107,f.COMMAND_UNAVAILABLE=108,f.NOT_INITIALIZED=109,f.INCORRECT_TYPE=111,f.INVALID_CHANNEL_NAME=112,f.PUSH_MISCONFIGURED=115,f.OBJECT_TOO_LARGE=116,f.OPERATION_FORBIDDEN=119,f.CACHE_MISS=120,f.INVALID_NESTED_KEY=121,f.INVALID_FILE_NAME=122,f.INVALID_ACL=123,f.TIMEOUT=124,f.INVALID_EMAIL_ADDRESS=125,f.MISSING_CONTENT_TYPE=126,f.MISSING_CONTENT_LENGTH=127,f.INVALID_CONTENT_LENGTH=128,f.FILE_TOO_LARGE=129,f.FILE_SAVE_ERROR=130,f.DUPLICATE_VALUE=137,f.INVALID_ROLE_NAME=139,f.EXCEEDED_QUOTA=140,f.SCRIPT_FAILED=141,f.VALIDATION_ERROR=142,f.INVALID_IMAGE_DATA=143,f.UNSAVED_FILE_ERROR=151,f.INVALID_PUSH_TIME_ERROR=152,f.FILE_DELETE_ERROR=153,f.REQUEST_LIMIT_EXCEEDED=155,f.INVALID_EVENT_NAME=160,f.USERNAME_MISSING=200,f.PASSWORD_MISSING=201,f.USERNAME_TAKEN=202,f.EMAIL_TAKEN=203,f.EMAIL_MISSING=204,f.EMAIL_NOT_FOUND=205,f.SESSION_MISSING=206,f.MUST_CREATE_USER_THROUGH_SIGNUP=207,f.ACCOUNT_ALREADY_LINKED=208,f.INVALID_SESSION_TOKEN=209,f.LINKED_ID_MISSING=250,f.INVALID_LINKED_SESSION=251,f.UNSUPPORTED_SERVICE=252,f.INVALID_SCHEMA_OPERATION=255,f.AGGREGATE_ERROR=600,f.FILE_READ_ERROR=601,f.X_DOMAIN_REQUEST=602;var c=f;r.default=c},{"@babel/runtime/helpers/assertThisInitialized":44,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55,"@babel/runtime/helpers/wrapNativeSuper":59}],14:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("./CoreManager")),u=/^data:([a-zA-Z]+\/[-a-zA-Z0-9+.]+)(;charset=[a-zA-Z0-9\-\/]*)?;base64,/;function l(e){if(e<26)return String.fromCharCode(65+e);if(e<52)return String.fromCharCode(e-26+97);if(e<62)return String.fromCharCode(e-52+48);if(62===e)return"+";if(63===e)return"/";throw new TypeError("Tried to encode large digit "+e+" in base64.")}var f=function(){function e(t,r,n){(0,i.default)(this,e),(0,s.default)(this,"_name",void 0),(0,s.default)(this,"_url",void 0),(0,s.default)(this,"_source",void 0),(0,s.default)(this,"_previousSave",void 0);var a=n||"";if(this._name=t,void 0!==r)if(Array.isArray(r))this._source={format:"base64",base64:e.encodeBase64(r),type:a};else if("undefined"!=typeof File&&r instanceof File)this._source={format:"file",file:r,type:a};else{if(!r||"string"!=typeof r.base64)throw new TypeError("Cannot create a Parse.File with that data.");var o=r.base64,l=o.indexOf(",");if(-1!==l){var f=u.exec(o.slice(0,l+1));this._source={format:"base64",base64:o.slice(l+1),type:f[1]}}else this._source={format:"base64",base64:o,type:a}}}return(0,a.default)(e,[{key:"name",value:function(){return this._name}},{key:"url",value:function(e){if(e=e||{},this._url)return e.forceSecure?this._url.replace(/^http:\/\//i,"https://"):this._url}},{key:"save",value:function(e){var t=this;e=e||{};var r=o.default.getFileController();if(this._previousSave||("file"===this._source.format?this._previousSave=r.saveFile(this._name,this._source,e).then(function(e){return t._name=e.name,t._url=e.url,t}):this._previousSave=r.saveBase64(this._name,this._source,e).then(function(e){return t._name=e.name,t._url=e.url,t})),this._previousSave)return this._previousSave}},{key:"toJSON",value:function(){return{__type:"File",name:this._name,url:this._url}}},{key:"equals",value:function(t){return this===t||t instanceof e&&this.name()===t.name()&&this.url()===t.url()&&void 0!==this.url()}}],[{key:"fromJSON",value:function(t){if("File"!==t.__type)throw new TypeError("JSON object does not represent a ParseFile");var r=new e(t.name);return r._url=t.url,r}},{key:"encodeBase64",value:function(e){var t=[];t.length=Math.ceil(e.length/3);for(var r=0;r<t.length;r++){var n=e[3*r],i=e[3*r+1]||0,a=e[3*r+2]||0,s=3*r+1<e.length,o=3*r+2<e.length;t[r]=[l(n>>2&63),l(n<<4&48|i>>4&15),s?l(i<<2&60|a>>6&3):"=",o?l(63&a):"="].join("")}return t.join("")}}]),e}(),c={saveFile:function(e,t){if("file"!==t.format)throw new Error("saveFile can only be used with File-type sources.");var r={"X-Parse-Application-ID":o.default.get("APPLICATION_ID"),"Content-Type":t.type||(t.file?t.file.type:null)},n=o.default.get("JAVASCRIPT_KEY");n&&(r["X-Parse-JavaScript-Key"]=n);var i=o.default.get("SERVER_URL");return"/"!==i[i.length-1]&&(i+="/"),i+="files/"+e,o.default.getRESTController().ajax("POST",i,t.file,r).then(function(e){return e.response})},saveBase64:function(e,t,r){if("base64"!==t.format)throw new Error("saveBase64 can only be used with Base64-type sources.");var n={base64:t.base64};return t.type&&(n._ContentType=t.type),o.default.getRESTController().request("POST","files/"+e,n,r)}};o.default.setFileController(c);var d=f;r.default=d},{"./CoreManager":3,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52}],15:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/defineProperty")),u=function(){function e(t,r){(0,a.default)(this,e),(0,o.default)(this,"_latitude",void 0),(0,o.default)(this,"_longitude",void 0),Array.isArray(t)?(e._validate(t[0],t[1]),this._latitude=t[0],this._longitude=t[1]):"object"===(0,i.default)(t)?(e._validate(t.latitude,t.longitude),this._latitude=t.latitude,this._longitude=t.longitude):"number"==typeof t&&"number"==typeof r?(e._validate(t,r),this._latitude=t,this._longitude=r):(this._latitude=0,this._longitude=0)}return(0,s.default)(e,[{key:"toJSON",value:function(){return e._validate(this._latitude,this._longitude),{__type:"GeoPoint",latitude:this._latitude,longitude:this._longitude}}},{key:"equals",value:function(t){return t instanceof e&&this.latitude===t.latitude&&this.longitude===t.longitude}},{key:"radiansTo",value:function(e){var t=Math.PI/180,r=this.latitude*t,n=this.longitude*t,i=e.latitude*t,a=e.longitude*t,s=Math.sin((r-i)/2),o=Math.sin((n-a)/2),u=s*s+Math.cos(r)*Math.cos(i)*o*o;return u=Math.min(1,u),2*Math.asin(Math.sqrt(u))}},{key:"kilometersTo",value:function(e){return 6371*this.radiansTo(e)}},{key:"milesTo",value:function(e){return 3958.8*this.radiansTo(e)}},{key:"latitude",get:function(){return this._latitude},set:function(t){e._validate(t,this.longitude),this._latitude=t}},{key:"longitude",get:function(){return this._longitude},set:function(t){e._validate(this.latitude,t),this._longitude=t}}],[{key:"_validate",value:function(e,t){if(e!=e||t!=t)throw new TypeError("GeoPoint latitude and longitude must be valid numbers");if(e<-90)throw new TypeError("GeoPoint latitude out of bounds: "+e+" < -90.0.");if(90<e)throw new TypeError("GeoPoint latitude out of bounds: "+e+" > 90.0.");if(t<-180)throw new TypeError("GeoPoint longitude out of bounds: "+t+" < -180.0.");if(180<t)throw new TypeError("GeoPoint longitude out of bounds: "+t+" > 180.0.")}},{key:"current",value:function(){return navigator.geolocation.getCurrentPosition(function(t){return new e(t.coords.latitude,t.coords.longitude)})}}]),e}();r.default=u},{"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],16:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./ParseObject")),f=function(e){function t(e){var r;if((0,a.default)(this,t),r=(0,s.default)(this,(0,o.default)(t).call(this,"_Installation")),e&&"object"===(0,i.default)(e)&&!r.set(e||{}))throw new Error("Can't create an invalid Session");return r}return(0,u.default)(t,e),t}(l.default);r.default=f,l.default.registerSubclass("_Installation",f)},{"./ParseObject":18,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55,"@babel/runtime/helpers/typeof":58}],17:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("./EventEmitter")),a=n(e("./LiveQueryClient")),s=n(e("./CoreManager")),o=new i.default;o.open=function(){s.default.getLiveQueryController().open()},o.close=function(){s.default.getLiveQueryController().close()},o.on("error",function(){});var u,l=o;function f(){return s.default.getUserController().currentUserAsync().then(function(e){return e?e.getSessionToken():void 0})}function c(){return s.default.getLiveQueryController().getDefaultLiveQueryClient()}r.default=l;var d={setDefaultLiveQueryClient:function(e){u=e},getDefaultLiveQueryClient:function(){return u?Promise.resolve(u):f().then(function(e){var t=s.default.get("LIVEQUERY_SERVER_URL");if(t&&0!==t.indexOf("ws"))throw new Error("You need to set a proper Parse LiveQuery server url before using LiveQueryClient");if(!t){var r=s.default.get("SERVER_URL"),n="ws://";0===r.indexOf("https")&&(n="wss://"),t=n+r.replace(/^https?:\/\//,""),s.default.set("LIVEQUERY_SERVER_URL",t)}var i=s.default.get("APPLICATION_ID"),l=s.default.get("JAVASCRIPT_KEY"),f=s.default.get("MASTER_KEY");return(u=new a.default({applicationId:i,serverURL:t,javascriptKey:l,masterKey:f,sessionToken:e})).on("error",function(e){o.emit("error",e)}),u.on("open",function(){o.emit("open")}),u.on("close",function(){o.emit("close")}),u})},open:function(){c().then(function(e){return e.open()})},close:function(){c().then(function(e){return e.close()})},subscribe:function(e){var t=new i.default;return c().then(function(r){return r.shouldOpen()&&r.open(),f().then(function(n){var i=r.subscribe(e,n);t.id=i.id,t.query=i.query,t.sessionToken=i.sessionToken,t.unsubscribe=i.unsubscribe,i.on("open",function(){t.emit("open")}),i.on("create",function(e){t.emit("create",e)}),i.on("update",function(e){t.emit("update",e)}),i.on("enter",function(e){t.emit("enter",e)}),i.on("leave",function(e){t.emit("leave",e)}),i.on("delete",function(e){t.emit("delete",e)}),i.on("close",function(e){t.emit("close",e)}),i.on("error",function(e){t.emit("error",e)})})}),t},unsubscribe:function(e){c().then(function(t){return t.unsubscribe(e)})},_clearCachedDefaultClient:function(){u=null}};s.default.setLiveQueryController(d)},{"./CoreManager":3,"./EventEmitter":4,"./LiveQueryClient":7,"@babel/runtime/helpers/interopRequireDefault":52}],18:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/typeof")),s=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/defineProperty")),l=i(e("./CoreManager")),f=i(e("./canBeSerialized")),c=i(e("./decode")),d=i(e("./encode")),h=i(e("./escape")),p=i(e("./ParseACL")),v=i(e("./parseDate")),y=i(e("./ParseError")),b=i(e("./ParseFile")),m=e("./promiseUtils"),g=e("./ParseOp"),_=i(e("./ParseQuery")),C=i(e("./ParseRelation")),O=n(e("./SingleInstanceStateController")),P=i(e("./unique")),w=n(e("./UniqueInstanceStateController")),S=i(e("./unsavedChildren")),k={},E=0,A=0,I=!l.default.get("IS_NODE");function R(){var e=l.default.get("SERVER_URL");"/"!==e[e.length-1]&&(e+="/");var t=e.replace(/https?:\/\//,"");return t.substr(t.indexOf("/"))}I?l.default.setObjectStateController(O):l.default.setObjectStateController(w);var T=function(){function e(t,r,n){(0,s.default)(this,e),(0,u.default)(this,"id",void 0),(0,u.default)(this,"_localId",void 0),(0,u.default)(this,"_objCount",void 0),(0,u.default)(this,"className",void 0),"function"==typeof this.initialize&&this.initialize.apply(this,arguments);var i=null;if(this._objCount=A++,"string"==typeof t)this.className=t,r&&"object"===(0,a.default)(r)&&(i=r);else if(t&&"object"===(0,a.default)(t)){for(var o in this.className=t.className,i={},t)"className"!==o&&(i[o]=t[o]);r&&"object"===(0,a.default)(r)&&(n=r)}if(i&&!this.set(i,n))throw new Error("Can't create an invalid Parse Object")}return(0,o.default)(e,[{key:"_getId",value:function(){if("string"==typeof this.id)return this.id;if("string"==typeof this._localId)return this._localId;var e="local"+String(E++);return this._localId=e}},{key:"_getStateIdentifier",value:function(){if(I){var e=this.id;return e||(e=this._getId()),{id:e,className:this.className}}return this}},{key:"_getServerData",value:function(){return l.default.getObjectStateController().getServerData(this._getStateIdentifier())}},{key:"_clearServerData",value:function(){var e=this._getServerData(),t={};for(var r in e)t[r]=void 0;l.default.getObjectStateController().setServerData(this._getStateIdentifier(),t)}},{key:"_getPendingOps",value:function(){return l.default.getObjectStateController().getPendingOps(this._getStateIdentifier())}},{key:"_clearPendingOps",value:function(){var e=this._getPendingOps(),t=e[e.length-1];Object.keys(t).forEach(function(e){delete t[e]})}},{key:"_getDirtyObjectAttributes",value:function(){var t=this.attributes,r=l.default.getObjectStateController().getObjectCache(this._getStateIdentifier()),n={};for(var i in t){var s=t[i];if(s&&"object"===(0,a.default)(s)&&!(s instanceof e)&&!(s instanceof b.default)&&!(s instanceof C.default))try{var o=(0,d.default)(s,!1,!0),u=JSON.stringify(o);r[i]!==u&&(n[i]=s)}catch(t){n[i]=s}}return n}},{key:"_toFullJSON",value:function(e){var t=this.toJSON(e);return t.__type="Object",t.className=this.className,t}},{key:"_getSaveJSON",value:function(){var e=this._getPendingOps(),t=this._getDirtyObjectAttributes(),r={};for(var n in t)r[n]=new g.SetOp(t[n]).toJSON();for(n in e[0])r[n]=e[0][n].toJSON();return r}},{key:"_getSaveParams",value:function(){var e=this.id?"PUT":"POST",t=this._getSaveJSON(),r="classes/"+this.className;return this.id?r+="/"+this.id:"_User"===this.className&&(r="users"),{method:e,body:t,path:r}}},{key:"_finishFetch",value:function(e){!this.id&&e.objectId&&(this.id=e.objectId);var t=l.default.getObjectStateController();t.initializeState(this._getStateIdentifier());var r={};for(var n in e)"ACL"===n?r[n]=new p.default(e[n]):"objectId"!==n&&(r[n]=(0,c.default)(e[n]),r[n]instanceof C.default&&r[n]._ensureParentAndKey(this,n));r.createdAt&&"string"==typeof r.createdAt&&(r.createdAt=(0,v.default)(r.createdAt)),r.updatedAt&&"string"==typeof r.updatedAt&&(r.updatedAt=(0,v.default)(r.updatedAt)),!r.updatedAt&&r.createdAt&&(r.updatedAt=r.createdAt),t.commitServerChanges(this._getStateIdentifier(),r)}},{key:"_setExisted",value:function(e){var t=l.default.getObjectStateController().getState(this._getStateIdentifier());t&&(t.existed=e)}},{key:"_migrateId",value:function(e){if(this._localId&&e)if(I){var t=l.default.getObjectStateController(),r=t.removeState(this._getStateIdentifier());this.id=e,delete this._localId,r&&t.initializeState(this._getStateIdentifier(),r)}else this.id=e,delete this._localId}},{key:"_handleSaveResponse",value:function(e,t){var r={},n=l.default.getObjectStateController(),i=n.popPendingState(this._getStateIdentifier());for(var a in i)i[a]instanceof g.RelationOp?r[a]=i[a].applyTo(void 0,this,a):a in e||(r[a]=i[a].applyTo(void 0));for(a in e)"createdAt"!==a&&"updatedAt"!==a||"string"!=typeof e[a]?"ACL"===a?r[a]=new p.default(e[a]):"objectId"!==a&&(r[a]=(0,c.default)(e[a]),r[a]instanceof g.UnsetOp&&(r[a]=void 0)):r[a]=(0,v.default)(e[a]);r.createdAt&&!r.updatedAt&&(r.updatedAt=r.createdAt),this._migrateId(e.objectId),201!==t&&this._setExisted(!0),n.commitServerChanges(this._getStateIdentifier(),r)}},{key:"_handleSaveError",value:function(){l.default.getObjectStateController().mergeFirstPendingState(this._getStateIdentifier())}},{key:"initialize",value:function(){}},{key:"toJSON",value:function(e){var t=this.id?this.className+":"+this.id:this;e=e||[t];var r={},n=this.attributes;for(var i in n)"createdAt"!==i&&"updatedAt"!==i||!n[i].toJSON?r[i]=(0,d.default)(n[i],!1,!1,e):r[i]=n[i].toJSON();var a=this._getPendingOps();for(var s in a[0])r[s]=a[0][s].toJSON();return this.id&&(r.objectId=this.id),r}},{key:"equals",value:function(t){return this===t||t instanceof e&&this.className===t.className&&this.id===t.id&&void 0!==this.id}},{key:"dirty",value:function(e){if(!this.id)return!0;var t=this._getPendingOps(),r=this._getDirtyObjectAttributes();if(e){if(r.hasOwnProperty(e))return!0;for(var n=0;n<t.length;n++)if(t[n].hasOwnProperty(e))return!0;return!1}return 0!==Object.keys(t[0]).length||0!==Object.keys(r).length}},{key:"dirtyKeys",value:function(){for(var e=this._getPendingOps(),t={},r=0;r<e.length;r++)for(var n in e[r])t[n]=!0;var i=this._getDirtyObjectAttributes();for(var a in i)t[a]=!0;return Object.keys(t)}},{key:"toPointer",value:function(){if(!this.id)throw new Error("Cannot create a pointer to an unsaved ParseObject");return{__type:"Pointer",className:this.className,objectId:this.id}}},{key:"get",value:function(e){return this.attributes[e]}},{key:"relation",value:function(e){var t=this.get(e);if(t){if(!(t instanceof C.default))throw new Error("Called relation() on non-relation field "+e);return t._ensureParentAndKey(this,e),t}return new C.default(this,e)}},{key:"escape",value:function(e){var t=this.attributes[e];if(null==t)return"";if("string"!=typeof t){if("function"!=typeof t.toString)return"";t=t.toString()}return(0,h.default)(t)}},{key:"has",value:function(e){var t=this.attributes;return!!t.hasOwnProperty(e)&&null!=t[e]}},{key:"set",value:function(e,t,r){var n={},i={};if(e&&"object"===(0,a.default)(e))n=e,r=t;else{if("string"!=typeof e)return this;n[e]=t}r=r||{};var s=[];for(var o in"function"==typeof this.constructor.readOnlyAttributes&&(s=s.concat(this.constructor.readOnlyAttributes())),n)if("createdAt"!==o&&"updatedAt"!==o){if(-1<s.indexOf(o))throw new Error("Cannot modify readonly attribute: "+o);r.unset?i[o]=new g.UnsetOp:n[o]instanceof g.Op?i[o]=n[o]:n[o]&&"object"===(0,a.default)(n[o])&&"string"==typeof n[o].__op?i[o]=(0,g.opFromJSON)(n[o]):"objectId"===o||"id"===o?"string"==typeof n[o]&&(this.id=n[o]):"ACL"!==o||"object"!==(0,a.default)(n[o])||n[o]instanceof p.default?i[o]=new g.SetOp(n[o]):i[o]=new g.SetOp(new p.default(n[o]))}var u=this.attributes,f={};for(var c in i)i[c]instanceof g.RelationOp?f[c]=i[c].applyTo(u[c],this,c):i[c]instanceof g.UnsetOp||(f[c]=i[c].applyTo(u[c]));if(!r.ignoreValidation){var d=this.validate(f);if(d)return"function"==typeof r.error&&r.error(this,d),!1}var h=this._getPendingOps(),v=h.length-1,y=l.default.getObjectStateController();for(var b in i){var m=i[b].mergeWith(h[v][b]);y.setPendingOp(this._getStateIdentifier(),b,m)}return this}},{key:"unset",value:function(e,t){return(t=t||{}).unset=!0,this.set(e,null,t)}},{key:"increment",value:function(e,t){if(void 0===t&&(t=1),"number"!=typeof t)throw new Error("Cannot increment by a non-numeric amount.");return this.set(e,new g.IncrementOp(t))}},{key:"add",value:function(e,t){return this.set(e,new g.AddOp([t]))}},{key:"addAll",value:function(e,t){return this.set(e,new g.AddOp(t))}},{key:"addUnique",value:function(e,t){return this.set(e,new g.AddUniqueOp([t]))}},{key:"addAllUnique",value:function(e,t){return this.set(e,new g.AddUniqueOp(t))}},{key:"remove",value:function(e,t){return this.set(e,new g.RemoveOp([t]))}},{key:"removeAll",value:function(e,t){return this.set(e,new g.RemoveOp(t))}},{key:"op",value:function(e){for(var t=this._getPendingOps(),r=t.length;r--;)if(t[r][e])return t[r][e]}},{key:"clone",value:function(){var e=new this.constructor;e.className||(e.className=this.className);var t=this.attributes;if("function"==typeof this.constructor.readOnlyAttributes){var r=this.constructor.readOnlyAttributes()||[],n={};for(var i in t)r.indexOf(i)<0&&(n[i]=t[i]);t=n}return e.set&&e.set(t),e}},{key:"newInstance",value:function(){var e=new this.constructor;if(e.className||(e.className=this.className),e.id=this.id,I)return e;var t=l.default.getObjectStateController();return t&&t.duplicateState(this._getStateIdentifier(),e._getStateIdentifier()),e}},{key:"isNew",value:function(){return!this.id}},{key:"existed",value:function(){if(!this.id)return!1;var e=l.default.getObjectStateController().getState(this._getStateIdentifier());return!!e&&e.existed}},{key:"isValid",value:function(){return!this.validate(this.attributes)}},{key:"validate",value:function(e){if(e.hasOwnProperty("ACL")&&!(e.ACL instanceof p.default))return new y.default(y.default.OTHER_CAUSE,"ACL must be a Parse ACL.");for(var t in e)if(!/^[A-Za-z][0-9A-Za-z_]*$/.test(t))return new y.default(y.default.INVALID_KEY_NAME);return!1}},{key:"getACL",value:function(){var e=this.get("ACL");return e instanceof p.default?e:null}},{key:"setACL",value:function(e,t){return this.set("ACL",e,t)}},{key:"revert",value:function(){this._clearPendingOps()}},{key:"clear",value:function(){var e=this.attributes,t={},r=["createdAt","updatedAt"];for(var n in"function"==typeof this.constructor.readOnlyAttributes&&(r=r.concat(this.constructor.readOnlyAttributes())),e)r.indexOf(n)<0&&(t[n]=!0);return this.set(t,{unset:!0})}},{key:"fetch",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken),e.hasOwnProperty("include")&&(t.include=[],Array.isArray(e.include)?e.include.forEach(function(e){Array.isArray(e)?t.include=t.include.concat(e):t.include.push(e)}):t.include.push(e.include)),l.default.getObjectController().fetch(this,!0,t)}},{key:"fetchWithInclude",value:function(e,t){return(t=t||{}).include=e,this.fetch(t)}},{key:"save",value:function(e,t,r){var n,i,s=this;if("object"===(0,a.default)(e)||void 0===e?(n=e,"object"===(0,a.default)(t)&&(i=t)):((n={})[e]=t,i=r),!i&&n&&(i={},"function"==typeof n.success&&(i.success=n.success,delete n.success),"function"==typeof n.error&&(i.error=n.error,delete n.error)),n){var o=this.validate(n);if(o)return i&&"function"==typeof i.error&&i.error(this,o),Promise.reject(o);this.set(n,i)}var u={};(i=i||{}).hasOwnProperty("useMasterKey")&&(u.useMasterKey=!!i.useMasterKey),i.hasOwnProperty("sessionToken")&&"string"==typeof i.sessionToken&&(u.sessionToken=i.sessionToken);var f=l.default.getObjectController(),c=(0,S.default)(this);return f.save(c,u).then(function(){return f.save(s,u)})}},{key:"destroy",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken),this.id?l.default.getObjectController().destroy(this,t):Promise.resolve()}},{key:"attributes",get:function(){var e=l.default.getObjectStateController();return Object.freeze(e.estimateAttributes(this._getStateIdentifier()))}},{key:"createdAt",get:function(){return this._getServerData().createdAt}},{key:"updatedAt",get:function(){return this._getServerData().updatedAt}}],[{key:"_clearAllState",value:function(){l.default.getObjectStateController().clearAllState()}},{key:"fetchAll",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),t.hasOwnProperty("include")&&(r.include=[],Array.isArray(t.include)?t.include.forEach(function(e){Array.isArray(e)?r.include=r.include.concat(e):r.include.push(e)}):r.include.push(t.include)),l.default.getObjectController().fetch(e,!0,r)}},{key:"fetchAllWithInclude",value:function(t,r,n){return(n=n||{}).include=r,e.fetchAll(t,n)}},{key:"fetchAllIfNeeded",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),l.default.getObjectController().fetch(e,!1,r)}},{key:"destroyAll",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),l.default.getObjectController().destroy(e,r)}},{key:"saveAll",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={};return t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),l.default.getObjectController().save(e,r)}},{key:"createWithoutData",value:function(e){var t=new this;return t.id=e,t}},{key:"fromJSON",value:function(t,r){if(!t.className)throw new Error("Cannot create an object without a className");var n=k[t.className],i=n?new n:new e(t.className),a={};for(var s in t)"className"!==s&&"__type"!==s&&(a[s]=t[s]);if(r){a.objectId&&(i.id=a.objectId);var o=null;"function"==typeof i._preserveFieldsOnFetch&&(o=i._preserveFieldsOnFetch()),i._clearServerData(),o&&i._finishFetch(o)}return i._finishFetch(a),t.objectId&&i._setExisted(!0),i}},{key:"registerSubclass",value:function(e,t){if("string"!=typeof e)throw new TypeError("The first argument must be a valid class name.");if(void 0===t)throw new TypeError("You must supply a subclass constructor.");if("function"!=typeof t)throw new TypeError("You must register the subclass constructor. Did you attempt to register an instance of the subclass?");(k[e]=t).className||(t.className=e)}},{key:"extend",value:function(t,r,n){if("string"!=typeof t){if(t&&"string"==typeof t.className)return e.extend(t.className,t,r);throw new Error("Parse.Object.extend's first argument should be the className.")}var i=t;"User"===i&&l.default.get("PERFORM_USER_REWRITE")&&(i="_User");var s=e.prototype;this.hasOwnProperty("__super__")&&this.__super__?s=this.prototype:k[i]&&(s=k[i].prototype);var o=function(e,t){if(this.className=i,this._objCount=A++,"function"==typeof this.initialize&&this.initialize.apply(this,arguments),e&&"object"===(0,a.default)(e)&&!this.set(e||{},t))throw new Error("Can't create an invalid Parse Object")};if(o.className=i,o.__super__=s,o.prototype=Object.create(s,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),r)for(var u in r)"className"!==u&&Object.defineProperty(o.prototype,u,{value:r[u],enumerable:!1,writable:!0,configurable:!0});if(n)for(var f in n)"className"!==f&&Object.defineProperty(o,f,{value:n[f],enumerable:!1,writable:!0,configurable:!0});return o.extend=function(t,r,n){return"string"==typeof t?e.extend.call(o,t,r,n):e.extend.call(o,i,t,r)},o.createWithoutData=e.createWithoutData,k[i]=o}},{key:"enableSingleInstance",value:function(){I=!0,l.default.setObjectStateController(O)}},{key:"disableSingleInstance",value:function(){I=!1,l.default.setObjectStateController(w)}}]),e}(),N={fetch:function(e,t,r){if(Array.isArray(e)){if(e.length<1)return Promise.resolve([]);var n=[],i=[],a=null,s=[],o=null;if(e.forEach(function(e){o||(a||(a=e.className),a!==e.className&&(o=new y.default(y.default.INVALID_CLASS_NAME,"All objects should be of the same class")),e.id||(o=new y.default(y.default.MISSING_OBJECT_ID,"All objects must have an ID")),(t||0===Object.keys(e._getServerData()).length)&&(i.push(e.id),n.push(e)),s.push(e))}),o)return Promise.reject(o);var u=new _.default(a);return u.containedIn("objectId",i),r&&r.include&&u.include(r.include),u._limit=i.length,u.find(r).then(function(e){var r={};e.forEach(function(e){r[e.id]=e});for(var i=0;i<n.length;i++){var a=n[i];if((!a||!a.id||!r[a.id])&&t)return Promise.reject(new y.default(y.default.OBJECT_NOT_FOUND,"All objects must exist on the server."))}if(!I)for(var o=0;o<s.length;o++){var u=s[o];if(u&&u.id&&r[u.id]){var l=u.id;u._finishFetch(r[l].toJSON()),s[o]=r[l]}}return Promise.resolve(s)})}var f=l.default.getRESTController(),c={};return r&&r.include&&(c.include=r.include.join()),f.request("GET","classes/"+e.className+"/"+e._getId(),c,r).then(function(t){return e instanceof T&&(e._clearPendingOps(),e._clearServerData(),e._finishFetch(t)),e})},destroy:function(e,t){var r=l.default.getRESTController();if(Array.isArray(e)){if(e.length<1)return Promise.resolve([]);var n=[[]];e.forEach(function(e){e.id&&(n[n.length-1].push(e),20<=n[n.length-1].length&&n.push([]))}),0===n[n.length-1].length&&n.pop();var i=Promise.resolve(),a=[];return n.forEach(function(e){i=i.then(function(){return r.request("POST","batch",{requests:e.map(function(e){return{method:"DELETE",path:R()+"classes/"+e.className+"/"+e._getId(),body:{}}})},t).then(function(t){for(var r=0;r<t.length;r++)if(t[r]&&t[r].hasOwnProperty("error")){var n=new y.default(t[r].error.code,t[r].error.error);n.object=e[r],a.push(n)}})})}),i.then(function(){if(a.length){var t=new y.default(y.default.AGGREGATE_ERROR);return t.errors=a,Promise.reject(t)}return Promise.resolve(e)})}return e instanceof T?r.request("DELETE","classes/"+e.className+"/"+e._getId(),{},t).then(function(){return Promise.resolve(e)}):Promise.resolve(e)},save:function(e,t){var r=l.default.getRESTController(),n=l.default.getObjectStateController();if(Array.isArray(e)){if(e.length<1)return Promise.resolve([]);for(var i=e.concat(),a=0;a<e.length;a++)e[a]instanceof T&&(i=i.concat((0,S.default)(e[a],!0)));i=(0,P.default)(i);var s=Promise.resolve(),o=[];return i.forEach(function(e){e instanceof b.default?s=s.then(function(){return e.save()}):e instanceof T&&o.push(e)}),s.then(function(){var i=null;return(0,m.continueWhile)(function(){return 0<o.length},function(){var e,a,s=[],u=[];if(o.forEach(function(e){s.length<20&&(0,f.default)(e)?s.push(e):u.push(e)}),o=u,s.length<1)return Promise.reject(new y.default(y.default.OTHER_CAUSE,"Tried to save a batch with a cycle."));var l=new Promise(function(t,r){e=t,a=r});l.resolve=e,l.reject=a;var c=[],d=[];return s.forEach(function(e,t){var r,a,s=new Promise(function(e,t){r=e,a=t});s.resolve=r,s.reject=a,c.push(s),n.pushPendingState(e._getStateIdentifier()),d.push(n.enqueueTask(e._getStateIdentifier(),function(){return s.resolve(),l.then(function(r,n){if(r[t].hasOwnProperty("success"))e._handleSaveResponse(r[t].success,n);else{if(!i&&r[t].hasOwnProperty("error")){var a=r[t].error;i=new y.default(a.code,a.error),o=[]}e._handleSaveError()}})}))}),(0,m.when)(c).then(function(){return r.request("POST","batch",{requests:s.map(function(e){var t=e._getSaveParams();return t.path=R()+t.path,t})},t)}).then(function(e,t){l.resolve(e,t)},function(e){l.reject(new y.default(y.default.INCORRECT_TYPE,e.message))}),(0,m.when)(d)}).then(function(){return i?Promise.reject(i):Promise.resolve(e)})})}if(e instanceof T){var u=e;return n.pushPendingState(e._getStateIdentifier()),n.enqueueTask(e._getStateIdentifier(),function(){var e=u._getSaveParams();return r.request(e.method,e.path,e.body,t).then(function(e,t){u._handleSaveResponse(e,t)},function(e){return u._handleSaveError(),Promise.reject(e)})}).then(function(){return e},function(e){return Promise.reject(e)})}return Promise.resolve()}};l.default.setObjectController(N);var j=T;r.default=j},{"./CoreManager":3,"./ParseACL":11,"./ParseError":13,"./ParseFile":14,"./ParseOp":19,"./ParseQuery":21,"./ParseRelation":22,"./SingleInstanceStateController":29,"./UniqueInstanceStateController":33,"./canBeSerialized":35,"./decode":36,"./encode":37,"./escape":38,"./parseDate":40,"./promiseUtils":41,"./unique":42,"./unsavedChildren":43,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/interopRequireWildcard":53,"@babel/runtime/helpers/typeof":58}],19:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.opFromJSON=function(e){if(!e||!e.__op)return null;switch(e.__op){case"Delete":return new g;case"Increment":return new _(e.amount);case"Add":return new C((0,d.default)(e.objects));case"AddUnique":return new O((0,d.default)(e.objects));case"Remove":return new P((0,d.default)(e.objects));case"AddRelation":var t=(0,d.default)(e.objects);return Array.isArray(t)?new w(t,[]):new w([],[]);case"RemoveRelation":var r=(0,d.default)(e.objects);return Array.isArray(r)?new w([],r):new w([],[]);case"Batch":for(var n=[],i=[],a=0;a<e.ops.length;a++)"AddRelation"===e.ops[a].__op?n=n.concat((0,d.default)(e.ops[a].objects)):"RemoveRelation"===e.ops[a].__op&&(i=i.concat((0,d.default)(e.ops[a].objects)));return new w(n,i)}return null},r.RelationOp=r.RemoveOp=r.AddUniqueOp=r.AddOp=r.IncrementOp=r.UnsetOp=r.SetOp=r.Op=void 0;var i=n(e("@babel/runtime/helpers/possibleConstructorReturn")),a=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),o=n(e("@babel/runtime/helpers/assertThisInitialized")),u=n(e("@babel/runtime/helpers/defineProperty")),l=n(e("@babel/runtime/helpers/classCallCheck")),f=n(e("@babel/runtime/helpers/createClass")),c=n(e("./arrayContainsObject")),d=n(e("./decode")),h=n(e("./encode")),p=n(e("./ParseObject")),v=n(e("./ParseRelation")),y=n(e("./unique")),b=function(){function e(){(0,l.default)(this,e)}return(0,f.default)(e,[{key:"applyTo",value:function(){}},{key:"mergeWith",value:function(){}},{key:"toJSON",value:function(){}}]),e}(),m=function(e){function t(e){var r;return(0,l.default)(this,t),r=(0,i.default)(this,(0,a.default)(t).call(this)),(0,u.default)((0,o.default)((0,o.default)(r)),"_value",void 0),r._value=e,r}return(0,s.default)(t,e),(0,f.default)(t,[{key:"applyTo",value:function(){return this._value}},{key:"mergeWith",value:function(){return new t(this._value)}},{key:"toJSON",value:function(){return(0,h.default)(this._value,!1,!0)}}]),t}(r.Op=b);r.SetOp=m;var g=function(e){function t(){return(0,l.default)(this,t),(0,i.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,s.default)(t,e),(0,f.default)(t,[{key:"applyTo",value:function(){}},{key:"mergeWith",value:function(){return new t}},{key:"toJSON",value:function(){return{__op:"Delete"}}}]),t}(b);r.UnsetOp=g;var _=function(e){function t(e){var r;if((0,l.default)(this,t),r=(0,i.default)(this,(0,a.default)(t).call(this)),(0,u.default)((0,o.default)((0,o.default)(r)),"_amount",void 0),"number"!=typeof e)throw new TypeError("Increment Op must be initialized with a numeric amount.");return r._amount=e,r}return(0,s.default)(t,e),(0,f.default)(t,[{key:"applyTo",value:function(e){if(void 0===e)return this._amount;if("number"!=typeof e)throw new TypeError("Cannot increment a non-numeric value.");return this._amount+e}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof m)return new m(this.applyTo(e._value));if(e instanceof g)return new m(this._amount);if(e instanceof t)return new t(this.applyTo(e._amount));throw new Error("Cannot merge Increment Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Increment",amount:this._amount}}}]),t}(b);r.IncrementOp=_;var C=function(e){function t(e){var r;return(0,l.default)(this,t),r=(0,i.default)(this,(0,a.default)(t).call(this)),(0,u.default)((0,o.default)((0,o.default)(r)),"_value",void 0),r._value=Array.isArray(e)?e:[e],r}return(0,s.default)(t,e),(0,f.default)(t,[{key:"applyTo",value:function(e){if(null==e)return this._value;if(Array.isArray(e))return e.concat(this._value);throw new Error("Cannot add elements to a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof m)return new m(this.applyTo(e._value));if(e instanceof g)return new m(this._value);if(e instanceof t)return new t(this.applyTo(e._value));throw new Error("Cannot merge Add Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Add",objects:(0,h.default)(this._value,!1,!0)}}}]),t}(b);r.AddOp=C;var O=function(e){function t(e){var r;return(0,l.default)(this,t),r=(0,i.default)(this,(0,a.default)(t).call(this)),(0,u.default)((0,o.default)((0,o.default)(r)),"_value",void 0),r._value=(0,y.default)(Array.isArray(e)?e:[e]),r}return(0,s.default)(t,e),(0,f.default)(t,[{key:"applyTo",value:function(e){if(null==e)return this._value||[];if(Array.isArray(e)){var t=e,r=[];return this._value.forEach(function(e){e instanceof p.default?(0,c.default)(t,e)||r.push(e):t.indexOf(e)<0&&r.push(e)}),e.concat(r)}throw new Error("Cannot add elements to a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof m)return new m(this.applyTo(e._value));if(e instanceof g)return new m(this._value);if(e instanceof t)return new t(this.applyTo(e._value));throw new Error("Cannot merge AddUnique Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"AddUnique",objects:(0,h.default)(this._value,!1,!0)}}}]),t}(b);r.AddUniqueOp=O;var P=function(e){function t(e){var r;return(0,l.default)(this,t),r=(0,i.default)(this,(0,a.default)(t).call(this)),(0,u.default)((0,o.default)((0,o.default)(r)),"_value",void 0),r._value=(0,y.default)(Array.isArray(e)?e:[e]),r}return(0,s.default)(t,e),(0,f.default)(t,[{key:"applyTo",value:function(e){if(null==e)return[];if(Array.isArray(e)){for(var t=e.concat([]),r=0;r<this._value.length;r++){for(var n=t.indexOf(this._value[r]);-1<n;)t.splice(n,1),n=t.indexOf(this._value[r]);if(this._value[r]instanceof p.default&&this._value[r].id)for(var i=0;i<t.length;i++)t[i]instanceof p.default&&this._value[r].id===t[i].id&&(t.splice(i,1),i--)}return t}throw new Error("Cannot remove elements from a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof m)return new m(this.applyTo(e._value));if(e instanceof g)return new g;if(e instanceof t){for(var r=e._value.concat([]),n=0;n<this._value.length;n++)this._value[n]instanceof p.default?(0,c.default)(r,this._value[n])||r.push(this._value[n]):r.indexOf(this._value[n])<0&&r.push(this._value[n]);return new t(r)}throw new Error("Cannot merge Remove Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Remove",objects:(0,h.default)(this._value,!1,!0)}}}]),t}(b);r.RemoveOp=P;var w=function(e){function t(e,r){var n;return(0,l.default)(this,t),n=(0,i.default)(this,(0,a.default)(t).call(this)),(0,u.default)((0,o.default)((0,o.default)(n)),"_targetClassName",void 0),(0,u.default)((0,o.default)((0,o.default)(n)),"relationsToAdd",void 0),(0,u.default)((0,o.default)((0,o.default)(n)),"relationsToRemove",void 0),n._targetClassName=null,Array.isArray(e)&&(n.relationsToAdd=(0,y.default)(e.map(n._extractId,(0,o.default)((0,o.default)(n))))),Array.isArray(r)&&(n.relationsToRemove=(0,y.default)(r.map(n._extractId,(0,o.default)((0,o.default)(n))))),n}return(0,s.default)(t,e),(0,f.default)(t,[{key:"_extractId",value:function(e){if("string"==typeof e)return e;if(!e.id)throw new Error("You cannot add or remove an unsaved Parse Object from a relation");if(this._targetClassName||(this._targetClassName=e.className),this._targetClassName!==e.className)throw new Error("Tried to create a Relation with 2 different object types: "+this._targetClassName+" and "+e.className+".");return e.id}},{key:"applyTo",value:function(e,t,r){if(!e){if(!t||!r)throw new Error("Cannot apply a RelationOp without either a previous value, or an object and a key");var n=new p.default(t.className);t.id&&0===t.id.indexOf("local")?n._localId=t.id:t.id&&(n.id=t.id);var i=new v.default(n,r);return i.targetClassName=this._targetClassName,i}if(e instanceof v.default){if(this._targetClassName)if(e.targetClassName){if(this._targetClassName!==e.targetClassName)throw new Error("Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in.")}else e.targetClassName=this._targetClassName;return e}throw new Error("Relation cannot be applied to a non-relation field")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof g)throw new Error("You cannot modify a relation after deleting it.");if(e instanceof t){if(e._targetClassName&&e._targetClassName!==this._targetClassName)throw new Error("Related object must be of class "+e._targetClassName+", but "+(this._targetClassName||"null")+" was passed in.");var r=e.relationsToAdd.concat([]);this.relationsToRemove.forEach(function(e){var t=r.indexOf(e);-1<t&&r.splice(t,1)}),this.relationsToAdd.forEach(function(e){r.indexOf(e)<0&&r.push(e)});var n=e.relationsToRemove.concat([]);this.relationsToAdd.forEach(function(e){var t=n.indexOf(e);-1<t&&n.splice(t,1)}),this.relationsToRemove.forEach(function(e){n.indexOf(e)<0&&n.push(e)});var i=new t(r,n);return i._targetClassName=this._targetClassName,i}throw new Error("Cannot merge Relation Op with the previous Op")}},{key:"toJSON",value:function(){var e=this,t=function(t){return{__type:"Pointer",className:e._targetClassName,objectId:t}},r=null,n=null;return 0<this.relationsToAdd.length&&(r={__op:"AddRelation",objects:this.relationsToAdd.map(t)}),0<this.relationsToRemove.length&&(n={__op:"RemoveRelation",objects:this.relationsToRemove.map(t)}),r&&n?{__op:"Batch",ops:[r,n]}:r||n||{}}}]),t}(b);r.RelationOp=w},{"./ParseObject":18,"./ParseRelation":22,"./arrayContainsObject":34,"./decode":36,"./encode":37,"./unique":42,"@babel/runtime/helpers/assertThisInitialized":44,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55}],20:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("./ParseGeoPoint")),u=function(){function e(t){(0,i.default)(this,e),(0,s.default)(this,"_coordinates",void 0),this._coordinates=e._validate(t)}return(0,a.default)(e,[{key:"toJSON",value:function(){return e._validate(this._coordinates),{__type:"Polygon",coordinates:this._coordinates}}},{key:"equals",value:function(t){if(!(t instanceof e)||this.coordinates.length!==t.coordinates.length)return!1;for(var r=!0,n=1;n<this._coordinates.length;n+=1)if(this._coordinates[n][0]!=t.coordinates[n][0]||this._coordinates[n][1]!=t.coordinates[n][1]){r=!1;break}return r}},{key:"containsPoint",value:function(e){for(var t=this._coordinates[0][0],r=this._coordinates[0][0],n=this._coordinates[0][1],i=this._coordinates[0][1],a=1;a<this._coordinates.length;a+=1){var s=this._coordinates[a];t=Math.min(s[0],t),r=Math.max(s[0],r),n=Math.min(s[1],n),i=Math.max(s[1],i)}if(e.latitude<t||e.latitude>r||e.longitude<n||e.longitude>i)return!1;for(var o=!1,u=0,l=this._coordinates.length-1;u<this._coordinates.length;l=u++){var f=this._coordinates[u][0],c=this._coordinates[u][1],d=this._coordinates[l][0],h=this._coordinates[l][1];c>e.longitude!=h>e.longitude&&e.latitude<(d-f)*(e.longitude-c)/(h-c)+f&&(o=!o)}return o}},{key:"coordinates",get:function(){return this._coordinates},set:function(t){this._coordinates=e._validate(t)}}],[{key:"_validate",value:function(e){if(!Array.isArray(e))throw new TypeError("Coordinates must be an Array");if(e.length<3)throw new TypeError("Polygon must have at least 3 GeoPoints or Points");for(var t=[],r=0;r<e.length;r+=1){var n=e[r],i=void 0;if(n instanceof o.default)i=n;else{if(!Array.isArray(n)||2!==n.length)throw new TypeError("Coordinates must be an Array of GeoPoints or Points");i=new o.default(n[0],n[1])}t.push([i.latitude,i.longitude])}return t}}]),e}();r.default=u},{"./ParseGeoPoint":15,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52}],21:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/defineProperty")),u=n(e("./CoreManager")),l=n(e("./encode")),f=e("./promiseUtils"),c=n(e("./ParseError")),d=n(e("./ParseGeoPoint")),h=n(e("./ParseObject"));function p(e){return"\\Q"+e.replace("\\E","\\E\\\\E\\Q")+"\\E"}function v(e){var t=null;return e.forEach(function(e){if(t||(t=e.className),t!==e.className)throw new Error("All queries must be for the same class.")}),t}function y(e,t){var r={};t.forEach(function(t){var n=-1!==t.indexOf(".");if(n||e.hasOwnProperty(t)){if(n){var i=t.split("."),a=e,s=r;i.forEach(function(e,t,r){a&&!a.hasOwnProperty(e)&&(a[e]=void 0),void 0!==a&&(a=a[e]),t<r.length-1&&(s[e]||(s[e]={}),s=s[e])})}}else e[t]=void 0}),0<Object.keys(r).length&&function e(t,r,n,i){if(i)for(var a in t)t.hasOwnProperty(a)&&!r.hasOwnProperty(a)&&(r[a]=t[a]);for(var s in n)void 0!==r[s]&&null!==r[s]&&null!=t&&e(t[s],r[s],n[s],!0)}(u.default.getObjectStateController().getServerData({id:e.objectId,className:e.className}),e,r,!1)}var b=function(){function e(t){if((0,a.default)(this,e),(0,o.default)(this,"className",void 0),(0,o.default)(this,"_where",void 0),(0,o.default)(this,"_include",void 0),(0,o.default)(this,"_select",void 0),(0,o.default)(this,"_limit",void 0),(0,o.default)(this,"_skip",void 0),(0,o.default)(this,"_order",void 0),(0,o.default)(this,"_extraOptions",void 0),"string"==typeof t)"User"===t&&u.default.get("PERFORM_USER_REWRITE")?this.className="_User":this.className=t;else if(t instanceof h.default)this.className=t.className;else{if("function"!=typeof t)throw new TypeError("A ParseQuery must be constructed with a ParseObject or class name.");if("string"==typeof t.className)this.className=t.className;else{var r=new t;this.className=r.className}}this._where={},this._include=[],this._limit=-1,this._skip=0,this._extraOptions={}}return(0,s.default)(e,[{key:"_orQuery",value:function(e){var t=e.map(function(e){return e.toJSON().where});return this._where.$or=t,this}},{key:"_andQuery",value:function(e){var t=e.map(function(e){return e.toJSON().where});return this._where.$and=t,this}},{key:"_norQuery",value:function(e){var t=e.map(function(e){return e.toJSON().where});return this._where.$nor=t,this}},{key:"_addCondition",value:function(e,t,r){return this._where[e]&&"string"!=typeof this._where[e]||(this._where[e]={}),this._where[e][t]=(0,l.default)(r,!1,!0),this}},{key:"_regexStartWith",value:function(e){return"^"+p(e)}},{key:"toJSON",value:function(){var e={where:this._where};for(var t in this._include.length&&(e.include=this._include.join(",")),this._select&&(e.keys=this._select.join(",")),0<=this._limit&&(e.limit=this._limit),0<this._skip&&(e.skip=this._skip),this._order&&(e.order=this._order.join(",")),this._extraOptions)e[t]=this._extraOptions[t];return e}},{key:"withJSON",value:function(e){for(var t in e.where&&(this._where=e.where),e.include&&(this._include=e.include.split(",")),e.keys&&(this._select=e.keys.split(",")),e.limit&&(this._limit=e.limit),e.skip&&(this._skip=e.skip),e.order&&(this._order=e.order.split(",")),e)e.hasOwnProperty(t)&&-1===["where","include","keys","limit","skip","order"].indexOf(t)&&(this._extraOptions[t]=e[t]);return this}},{key:"get",value:function(e,t){this.equalTo("objectId",e);var r={};return t&&t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t&&t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),this.first(r).then(function(e){if(e)return e;var t=new c.default(c.default.OBJECT_NOT_FOUND,"Object not found.");return Promise.reject(t)})}},{key:"find",value:function(e){var t=this,r={};(e=e||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(r.sessionToken=e.sessionToken);var n=u.default.getQueryController(),i=this._select;return n.find(this.className,this.toJSON(),r).then(function(e){return e.results.map(function(r){var n=e.className||t.className;return r.className||(r.className=n),i&&y(r,i),h.default.fromJSON(r,!i)})})}},{key:"count",value:function(e){var t={};(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken);var r=u.default.getQueryController(),n=this.toJSON();return n.limit=0,n.count=1,r.find(this.className,n,t).then(function(e){return e.count})}},{key:"distinct",value:function(e,t){var r={useMasterKey:!0};(t=t||{}).hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken);var n=u.default.getQueryController(),i={distinct:e,where:this._where};return n.aggregate(this.className,i,r).then(function(e){return e.results})}},{key:"aggregate",value:function(e,t){var r={useMasterKey:!0};(t=t||{}).hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken);var n=u.default.getQueryController();if(!Array.isArray(e)&&"object"!==(0,i.default)(e))throw new Error("Invalid pipeline must be Array or Object");return n.aggregate(this.className,{pipeline:e},r).then(function(e){return e.results})}},{key:"first",value:function(e){var t=this,r={};(e=e||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(r.sessionToken=e.sessionToken);var n=u.default.getQueryController(),i=this.toJSON();i.limit=1;var a=this._select;return n.find(this.className,i,r).then(function(e){var r=e.results;if(r[0])return r[0].className||(r[0].className=t.className),a&&y(r[0],a),h.default.fromJSON(r[0],!a)})}},{key:"each",value:function(t,r){if(r=r||{},this._order||this._skip||0<=this._limit)return Promise.reject("Cannot iterate on a query with sort, skip, or limit.");var n=new e(this.className);for(var a in n._limit=r.batchSize||100,n._include=this._include.map(function(e){return e}),this._select&&(n._select=this._select.map(function(e){return e})),n._where={},this._where){var s=this._where[a];if(Array.isArray(s))n._where[a]=s.map(function(e){return e});else if(s&&"object"===(0,i.default)(s)){var o={};for(var u in n._where[a]=o,s)o[u]=s[u]}else n._where[a]=s}n.ascending("objectId");var l={};r.hasOwnProperty("useMasterKey")&&(l.useMasterKey=r.useMasterKey),r.hasOwnProperty("sessionToken")&&(l.sessionToken=r.sessionToken);var c=!1;return(0,f.continueWhile)(function(){return!c},function(){return n.find(l).then(function(e){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return t(e)})}),r.then(function(){e.length>=n._limit?n.greaterThan("objectId",e[e.length-1].id):c=!0})})})}},{key:"equalTo",value:function(e,t){return void 0===t?this.doesNotExist(e):(this._where[e]=(0,l.default)(t,!1,!0),this)}},{key:"notEqualTo",value:function(e,t){return this._addCondition(e,"$ne",t)}},{key:"lessThan",value:function(e,t){return this._addCondition(e,"$lt",t)}},{key:"greaterThan",value:function(e,t){return this._addCondition(e,"$gt",t)}},{key:"lessThanOrEqualTo",value:function(e,t){return this._addCondition(e,"$lte",t)}},{key:"greaterThanOrEqualTo",value:function(e,t){return this._addCondition(e,"$gte",t)}},{key:"containedIn",value:function(e,t){return this._addCondition(e,"$in",t)}},{key:"notContainedIn",value:function(e,t){return this._addCondition(e,"$nin",t)}},{key:"containedBy",value:function(e,t){return this._addCondition(e,"$containedBy",t)}},{key:"containsAll",value:function(e,t){return this._addCondition(e,"$all",t)}},{key:"containsAllStartingWith",value:function(e,t){var r=this;return Array.isArray(t)||(t=[t]),t=t.map(function(e){return{$regex:r._regexStartWith(e)}}),this.containsAll(e,t)}},{key:"exists",value:function(e){return this._addCondition(e,"$exists",!0)}},{key:"doesNotExist",value:function(e){return this._addCondition(e,"$exists",!1)}},{key:"matches",value:function(e,t,r){return this._addCondition(e,"$regex",t),r||(r=""),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),r.length&&this._addCondition(e,"$options",r),this}},{key:"matchesQuery",value:function(e,t){var r=t.toJSON();return r.className=t.className,this._addCondition(e,"$inQuery",r)}},{key:"doesNotMatchQuery",value:function(e,t){var r=t.toJSON();return r.className=t.className,this._addCondition(e,"$notInQuery",r)}},{key:"matchesKeyInQuery",value:function(e,t,r){var n=r.toJSON();return n.className=r.className,this._addCondition(e,"$select",{key:t,query:n})}},{key:"doesNotMatchKeyInQuery",value:function(e,t,r){var n=r.toJSON();return n.className=r.className,this._addCondition(e,"$dontSelect",{key:t,query:n})}},{key:"contains",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",p(t))}},{key:"fullText",value:function(e,t,r){if(r=r||{},!e)throw new Error("A key is required.");if(!t)throw new Error("A search term is required");if("string"!=typeof t)throw new Error("The value being searched for must be a string.");var n={$term:t};for(var i in r)switch(i){case"language":n.$language=r[i];break;case"caseSensitive":n.$caseSensitive=r[i];break;case"diacriticSensitive":n.$diacriticSensitive=r[i];break;default:throw new Error("Unknown option: ".concat(i))}return this._addCondition(e,"$text",{$search:n})}},{key:"sortByTextScore",value:function(){return this.ascending("$score"),this.select(["$score"]),this}},{key:"startsWith",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",this._regexStartWith(t))}},{key:"endsWith",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",p(t)+"$")}},{key:"near",value:function(e,t){return t instanceof d.default||(t=new d.default(t)),this._addCondition(e,"$nearSphere",t)}},{key:"withinRadians",value:function(e,t,r,n){return n||void 0===n?(this.near(e,t),this._addCondition(e,"$maxDistance",r)):this._addCondition(e,"$geoWithin",{$centerSphere:[[t.longitude,t.latitude],r]})}},{key:"withinMiles",value:function(e,t,r,n){return this.withinRadians(e,t,r/3958.8,n)}},{key:"withinKilometers",value:function(e,t,r,n){return this.withinRadians(e,t,r/6371,n)}},{key:"withinGeoBox",value:function(e,t,r){return t instanceof d.default||(t=new d.default(t)),r instanceof d.default||(r=new d.default(r)),this._addCondition(e,"$within",{$box:[t,r]}),this}},{key:"withinPolygon",value:function(e,t){return this._addCondition(e,"$geoWithin",{$polygon:t})}},{key:"polygonContains",value:function(e,t){return this._addCondition(e,"$geoIntersects",{$point:t})}},{key:"ascending",value:function(){this._order=[];for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addAscending.apply(this,t)}},{key:"addAscending",value:function(){var e=this;this._order||(this._order=[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)&&(t=t.join()),e._order=e._order.concat(t.replace(/\s/g,"").split(","))}),this}},{key:"descending",value:function(){this._order=[];for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addDescending.apply(this,t)}},{key:"addDescending",value:function(){var e=this;this._order||(this._order=[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)&&(t=t.join()),e._order=e._order.concat(t.replace(/\s/g,"").split(",").map(function(e){return"-"+e}))}),this}},{key:"skip",value:function(e){if("number"!=typeof e||e<0)throw new Error("You can only skip by a positive number");return this._skip=e,this}},{key:"limit",value:function(e){if("number"!=typeof e)throw new Error("You can only set the limit to a numeric value");return this._limit=e,this}},{key:"include",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)?e._include=e._include.concat(t):e._include.push(t)}),this}},{key:"includeAll",value:function(){return this.include("*")}},{key:"select",value:function(){var e=this;this._select||(this._select=[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){Array.isArray(t)?e._select=e._select.concat(t):e._select.push(t)}),this}},{key:"subscribe",value:function(){return u.default.getLiveQueryController().subscribe(this)}}],[{key:"fromJSON",value:function(t,r){return new e(t).withJSON(r)}},{key:"or",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=new e(v(r));return i._orQuery(r),i}},{key:"and",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=new e(v(r));return i._andQuery(r),i}},{key:"nor",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=new e(v(r));return i._norQuery(r),i}}]),e}(),m={find:function(e,t,r){return u.default.getRESTController().request("GET","classes/"+e,t,r)},aggregate:function(e,t,r){return u.default.getRESTController().request("GET","aggregate/"+e,t,r)}};u.default.setQueryController(m);var g=b;r.default=g},{"./CoreManager":3,"./ParseError":13,"./ParseGeoPoint":15,"./ParseObject":18,"./encode":37,"./promiseUtils":41,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],22:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=e("./ParseOp"),u=(n(e("./ParseObject")),n(e("./ParseQuery"))),l=function(){function e(t,r){(0,i.default)(this,e),(0,s.default)(this,"parent",void 0),(0,s.default)(this,"key",void 0),(0,s.default)(this,"targetClassName",void 0),this.parent=t,this.key=r,this.targetClassName=null}return(0,a.default)(e,[{key:"_ensureParentAndKey",value:function(e,t){if(this.key=this.key||t,this.key!==t)throw new Error("Internal Error. Relation retrieved from two different keys.");if(this.parent){if(this.parent.className!==e.className)throw new Error("Internal Error. Relation retrieved from two different Objects.");if(this.parent.id){if(this.parent.id!==e.id)throw new Error("Internal Error. Relation retrieved from two different Objects.")}else e.id&&(this.parent=e)}else this.parent=e}},{key:"add",value:function(e){Array.isArray(e)||(e=[e]);var t=new o.RelationOp(e,[]),r=this.parent;if(!r)throw new Error("Cannot add to a Relation without a parent");return r.set(this.key,t),this.targetClassName=t._targetClassName,r}},{key:"remove",value:function(e){Array.isArray(e)||(e=[e]);var t=new o.RelationOp([],e);if(!this.parent)throw new Error("Cannot remove from a Relation without a parent");this.parent.set(this.key,t),this.targetClassName=t._targetClassName}},{key:"toJSON",value:function(){return{__type:"Relation",className:this.targetClassName}}},{key:"query",value:function(){var e,t=this.parent;if(!t)throw new Error("Cannot construct a query for a Relation without a parent");return this.targetClassName?e=new u.default(this.targetClassName):(e=new u.default(t.className))._extraOptions.redirectClassNameForKey=this.key,e._addCondition("$relatedTo","object",{__type:"Pointer",className:t.className,objectId:t.id}),e._addCondition("$relatedTo","key",this.key),e}}]),e}();r.default=l},{"./ParseObject":18,"./ParseOp":19,"./ParseQuery":21,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52}],23:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/get")),l=n(e("@babel/runtime/helpers/inherits")),f=n(e("./ParseACL")),c=n(e("./ParseError")),d=n(e("./ParseObject")),h=function(e){function t(e,r){var n;return(0,i.default)(this,t),n=(0,s.default)(this,(0,o.default)(t).call(this,"_Role")),"string"==typeof e&&r instanceof f.default&&(n.setName(e),n.setACL(r)),n}return(0,l.default)(t,e),(0,a.default)(t,[{key:"getName",value:function(){var e=this.get("name");return null==e||"string"==typeof e?e:""}},{key:"setName",value:function(e,t){return this.set("name",e,t)}},{key:"getUsers",value:function(){return this.relation("users")}},{key:"getRoles",value:function(){return this.relation("roles")}},{key:"validate",value:function(e,r){var n=(0,u.default)((0,o.default)(t.prototype),"validate",this).call(this,e,r);if(n)return n;if("name"in e&&e.name!==this.getName()){var i=e.name;if(this.id&&this.id!==e.objectId)return new c.default(c.default.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if("string"!=typeof i)return new c.default(c.default.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(i))return new c.default(c.default.OTHER_CAUSE,"A role's name can be only contain alphanumeric characters, _, -, and spaces.")}return!1}}]),t}(d.default);d.default.registerSubclass("_Role",h);var p=h;r.default=p},{"./ParseACL":11,"./ParseError":13,"./ParseObject":18,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/get":49,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55}],24:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("./CoreManager")),u=["String","Number","Boolean","Date","File","GeoPoint","Polygon","Array","Object","Pointer","Relation"],l=function(){function e(t){(0,i.default)(this,e),(0,s.default)(this,"className",void 0),(0,s.default)(this,"_fields",void 0),(0,s.default)(this,"_indexes",void 0),"string"==typeof t&&("User"===t&&o.default.get("PERFORM_USER_REWRITE")?this.className="_User":this.className=t),this._fields={},this._indexes={}}return(0,a.default)(e,[{key:"get",value:function(e){return this.assertClassName(),e=e||{},o.default.getSchemaController().get(this.className,e).then(function(e){if(!e)throw new Error("Schema not found.");return e})}},{key:"save",value:function(e){this.assertClassName(),e=e||{};var t=o.default.getSchemaController(),r={className:this.className,fields:this._fields,indexes:this._indexes};return t.create(this.className,r,e).then(function(e){return e})}},{key:"update",value:function(e){this.assertClassName(),e=e||{};var t=o.default.getSchemaController(),r={className:this.className,fields:this._fields,indexes:this._indexes};return this._fields={},this._indexes={},t.update(this.className,r,e).then(function(e){return e})}},{key:"delete",value:function(e){return this.assertClassName(),e=e||{},o.default.getSchemaController().delete(this.className,e).then(function(e){return e})}},{key:"purge",value:function(){return this.assertClassName(),o.default.getSchemaController().purge(this.className).then(function(e){return e})}},{key:"assertClassName",value:function(){if(!this.className)throw new Error("You must set a Class Name before making any request.")}},{key:"addField",value:function(e,t){if(t=t||"String",!e)throw new Error("field name may not be null.");if(-1===u.indexOf(t))throw new Error("".concat(t," is not a valid type."));return this._fields[e]={type:t},this}},{key:"addIndex",value:function(e,t){if(!e)throw new Error("index name may not be null.");if(!t)throw new Error("index may not be null.");return this._indexes[e]=t,this}},{key:"addString",value:function(e){return this.addField(e,"String")}},{key:"addNumber",value:function(e){return this.addField(e,"Number")}},{key:"addBoolean",value:function(e){return this.addField(e,"Boolean")}},{key:"addDate",value:function(e){return this.addField(e,"Date")}},{key:"addFile",value:function(e){return this.addField(e,"File")}},{key:"addGeoPoint",value:function(e){return this.addField(e,"GeoPoint")}},{key:"addPolygon",value:function(e){return this.addField(e,"Polygon")}},{key:"addArray",value:function(e){return this.addField(e,"Array")}},{key:"addObject",value:function(e){return this.addField(e,"Object")}},{key:"addPointer",value:function(e,t){if(!e)throw new Error("field name may not be null.");if(!t)throw new Error("You need to set the targetClass of the Pointer.");return this._fields[e]={type:"Pointer",targetClass:t},this}},{key:"addRelation",value:function(e,t){if(!e)throw new Error("field name may not be null.");if(!t)throw new Error("You need to set the targetClass of the Relation.");return this._fields[e]={type:"Relation",targetClass:t},this}},{key:"deleteField",value:function(e){this._fields[e]={__op:"Delete"}}},{key:"deleteIndex",value:function(e){this._indexes[e]={__op:"Delete"}}}],[{key:"all",value:function(e){return e=e||{},o.default.getSchemaController().get("",e).then(function(e){if(0===e.results.length)throw new Error("Schema not found.");return e.results})}}]),e}(),f={send:function(e,t,r,n){var i=o.default.getRESTController(),a={useMasterKey:!0};return n.hasOwnProperty("sessionToken")&&(a.sessionToken=n.sessionToken),i.request(t,"schemas/".concat(e),r,a)},get:function(e,t){return this.send(e,"GET",{},t)},create:function(e,t,r){return this.send(e,"POST",t,r)},update:function(e,t,r){return this.send(e,"PUT",t,r)},delete:function(e,t){return this.send(e,"DELETE",{},t)},purge:function(e){return o.default.getRESTController().request("DELETE","purge/".concat(e),{},{useMasterKey:!0})}};o.default.setSchemaController(f);var c=l;r.default=c},{"./CoreManager":3,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52}],25:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),f=n(e("./CoreManager")),c=n(e("./isRevocableSession")),d=n(e("./ParseObject")),h=n(e("./ParseUser")),p=function(e){function t(e){var r;if((0,a.default)(this,t),r=(0,o.default)(this,(0,u.default)(t).call(this,"_Session")),e&&"object"===(0,i.default)(e)&&!r.set(e||{}))throw new Error("Can't create an invalid Session");return r}return(0,l.default)(t,e),(0,s.default)(t,[{key:"getSessionToken",value:function(){var e=this.get("sessionToken");return"string"==typeof e?e:""}}],[{key:"readOnlyAttributes",value:function(){return["createdWith","expiresAt","installationId","restricted","sessionToken","user"]}},{key:"current",value:function(e){e=e||{};var t=f.default.getSessionController(),r={};return e.hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),h.default.currentAsync().then(function(e){return e?(r.sessionToken=e.getSessionToken(),t.getSession(r)):Promise.reject("There is no current user.")})}},{key:"isCurrentSessionRevocable",value:function(){var e=h.default.current();return!!e&&(0,c.default)(e.getSessionToken()||"")}}]),t}(d.default);d.default.registerSubclass("_Session",p);var v={getSession:function(e){var t=f.default.getRESTController(),r=new p;return t.request("GET","sessions/me",{},e).then(function(e){return r._finishFetch(e),r._setExisted(!0),r})}};f.default.setSessionController(v);var y=p;r.default=y},{"./CoreManager":3,"./ParseObject":18,"./ParseUser":26,"./isRevocableSession":39,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55,"@babel/runtime/helpers/typeof":58}],26:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/get")),f=n(e("@babel/runtime/helpers/inherits")),c=n(e("./CoreManager")),d=n(e("./isRevocableSession")),h=n(e("./ParseError")),p=n(e("./ParseObject")),v=n(e("./ParseSession")),y=n(e("./Storage")),b="currentUser",m=!c.default.get("IS_NODE"),g=!1,_=null,C={},O=function(e){function t(e){var r;if((0,a.default)(this,t),r=(0,o.default)(this,(0,u.default)(t).call(this,"_User")),e&&"object"===(0,i.default)(e)&&!r.set(e||{}))throw new Error("Can't create an invalid Parse User");return r}return(0,f.default)(t,e),(0,s.default)(t,[{key:"_upgradeToRevocableSession",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),c.default.getUserController().upgradeToRevocableSession(this,t)}},{key:"_linkWith",value:function(e,t){var r,n=this;if("string"==typeof e?e=C[r=e]:r=e.getAuthType(),t&&t.hasOwnProperty("authData")){var a=this.get("authData")||{};if("object"!==(0,i.default)(a))throw new Error("Invalid type: authData field should be an object");return a[r]=t.authData,c.default.getUserController().linkWith(this,a)}return new Promise(function(t,r){e.authenticate({success:function(e,i){var a={};a.authData=i,n._linkWith(e,a).then(function(){t(n)},function(e){r(e)})},error:function(e,t){r(t)}})})}},{key:"_synchronizeAuthData",value:function(e){if(this.isCurrent()&&e){var t;"string"==typeof e?e=C[t=e]:t=e.getAuthType();var r=this.get("authData");e&&r&&"object"===(0,i.default)(r)&&(e.restoreAuthentication(r[t])||this._unlinkFrom(e))}}},{key:"_synchronizeAllAuthData",value:function(){var e=this.get("authData");if("object"===(0,i.default)(e))for(var t in e)this._synchronizeAuthData(t)}},{key:"_cleanupAuthData",value:function(){if(this.isCurrent()){var e=this.get("authData");if("object"===(0,i.default)(e))for(var t in e)e[t]||delete e[t]}}},{key:"_unlinkFrom",value:function(e){var t=this;return"string"==typeof e&&(e=C[e]),this._linkWith(e,{authData:null}).then(function(){return t._synchronizeAuthData(e),Promise.resolve(t)})}},{key:"_isLinked",value:function(e){var t;t="string"==typeof e?e:e.getAuthType();var r=this.get("authData")||{};return"object"===(0,i.default)(r)&&!!r[t]}},{key:"_logOutWithAll",value:function(){var e=this.get("authData");if("object"===(0,i.default)(e))for(var t in e)this._logOutWith(t)}},{key:"_logOutWith",value:function(e){this.isCurrent()&&("string"==typeof e&&(e=C[e]),e&&e.deauthenticate&&e.deauthenticate())}},{key:"_preserveFieldsOnFetch",value:function(){return{sessionToken:this.get("sessionToken")}}},{key:"isCurrent",value:function(){var e=t.current();return!!e&&e.id===this.id}},{key:"getUsername",value:function(){var e=this.get("username");return null==e||"string"==typeof e?e:""}},{key:"setUsername",value:function(e){var t=this.get("authData");t&&"object"===(0,i.default)(t)&&t.hasOwnProperty("anonymous")&&(t.anonymous=null),this.set("username",e)}},{key:"setPassword",value:function(e){this.set("password",e)}},{key:"getEmail",value:function(){var e=this.get("email");return null==e||"string"==typeof e?e:""}},{key:"setEmail",value:function(e){return this.set("email",e)}},{key:"getSessionToken",value:function(){var e=this.get("sessionToken");return null==e||"string"==typeof e?e:""}},{key:"authenticated",value:function(){var e=t.current();return!!this.get("sessionToken")&&!!e&&e.id===this.id}},{key:"signUp",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("installationId")&&(r.installationId=t.installationId),c.default.getUserController().signUp(this,e,r)}},{key:"logIn",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("installationId")&&(t.installationId=e.installationId),c.default.getUserController().logIn(this,t)}},{key:"save",value:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(0,l.default)((0,u.default)(t.prototype),"save",this).apply(this,n).then(function(){return e.isCurrent()?c.default.getUserController().updateUserOnDisk(e):e})}},{key:"destroy",value:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(0,l.default)((0,u.default)(t.prototype),"destroy",this).apply(this,n).then(function(){return e.isCurrent()?c.default.getUserController().removeUserFromDisk():e})}},{key:"fetch",value:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(0,l.default)((0,u.default)(t.prototype),"fetch",this).apply(this,n).then(function(){return e.isCurrent()?c.default.getUserController().updateUserOnDisk(e):e})}},{key:"fetchWithInclude",value:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(0,l.default)((0,u.default)(t.prototype),"fetchWithInclude",this).apply(this,n).then(function(){return e.isCurrent()?c.default.getUserController().updateUserOnDisk(e):e})}}],[{key:"readOnlyAttributes",value:function(){return["sessionToken"]}},{key:"extend",value:function(e,r){if(e)for(var n in e)"className"!==n&&Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1,writable:!0,configurable:!0});if(r)for(var i in r)"className"!==i&&Object.defineProperty(t,i,{value:r[i],enumerable:!1,writable:!0,configurable:!0});return t}},{key:"current",value:function(){return m?c.default.getUserController().currentUser():null}},{key:"currentAsync",value:function(){return m?c.default.getUserController().currentUserAsync():Promise.resolve(null)}},{key:"signUp",value:function(e,r,n,i){return(n=n||{}).username=e,n.password=r,new t(n).signUp({},i)}},{key:"logIn",value:function(e,r,n){if("string"!=typeof e)return Promise.reject(new h.default(h.default.OTHER_CAUSE,"Username must be a string."));if("string"!=typeof r)return Promise.reject(new h.default(h.default.OTHER_CAUSE,"Password must be a string."));var i=new t;return i._finishFetch({username:e,password:r}),i.logIn(n)}},{key:"become",value:function(e,t){if(!m)throw new Error("It is not memory-safe to become a user in a server environment");var r={sessionToken:e};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),c.default.getUserController().become(r)}},{key:"logInWith",value:function(e,r){return t._logInWith(e,r)}},{key:"logOut",value:function(){if(!m)throw new Error("There is no current user on a node.js server environment.");return c.default.getUserController().logOut()}},{key:"requestPasswordReset",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),c.default.getUserController().requestPasswordReset(e,r)}},{key:"allowCustomUserClass",value:function(e){c.default.set("PERFORM_USER_REWRITE",!e)}},{key:"enableRevocableSession",value:function(e){if(e=e||{},c.default.set("FORCE_REVOCABLE_SESSION",!0),m){var r=t.current();if(r)return r._upgradeToRevocableSession(e)}return Promise.resolve()}},{key:"enableUnsafeCurrentUser",value:function(){m=!0}},{key:"disableUnsafeCurrentUser",value:function(){m=!1}},{key:"_registerAuthenticationProvider",value:function(e){C[e.getAuthType()]=e,t.currentAsync().then(function(t){t&&t._synchronizeAuthData(e.getAuthType())})}},{key:"_logInWith",value:function(e,r){return(new t)._linkWith(e,r)}},{key:"_clearCache",value:function(){_=null,g=!1}},{key:"_setCurrentUserCache",value:function(e){_=e}}]),t}(p.default);p.default.registerSubclass("_User",O);var P={updateUserOnDisk:function(e){var t=y.default.generatePath(b),r=e.toJSON();return r.className="_User",y.default.setItemAsync(t,JSON.stringify(r)).then(function(){return e})},removeUserFromDisk:function(){var e=y.default.generatePath(b);return g=!0,_=null,y.default.removeItemAsync(e)},setCurrentUser:function(e){return(_=e)._cleanupAuthData(),e._synchronizeAllAuthData(),P.updateUserOnDisk(e)},currentUser:function(){if(_)return _;if(g)return null;if(y.default.async())throw new Error("Cannot call currentUser() when using a platform with an async storage system. Call currentUserAsync() instead.");var e=y.default.generatePath(b),t=y.default.getItem(e);if(g=!0,!t)return _=null;(t=JSON.parse(t)).className||(t.className="_User"),t._id&&(t.objectId!==t._id&&(t.objectId=t._id),delete t._id),t._sessionToken&&(t.sessionToken=t._sessionToken,delete t._sessionToken);var r=p.default.fromJSON(t);return(_=r)._synchronizeAllAuthData(),r},currentUserAsync:function(){if(_)return Promise.resolve(_);if(g)return Promise.resolve(null);var e=y.default.generatePath(b);return y.default.getItemAsync(e).then(function(e){if(g=!0,!e)return _=null,Promise.resolve(null);(e=JSON.parse(e)).className||(e.className="_User"),e._id&&(e.objectId!==e._id&&(e.objectId=e._id),delete e._id),e._sessionToken&&(e.sessionToken=e._sessionToken,delete e._sessionToken);var t=p.default.fromJSON(e);return(_=t)._synchronizeAllAuthData(),Promise.resolve(t)})},signUp:function(e,t,r){var n=t&&t.username||e.get("username"),i=t&&t.password||e.get("password");return n&&n.length?i&&i.length?e.save(t,r).then(function(){return e._finishFetch({password:void 0}),m?P.setCurrentUser(e):e}):Promise.reject(new h.default(h.default.OTHER_CAUSE,"Cannot sign up user with an empty password.")):Promise.reject(new h.default(h.default.OTHER_CAUSE,"Cannot sign up user with an empty name."))},logIn:function(e,t){var r=c.default.getRESTController(),n=c.default.getObjectStateController(),i={username:e.get("username"),password:e.get("password")};return r.request("GET","login",i,t).then(function(t){return e._migrateId(t.objectId),e._setExisted(!0),n.setPendingOp(e._getStateIdentifier(),"username",void 0),n.setPendingOp(e._getStateIdentifier(),"password",void 0),t.password=void 0,e._finishFetch(t),m?P.setCurrentUser(e):Promise.resolve(e)})},become:function(e){var t=new O;return c.default.getRESTController().request("GET","users/me",{},e).then(function(e){return t._finishFetch(e),t._setExisted(!0),P.setCurrentUser(t)})},logOut:function(){return P.currentUserAsync().then(function(e){var t=y.default.generatePath(b),r=y.default.removeItemAsync(t),n=c.default.getRESTController();if(null!==e){var i=e.getSessionToken();i&&(0,d.default)(i)&&(r=r.then(function(){return n.request("POST","logout",{},{sessionToken:i})})),e._logOutWithAll(),e._finishFetch({sessionToken:void 0})}return g=!0,_=null,r})},requestPasswordReset:function(e,t){return c.default.getRESTController().request("POST","requestPasswordReset",{email:e},t)},upgradeToRevocableSession:function(e,t){var r=e.getSessionToken();return r?(t.sessionToken=r,c.default.getRESTController().request("POST","upgradeToRevocableSession",{},t).then(function(t){var r=new v.default;return r._finishFetch(t),e._finishFetch({sessionToken:r.getSessionToken()}),e.isCurrent()?P.setCurrentUser(e):Promise.resolve(e)})):Promise.reject(new h.default(h.default.SESSION_MISSING,"Cannot upgrade a user with no session token"))},linkWith:function(e,t){return e.save({authData:t}).then(function(){return m?P.setCurrentUser(e):e})}};c.default.setUserController(P);var w=O;r.default=w},{"./CoreManager":3,"./ParseError":13,"./ParseObject":18,"./ParseSession":25,"./Storage":30,"./isRevocableSession":39,"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/get":49,"@babel/runtime/helpers/getPrototypeOf":50,"@babel/runtime/helpers/inherits":51,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/possibleConstructorReturn":55,"@babel/runtime/helpers/typeof":58}],27:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.send=function(e,t){if(t=t||{},e.where&&e.where instanceof s.default&&(e.where=e.where.toJSON().where),e.push_time&&"object"===(0,i.default)(e.push_time)&&(e.push_time=e.push_time.toJSON()),e.expiration_time&&"object"===(0,i.default)(e.expiration_time)&&(e.expiration_time=e.expiration_time.toJSON()),e.expiration_time&&e.expiration_interval)throw new Error("expiration_time and expiration_interval cannot both be set.");return a.default.getPushController().send(e,{useMasterKey:t.useMasterKey})};var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("./CoreManager")),s=n(e("./ParseQuery")),o={send:function(e,t){return a.default.getRESTController().request("POST","push",e,{useMasterKey:!!t.useMasterKey})}};a.default.setPushController(o)},{"./CoreManager":3,"./ParseQuery":21,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],28:[function(e,t,r){(function(r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/typeof")),a=n(e("./CoreManager")),s=n(e("./ParseError")),o=null;"undefined"!=typeof XMLHttpRequest&&(o=XMLHttpRequest);var u=!1;"undefined"==typeof XDomainRequest||"withCredentials"in new XMLHttpRequest||(u=!0);var l={ajax:function(e,t,n,i){if(u)return l=e,f=t,c=n,new Promise(function(e,t){var r=new XDomainRequest;r.onload=function(){var n;try{n=JSON.parse(r.responseText)}catch(n){t(n)}n&&e({response:n})},r.onerror=r.ontimeout=function(){var e={responseText:JSON.stringify({code:s.default.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};t(e)},r.onprogress=function(){},r.open(l,f),r.send(c)});var l,f,c,d,h,p=new Promise(function(e,t){d=e,h=t});p.resolve=d,p.reject=h;var v=0;return function s(){if(null==o)throw new Error("Cannot make a request: No definition of XMLHttpRequest was found.");var u=!1,l=new o;for(var f in l.onreadystatechange=function(){if(4===l.readyState&&!u)if(u=!0,200<=l.status&&l.status<300){var e;try{e=JSON.parse(l.responseText),"function"==typeof l.getResponseHeader&&(l.getAllResponseHeaders()||"").includes("x-parse-job-status-id: ")&&(e=l.getResponseHeader("x-parse-job-status-id"))}catch(e){p.reject(e.toString())}e&&p.resolve({response:e,status:l.status,xhr:l})}else if(500<=l.status||0===l.status)if(++v<a.default.get("REQUEST_ATTEMPT_LIMIT")){var t=Math.round(125*Math.random()*Math.pow(2,v));setTimeout(s,t)}else 0===l.status?p.reject("Unable to connect to the Parse API"):p.reject(l);else p.reject(l)},"string"!=typeof(i=i||{})["Content-Type"]&&(i["Content-Type"]="text/plain"),a.default.get("IS_NODE")&&(i["User-Agent"]="Parse/"+a.default.get("VERSION")+" (NodeJS "+r.versions.node+")"),l.open(e,t,!0),i)l.setRequestHeader(f,i[f]);l.send(n)}(),p},request:function(e,t,r,n){n=n||{};var o=a.default.get("SERVER_URL");"/"!==o[o.length-1]&&(o+="/"),o+=t;var u={};if(r&&"object"===(0,i.default)(r))for(var f in r)u[f]=r[f];"POST"!==e&&(u._method=e,e="POST"),u._ApplicationId=a.default.get("APPLICATION_ID");var c=a.default.get("JAVASCRIPT_KEY");c&&(u._JavaScriptKey=c),u._ClientVersion=a.default.get("VERSION");var d=n.useMasterKey;if(void 0===d&&(d=a.default.get("USE_MASTER_KEY")),d){if(!a.default.get("MASTER_KEY"))throw new Error("Cannot use the Master Key, it has not been provided.");delete u._JavaScriptKey,u._MasterKey=a.default.get("MASTER_KEY")}a.default.get("FORCE_REVOCABLE_SESSION")&&(u._RevocableSession="1");var h=n.installationId;return(h&&"string"==typeof h?Promise.resolve(h):a.default.getInstallationController().currentInstallationId()).then(function(e){u._InstallationId=e;var t=a.default.getUserController();return n&&"string"==typeof n.sessionToken?Promise.resolve(n.sessionToken):t?t.currentUserAsync().then(function(e){return e?Promise.resolve(e.getSessionToken()):Promise.resolve(null)}):Promise.resolve(null)}).then(function(t){t&&(u._SessionToken=t);var r=JSON.stringify(u);return l.ajax(e,o,r).then(function(e){return e.response})}).catch(function(e){var t;if(e&&e.responseText)try{var r=JSON.parse(e.responseText);t=new s.default(r.code,r.error)}catch(r){t=new s.default(s.default.INVALID_JSON,"Received an error with invalid JSON from Parse: "+e.responseText)}else t=new s.default(s.default.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(e));return Promise.reject(t)})},_setXHR:function(e){o=e}};t.exports=l}).call(this,e("_process"))},{"./CoreManager":3,"./ParseError":13,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58,_process:60}],29:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(r,"__esModule",{value:!0}),r.getState=s,r.initializeState=o,r.removeState=function(e){var t=s(e);return null===t?null:(delete a[e.className][e.id],t)},r.getServerData=u,r.setServerData=function(e,t){var r=o(e).serverData;i.setServerData(r,t)},r.getPendingOps=l,r.setPendingOp=function(e,t,r){var n=o(e).pendingOps;i.setPendingOp(n,t,r)},r.pushPendingState=function(e){var t=o(e).pendingOps;i.pushPendingState(t)},r.popPendingState=function(e){var t=o(e).pendingOps;return i.popPendingState(t)},r.mergeFirstPendingState=function(e){var t=l(e);i.mergeFirstPendingState(t)},r.getObjectCache=function(e){var t=s(e);return t?t.objectCache:{}},r.estimateAttribute=function(e,t){var r=u(e),n=l(e);return i.estimateAttribute(r,n,e.className,e.id,t)},r.estimateAttributes=function(e){var t=u(e),r=l(e);return i.estimateAttributes(t,r,e.className,e.id)},r.commitServerChanges=function(e,t){var r=o(e);i.commitServerChanges(r.serverData,r.objectCache,t)},r.enqueueTask=function(e,t){return o(e).tasks.enqueue(t)},r.clearAllState=function(){a={}},r.duplicateState=function(e,t){t.id=e.id};var i=n(e("./ObjectStateMutations")),a={};function s(e){var t=a[e.className];return t&&t[e.id]||null}function o(e,t){var r=s(e);return r||(a[e.className]||(a[e.className]={}),t||(t=i.defaultState()),a[e.className][e.id]=t)}function u(e){var t=s(e);return t?t.serverData:{}}function l(e){var t=s(e);return t?t.pendingOps:[{}]}},{"./ObjectStateMutations":9,"@babel/runtime/helpers/interopRequireWildcard":53}],30:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault")(e("./CoreManager")),i={async:function(){return!!n.default.getStorageController().async},getItem:function(e){var t=n.default.getStorageController();if(1===t.async)throw new Error("Synchronous storage is not supported by the current storage controller");return t.getItem(e)},getItemAsync:function(e){var t=n.default.getStorageController();return 1===t.async?t.getItemAsync(e):Promise.resolve(t.getItem(e))},setItem:function(e,t){var r=n.default.getStorageController();if(1===r.async)throw new Error("Synchronous storage is not supported by the current storage controller");return r.setItem(e,t)},setItemAsync:function(e,t){var r=n.default.getStorageController();return 1===r.async?r.setItemAsync(e,t):Promise.resolve(r.setItem(e,t))},removeItem:function(e){var t=n.default.getStorageController();if(1===t.async)throw new Error("Synchronous storage is not supported by the current storage controller");return t.removeItem(e)},removeItemAsync:function(e){var t=n.default.getStorageController();return 1===t.async?t.removeItemAsync(e):Promise.resolve(t.removeItem(e))},generatePath:function(e){if(!n.default.get("APPLICATION_ID"))throw new Error("You need to call Parse.initialize before using Parse.");if("string"!=typeof e)throw new Error("Tried to get a Storage path that was not a String.");return"/"===e[0]&&(e=e.substr(1)),"Parse/"+n.default.get("APPLICATION_ID")+"/"+e},_clear:function(){var e=n.default.getStorageController();e.hasOwnProperty("clear")&&e.clear()}};t.exports=i,n.default.setStorageController(e("./StorageController.browser"))},{"./CoreManager":3,"./StorageController.browser":31,"@babel/runtime/helpers/interopRequireDefault":52}],31:[function(e,t,r){"use strict";var n={async:0,getItem:function(e){return localStorage.getItem(e)},setItem:function(e,t){try{localStorage.setItem(e,t)}catch(e){}},removeItem:function(e){localStorage.removeItem(e)},clear:function(){localStorage.clear()}};t.exports=n},{}],32:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=function(){function e(){(0,i.default)(this,e),(0,s.default)(this,"queue",void 0),this.queue=[]}return(0,a.default)(e,[{key:"enqueue",value:function(e){var t,r,n=this,i=new Promise(function(e,n){t=e,r=n});return i.resolve=t,i.reject=r,this.queue.push({task:e,_completion:i}),1===this.queue.length&&e().then(function(){n._dequeue(),i.resolve()},function(e){n._dequeue(),i.reject(e)}),i}},{key:"_dequeue",value:function(){var e=this;if(this.queue.shift(),this.queue.length){var t=this.queue[0];t.task().then(function(){e._dequeue(),t._completion.resolve()},function(r){e._dequeue(),t._completion.reject(r)})}}}]),e}();t.exports=o},{"@babel/runtime/helpers/classCallCheck":45,"@babel/runtime/helpers/createClass":47,"@babel/runtime/helpers/defineProperty":48,"@babel/runtime/helpers/interopRequireDefault":52}],33:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=e("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(r,"__esModule",{value:!0}),r.getState=u,r.initializeState=l,r.removeState=function(e){var t=u(e);return null===t?null:(o.delete(e),t)},r.getServerData=f,r.setServerData=function(e,t){var r=l(e).serverData;a.setServerData(r,t)},r.getPendingOps=c,r.setPendingOp=function(e,t,r){var n=l(e).pendingOps;a.setPendingOp(n,t,r)},r.pushPendingState=function(e){var t=l(e).pendingOps;a.pushPendingState(t)},r.popPendingState=function(e){var t=l(e).pendingOps;return a.popPendingState(t)},r.mergeFirstPendingState=function(e){var t=c(e);a.mergeFirstPendingState(t)},r.getObjectCache=function(e){var t=u(e);return t?t.objectCache:{}},r.estimateAttribute=function(e,t){var r=f(e),n=c(e);return a.estimateAttribute(r,n,e.className,e.id,t)},r.estimateAttributes=function(e){var t=f(e),r=c(e);return a.estimateAttributes(t,r,e.className,e.id)},r.commitServerChanges=function(e,t){var r=l(e);a.commitServerChanges(r.serverData,r.objectCache,t)},r.enqueueTask=function(e,t){return l(e).tasks.enqueue(t)},r.duplicateState=function(e,t){var r=l(e),n=l(t);for(var i in r.serverData)n.serverData[i]=r.serverData[i];for(var a=0;a<r.pendingOps.length;a++)for(var s in r.pendingOps[a])n.pendingOps[a][s]=r.pendingOps[a][s];for(var o in r.objectCache)n.objectCache[o]=r.objectCache[o];n.existed=r.existed},r.clearAllState=function(){o=new WeakMap};var a=i(e("./ObjectStateMutations")),s=n(e("./TaskQueue")),o=new WeakMap;function u(e){return o.get(e)||null}function l(e,t){var r=u(e);return r||(t||(t={serverData:{},pendingOps:[{}],objectCache:{},tasks:new s.default,existed:!1}),r=t,o.set(e,r),r)}function f(e){var t=u(e);return t?t.serverData:{}}function c(e){var t=u(e);return t?t.pendingOps:[{}]}},{"./ObjectStateMutations":9,"./TaskQueue":32,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/interopRequireWildcard":53}],34:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if(-1<e.indexOf(t))return!0;for(var r=0;r<e.length;r++)if(e[r]instanceof i.default&&e[r].className===t.className&&e[r]._getId()===t._getId())return!0;return!1};var i=n(e("./ParseObject"))},{"./ParseObject":18,"@babel/runtime/helpers/interopRequireDefault":52}],35:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(!(e instanceof s.default))return!0;var t=e.attributes;for(var r in t){if(!u(t[r]))return!1}return!0};var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("./ParseFile")),s=n(e("./ParseObject")),o=n(e("./ParseRelation"));function u(e){if("object"!==(0,i.default)(e))return!0;if(e instanceof o.default)return!0;if(e instanceof s.default)return!!e.id;if(e instanceof a.default)return!!e.url();if(Array.isArray(e)){for(var t=0;t<e.length;t++)if(!u(e[t]))return!1;return!0}for(var r in e)if(!u(e[r]))return!1;return!0}},{"./ParseFile":14,"./ParseObject":18,"./ParseRelation":22,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],36:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function e(t){if(null===t||"object"!==(0,i.default)(t))return t;if(Array.isArray(t)){var r=[];return t.forEach(function(t,n){r[n]=e(t)}),r}if("string"==typeof t.__op)return(0,l.opFromJSON)(t);if("Pointer"===t.__type&&t.className)return u.default.fromJSON(t);if("Object"===t.__type&&t.className)return u.default.fromJSON(t);if("Relation"===t.__type){var n=new f.default(null,null);return n.targetClassName=t.className,n}if("Date"===t.__type)return new Date(t.iso);if("File"===t.__type)return a.default.fromJSON(t);if("GeoPoint"===t.__type)return new s.default({latitude:t.latitude,longitude:t.longitude});if("Polygon"===t.__type)return new o.default(t.coordinates);var c={};for(var d in t)c[d]=e(t[d]);return c};var i=n(e("@babel/runtime/helpers/typeof")),a=(n(e("./ParseACL")),n(e("./ParseFile"))),s=n(e("./ParseGeoPoint")),o=n(e("./ParsePolygon")),u=n(e("./ParseObject")),l=e("./ParseOp"),f=n(e("./ParseRelation"))},{"./ParseACL":11,"./ParseFile":14,"./ParseGeoPoint":15,"./ParseObject":18,"./ParseOp":19,"./ParsePolygon":20,"./ParseRelation":22,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],37:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r,n){return function e(t,r,n,h){if(t instanceof l.default){if(r)throw new Error("Parse Objects not allowed here");var p=t.id?t.className+":"+t.id:t;return n||!h||-1<h.indexOf(p)||t.dirty()||Object.keys(t._getServerData()).length<1?t.toPointer():(h=h.concat(p),t._toFullJSON(h))}if(t instanceof f.Op||t instanceof a.default||t instanceof o.default||t instanceof u.default||t instanceof c.default)return t.toJSON();if(t instanceof s.default){if(!t.url())throw new Error("Tried to encode an unsaved file.");return t.toJSON()}if("[object Date]"===d.call(t)){if(isNaN(t))throw new Error("Tried to encode an invalid date.");return{__type:"Date",iso:t.toJSON()}}if("[object RegExp]"===d.call(t)&&"string"==typeof t.source)return t.source;if(Array.isArray(t))return t.map(function(t){return e(t,r,n,h)});if(t&&"object"===(0,i.default)(t)){var v={};for(var y in t)v[y]=e(t[y],r,n,h);return v}return t}(e,!!t,!!r,n||[])};var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("./ParseACL")),s=n(e("./ParseFile")),o=n(e("./ParseGeoPoint")),u=n(e("./ParsePolygon")),l=n(e("./ParseObject")),f=e("./ParseOp"),c=n(e("./ParseRelation")),d=Object.prototype.toString},{"./ParseACL":11,"./ParseFile":14,"./ParseGeoPoint":15,"./ParseObject":18,"./ParseOp":19,"./ParsePolygon":20,"./ParseRelation":22,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return e.replace(/[&<>\/'"]/g,function(e){return n[e]})};var n={"&":"&amp;","<":"&lt;",">":"&gt;","/":"&#x2F;","'":"&#x27;",'"':"&quot;"}},{}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return-1<e.indexOf("r:")}},{}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$").exec(e);if(!t)return null;var r=t[1]||0,n=(t[2]||1)-1,i=t[3]||0,a=t[4]||0,s=t[5]||0,o=t[6]||0,u=t[8]||0;return new Date(Date.UTC(r,n,i,a,s,o,u))}},{}],41:[function(e,t,r){"use strict";function n(){var e,t,r=new Promise(function(r,n){e=r,t=n});return r.resolve=e,r.reject=t,r}Object.defineProperty(r,"__esModule",{value:!0}),r.resolvingPromise=n,r.when=function(e){var t,r=Array.isArray(e),i=(t=r?e:arguments).length,a=!1,s=[],o=r?[s]:s,u=[];if(s.length=t.length,u.length=t.length,0===i)return Promise.resolve(o);for(var l=new n,f=function(){--i<=0&&(a?l.reject(u):l.resolve(o))},c=function(e,t){e&&"function"==typeof e.then?e.then(function(e){s[t]=e,f()},function(e){u[t]=e,a=!0,f()}):(s[d]=e,f())},d=0;d<t.length;d++)c(t[d],d);return l},r.continueWhile=function e(t,r){return t()?r().then(function(){return e(t,r)}):Promise.resolve()}},{}],42:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=[];return e.forEach(function(e){e instanceof a.default?(0,i.default)(t,e)||t.push(e):t.indexOf(e)<0&&t.push(e)}),t};var i=n(e("./arrayContainsObject")),a=n(e("./ParseObject"))},{"./ParseObject":18,"./arrayContainsObject":34,"@babel/runtime/helpers/interopRequireDefault":52}],43:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r={objects:{},files:[]},n=e.className+":"+e._getId();r.objects[n]=!e.dirty()||e;var a=e.attributes;for(var s in a)"object"===(0,i.default)(a[s])&&u(a[s],r,!1,!!t);var o=[];for(var l in r.objects)l!==n&&!0!==r.objects[l]&&o.push(r.objects[l]);return o.concat(r.files)};var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("./ParseFile")),s=n(e("./ParseObject")),o=n(e("./ParseRelation"));function u(e,t,r,n){if(e instanceof s.default){if(!e.id&&r)throw new Error("Cannot create a pointer to an unsaved Object.");var l=e.className+":"+e._getId();if(!t.objects[l]){t.objects[l]=!e.dirty()||e;var f=e.attributes;for(var c in f)"object"===(0,i.default)(f[c])&&u(f[c],t,!n,n)}}else if(e instanceof a.default)!e.url()&&t.files.indexOf(e)<0&&t.files.push(e);else if(!(e instanceof o.default))for(var d in Array.isArray(e)&&e.forEach(function(e){"object"===(0,i.default)(e)&&u(e,t,r,n)}),e)"object"===(0,i.default)(e[d])&&u(e[d],t,r,n)}},{"./ParseFile":14,"./ParseObject":18,"./ParseRelation":22,"@babel/runtime/helpers/interopRequireDefault":52,"@babel/runtime/helpers/typeof":58}],44:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},{}],45:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],46:[function(e,t,r){var n=e("./setPrototypeOf");function i(e,r,a){return function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?t.exports=i=Reflect.construct:t.exports=i=function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&n(a,r.prototype),a},i.apply(null,arguments)}t.exports=i},{"./setPrototypeOf":56}],47:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},{}],48:[function(e,t,r){t.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{}],49:[function(e,t,r){e("./getPrototypeOf");var n=e("./superPropBase");function i(e,r,a){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(e,t,r){var i=n(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(r):a.value}},i(e,r,a||e)}t.exports=i},{"./getPrototypeOf":50,"./superPropBase":57}],50:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},{}],51:[function(e,t,r){var n=e("./setPrototypeOf");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},{"./setPrototypeOf":56}],52:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],53:[function(e,t,r){t.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}},{}],54:[function(e,t,r){t.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},{}],55:[function(e,t,r){var n=e("../helpers/typeof"),i=e("./assertThisInitialized");t.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}},{"../helpers/typeof":58,"./assertThisInitialized":44}],56:[function(e,t,r){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,r)}t.exports=n},{}],57:[function(e,t,r){var n=e("./getPrototypeOf");t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},{"./getPrototypeOf":50}],58:[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(e){return u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":u(e)})(e)}function i(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=i=function(e){return n(e)}:t.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(e)}t.exports=i},{}],59:[function(e,t,r){var n=e("./getPrototypeOf"),i=e("./setPrototypeOf"),a=e("./isNativeFunction"),s=e("./construct");function o(e){var r="function"==typeof Map?new Map:void 0;return t.exports=o=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},o(e)}t.exports=o},{"./construct":46,"./getPrototypeOf":50,"./isNativeFunction":54,"./setPrototypeOf":56}],60:[function(e,t,r){},{}],61:[function(e,t,r){var n=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r},a=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=n(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=s).EventEmitter=s).prototype._events=void 0,s.prototype._maxListeners=void 0;var o,l=10;try{var f={};Object.defineProperty&&Object.defineProperty(f,"x",{value:0}),o=0===f.x}catch(e){o=!1}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,r,i){var a,s,o;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]):(s=e._events=n(null),e._eventsCount=0),o){if("function"==typeof o?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),!o.warned&&(a=c(e))&&0<a&&o.length>a){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,"object"==("undefined"==typeof console?"undefined":u(console))&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else o=s[t]=r,++e._eventsCount;return e}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=a.call(h,n);return i.listener=r,n.wrapFn=i}function v(e,t,r){var n=e._events;if(!n)return[];var i=n[t];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):b(i,i.length):[]}function y(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function b(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}o?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');l=e}}):s.defaultMaxListeners=l,s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){var t,r,n,i,a,s,o="error"===e;if(s=this._events)o=o&&null==s.error;else if(!o)return!1;if(o){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var u=new Error('Unhandled "error" event. ('+t+")");throw u.context=t,u}if(!(r=s[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:!function(e,t,r){if(l)e.call(r);else for(var n=e.length,i=b(e,n),a=0;a<n;++a)i[a].call(r)}(r,0,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,a=b(e,i),s=0;s<i;++s)a[s].call(r,n)}(r,l,this,arguments[1]);break;case 3:!function(e,t,r,n,i){if(t)e.call(r,n,i);else for(var a=e.length,s=b(e,a),o=0;o<a;++o)s[o].call(r,n,i)}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,i,a){if(t)e.call(r,n,i,a);else for(var s=e.length,o=b(e,s),u=0;u<s;++u)o[u].call(r,n,i,a)}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),a=1;a<n;a++)i[a-1]=arguments[a];!function(e,t,r,n){if(l)e.apply(r,n);else for(var i=e.length,a=b(e,i),s=0;s<i;++s)a[s].apply(r,n)}(r,0,this,i)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,i,a,s,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=n(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,s=r.length-1;0<=s;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,a=s;break}if(a<0)return this;0===a?r.shift():function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,a),1===r.length&&(i[e]=r[0]),i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.removeAllListeners=function(e){var t,r,a;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=n(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=n(null):delete r[e]),this;if(0===arguments.length){var s,o=i(r);for(a=0;a<o.length;++a)"removeListener"!==(s=o[a])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=n(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},s.prototype.listeners=function(e){return v(this,e,!0)},s.prototype.rawListeners=function(e){return v(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},s.prototype.listenerCount=y,s.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}]},{},[10])(10)},"object"==u(t)&&void 0!==e?e.exports=o():(i=[],void 0===(a="function"==typeof(n=o)?n.apply(t,i):n)||(e.exports=a))}}).default});