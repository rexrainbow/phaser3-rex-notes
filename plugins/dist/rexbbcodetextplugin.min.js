!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rexbbcodetextplugin=e():t.rexbbcodetextplugin=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=279)}({1:function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){return null==t||""===t||0===t.length};e.a=function(t,e,n){if("object"===i(t))if(r(e)){if(null==n)return;"object"===i(n)&&(t=n)}else{"string"==typeof e&&(e=e.split("."));var s=e.pop();((function(t,e,n){void 0===n&&(n={});var s=t;if(r(e));else{var o;"string"==typeof e&&(e=e.split("."));for(var a=0,u=e.length;a<u;a++){var l;null!=s[o=e[a]]&&"object"===i(s[o])||(l=a===u-1?n:{},s[o]=l),s=s[o]}}return s})(t,e))[s]=n}}},10:function(t,e,n){"use strict";var i=n(6);e.a=function(t,e){var n=Array.isArray(t);for(var r in void 0===e?e=n?[]:{}:Object(i.a)(e),n&&(e.length=t.length),t)e[r]=t[r];return e}},12:function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=[]}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){this.items.length=0,this.items=void 0}},{key:"pop",value:function(){return this.items.length>0?this.items.pop():null}},{key:"push",value:function(t){return this.items.push(t),this}},{key:"pushMultiple",value:function(t){return this.items.push.apply(this.items,t),t.length=0,this}}])&&i(e.prototype,n),r&&i(e,r),t}();e.a=r},149:function(t,e,n){"use strict";var i=n(41);e.a=function(t,e,n,r){var s=new i.a(this.scene,t,e,n,r);return this.scene.add.existing(s),s}},150:function(t,e,n){"use strict";var i=n(41),r=Phaser.Utils.Objects.GetAdvancedValue,s=Phaser.GameObjects.BuildGameObject;e.a=function(t,e){var n=r(t,"text",""),o=r(t,"style",null),a=r(t,"padding",null);null!==a&&(o.padding=a),void 0!==e&&(t.add=e);var u=new i.a(this.scene,0,0,n,o);return s(this.scene,u,t),u.autoRound=r(t,"autoRound",!0),u.resolution=r(t,"resolution",1),u}},279:function(t,e,n){"use strict";n.r(e);var i=n(149),r=n(150),s=n(41),o=n(1);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=l(this,h(e).call(this,t)),t.registerGameObject("rexBBCodeText",i.a,r.a),n}var n,s,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,Phaser.Plugins.BasePlugin),n=e,(s=[{key:"start",value:function(){this.game.events.once("destroy",this.destroy,this)}}])&&u(n.prototype,s),o&&u(n,o),e}();Object(o.a)(window,"RexPlugins.GameObjects.BBCodeText",s.a),e.default=c},28:function(t,e,n){"use strict";var i=Phaser.Display.Canvas.CanvasPool,r=function(t){var e=i.create(this),n=e.getContext("2d");t.syncFont(e,n);var r=Math.ceil(n.measureText(t.testString).width*t.baselineX),s=r,o=2*s;s=s*t.baselineY|0,e.width=r,e.height=o,n.fillStyle="#f00",n.fillRect(0,0,r,o),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,s);var a={ascent:0,descent:0,fontSize:0};if(!n.getImageData(0,0,r,o))return a.ascent=s,a.descent=s+6,a.fontSize=a.ascent+a.descent,i.remove(e),a;var u,l,h=n.getImageData(0,0,r,o).data,f=h.length,c=4*r,d=0,p=!1;for(u=0;u<s;u++){for(l=0;l<c;l+=4)if(255!==h[d+l]){p=!0;break}if(p)break;d+=c}for(a.ascent=s-u,d=f-c,p=!1,u=o;u>s;u--){for(l=0;l<c;l+=4)if(255!==h[d+l]){p=!0;break}if(p)break;d-=c}return a.descent=u-s,a.fontSize=a.ascent+a.descent,i.remove(e),a},s=n(3);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=Phaser.Utils.Objects.GetAdvancedValue,u=Phaser.Utils.Objects.GetValue,l={backgroundColor:["backgroundColor",null],fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],underlineColor:["underline.color","#000"],underlineThickness:["underline.thickness",0],underlineOffset:["underline.offset",0],halign:["halign","left"],valign:["valign","top"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],lineSpacing:["lineSpacing",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wrapMode:["wrap.mode",1],wrapWidth:["wrap.width",0]},h=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e,this.backgroundColor,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.rtl,this.testString,this.baselineX,this.baselineY,this._font,this.setStyle(n,!1);var i=u(n,"metrics",!1);this.metrics=i?{ascent:u(i,"ascent",0),descent:u(i,"descent",0),fontSize:u(i,"fontSize",0)}:r(this)}var e,n,i;return e=t,(n=[{key:"setStyle",value:function(t,e){if(void 0===e&&(e=!0),t&&t.hasOwnProperty("wrap")){var n=t.wrap;if(n.hasOwnProperty("mode")){var i=n.mode;"string"==typeof i&&(n.mode=f[i])}else n.hasOwnProperty("width")&&(n.mode=1)}for(var r in t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),l)this[r]="wrapCallback"===r||"wrapCallbackScope"===r?u(t,l[r][0],l[r][1]):a(t,l[r][0],l[r][1]);var s=u(t,"font",null);this._font=null===s?this.fontStyle+" "+this.fontSize+" "+this.fontFamily:s;var o=u(t,"fill",null);return null!==o&&(this.color=o),e?this.update(!0):this.parent}},{key:"syncFont",value:function(t,e){e.font=this._font}},{key:"syncStyle",value:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}},{key:"syncShadow",value:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}},{key:"update",value:function(t){return t&&(this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily,this.metrics=r(this)),this.parent.updateText(t)}},{key:"buildFont",value:function(){var t=this.fontStyle+" "+this.fontSize+" "+this.fontFamily;return t!==this._font&&(this._font=t),this}},{key:"setFont",value:function(t){return"string"==typeof t?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=u(t,"fontFamily","Courier"),this.fontSize=u(t,"fontSize","16px"),this.fontStyle=u(t,"fontStyle","")),this.update(!0)}},{key:"setFontFamily",value:function(t){return this.fontFamily=t,this.update(!0)}},{key:"setFontStyle",value:function(t){return this.fontStyle=t,this.update(!0)}},{key:"setFontSize",value:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}},{key:"setTestString",value:function(t){return this.testString=t,this.update(!0)}},{key:"setFixedSize",value:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)}},{key:"setResolution",value:function(t){return this.resolution=t,this.update(!1)}},{key:"setLineSpacing",value:function(t){return this.lineSpacing=t,this.update(!1)}},{key:"setBackgroundColor",value:function(t){return this.backgroundColor=t,this.update(!1)}},{key:"setFill",value:function(t){return this.color=t,this.update(!1)}},{key:"setColor",value:function(t){return this.color=t,this.update(!1)}},{key:"setStroke",value:function(t,e){return void 0===t?this.strokeThickness=0:(void 0===e&&(e=this.strokeThickness),this.stroke=t,this.strokeThickness=e),this.update(!0)}},{key:"setShadow",value:function(t,e,n,i,r,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n="#000"),void 0===i&&(i=0),void 0===r&&(r=!1),void 0===s&&(s=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=n,this.shadowBlur=i,this.shadowStroke=r,this.shadowFill=s,this.update(!1)}},{key:"setShadowOffset",value:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}},{key:"setShadowColor",value:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)}},{key:"setShadowBlur",value:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)}},{key:"setShadowStroke",value:function(t){return this.shadowStroke=t,this.update(!1)}},{key:"setShadowFill",value:function(t){return this.shadowFill=t,this.update(!1)}},{key:"setUnderline",value:function(t,e,n){return void 0===t&&(t="#000"),void 0===e&&(e=0),void 0===n&&(n=0),this.underlineColor=t,this.underlineThickness=e,this.underlineOffset=n,this.update(!1)}},{key:"setUnderlineColor",value:function(t){return void 0===t&&(t="#000"),this.underlineColor=t,this.update(!1)}},{key:"setUnderlineThickness",value:function(t){return void 0===t&&(t=0),this.underlineThickness=t,this.update(!1)}},{key:"setUnderlineOffset",value:function(t){return void 0===t&&(t=0),this.underlineOffset=t,this.update(!1)}},{key:"setWrapMode",value:function(t){return"string"==typeof t&&(t=f[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}},{key:"setWrapWidth",value:function(t){return this.wrapWidth=t,this.update(!1)}},{key:"setAlign",value:function(t,e){return void 0===t&&(t="left"),void 0===e&&(e="top"),this.halign=t,this.valign=e,this.update(!1)}},{key:"setHAlign",value:function(t){return void 0===t&&(t="left"),this.halign=t,this.update(!1)}},{key:"setVAlign",value:function(t){return void 0===t&&(t="top"),this.valign=t,this.update(!1)}},{key:"setMaxLines",value:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)}},{key:"getTextMetrics",value:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}},{key:"toJSON",value:function(){var t={};for(var e in l)t[e]=this[e];return t.metrics=this.getTextMetrics(),t}},{key:"destroy",value:function(){this.parent=void 0}},{key:"lineHeight",get:function(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}}])&&o(e.prototype,n),i&&o(e,i),t}(),f=(s.a.hleft,s.a.hcenter,s.a.hright,s.a.vtop,s.a.vcenter,s.a.vbottom,{none:s.a.NO_WRAP,word:s.a.WORD_WRAP,char:s.a.CHAR_WRAP,character:s.a.CHAR_WRAP});e.a=h},3:function(t,e,n){"use strict";e.a={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/}},41:function(t,e,n){"use strict";var i=n(46),r={plainText:null,prevProp:null},s=new(n(28).a),o={},a={splitText:function(t,e){for(var n,i,r=[],s=0,o=t.length,a=o;n=h.exec(t);)i=n[0],s<(a=h.lastIndex-i.length)&&r.push(t.substring(s,a)),void 0===e&&r.push(i),s=h.lastIndex;return s<o&&r.push(t.substring(s,o)),r},tagTextToProp:function(t,e){var n,i;null==e&&(e={}),e.img&&u(e,L,"img"),f.test(t)?(u(e,F,"b",!0),n=""):c.test(t)?(u(e,L,"b"),n=""):d.test(t)?(u(e,F,"i",!0),n=""):p.test(t)?(u(e,L,"i"),n=""):y.test(t)?(i=t.match(y),u(e,F,"size",i[1]+"px"),n=""):g.test(t)?(u(e,L,"size"),n=""):v.test(t)?(i=t.match(v),u(e,F,"color",i[1]),n=""):w.test(t)?(u(e,L,"color"),n=""):k.test(t)?(i=t.match(k),u(e,F,"u",!0),n=""):x.test(t)?(i=t.match(x),u(e,F,"u",i[1]),n=""):m.test(t)?(u(e,L,"u"),n=""):b.test(t)?(u(e,F,"shadow",!0),n=""):S.test(t)?(u(e,L,"shadow"),n=""):T.test(t)?(u(e,F,"stroke",!0),n=""):P.test(t)?(i=t.match(P),u(e,F,"stroke",i[1]),n=""):O.test(t)?(u(e,L,"stroke"),n=""):M.test(t)?(i=t.match(M),u(e,F,"img",i[1]),n=""):_.test(t)?(u(e,L,"img"),n=""):C.test(t)?(i=t.match(C),u(e,F,"area",i[1]),n=""):W.test(t)?(u(e,L,"area"),n=""):n=t;var s=r;return s.plainText=n,s.prop=e,s},propToContextStyle:function(t,e){var n=s;if(e.hasOwnProperty("img"))n.image=e.img;else{if(n.image=null,e.hasOwnProperty("family")?n.fontFamily=e.family:n.fontFamily=t.fontFamily,e.hasOwnProperty("size")){var i=e.size;"number"==typeof i&&(i=i.toString()+"px"),n.fontSize=i}else n.fontSize=t.fontSize;n.fontStyle=l(e.b,e.i),e.hasOwnProperty("color")?n.color=e.color:n.color=t.color,e.hasOwnProperty("stroke")?!0===e.stroke?(n.stroke=t.stroke,n.strokeThickness=t.strokeThickness):(n.stroke=e.stroke,n.strokeThickness=t.strokeThickness):(n.stroke=t.stroke,n.strokeThickness=0)}return e.hasOwnProperty("shadow")?!0===e.shadow?(n.shadowColor=t.shadowColor,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY,n.shadowBlur=t.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0):(n.shadowColor=e.shadow,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY,n.shadowBlur=t.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0):(n.shadowColor="#000",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowStroke=!1,n.shadowFill=!1),e.hasOwnProperty("u")?!0===e.u?(n.underlineColor=t.underlineColor,n.underlineThickness=t.underlineThickness,n.underlineOffset=t.underlineOffset):(n.underlineColor=e.u,n.underlineThickness=t.underlineThickness,n.underlineOffset=t.underlineOffset):(n.underlineColor="#000",n.underlineThickness=0,n.underlineOffset=0),n},propToTagText:function(t,e,n){for(var i in null==n&&(n=o),n)e.hasOwnProperty(i)||(t="[/"+i+"]"+t);var r="";for(var i in e)n[i]!==e[i]&&("size"===i?r+="[size="+e[i].replace("px","")+"]":"color"===i||"stroke"===i||"img"===i?r+="["+i+"="+e[i]+"]":"u"===i?!0===e[i]?r+="[u]":r+="[u="+e[i]+"]":r+="["+i+"]");return t=r+t}},u=function(t,e,n,i){return e===F?t[n]=i:t.hasOwnProperty(n)&&delete t[n],t},l=function(t,e){return t&&e?"bold italic":t?"bold":e?"italic":""},h=/\[b\]|\[\/b\]|\[i\]|\[\/i\]|\[size=(\d+)\]|\[\/size\]|\[color=([a-z]+|#[0-9abcdef]+)\]|\[\/color\]|\[u\]|\[u=([a-z]+|#[0-9abcdef]+)\]|\[\/u\]|\[shadow\]|\[\/shadow\]|\[stroke\]|\[stroke=([a-z]+|#[0-9abcdef]+)\]|\[\/stroke\]|\[img=([^\]]+)\]|\[\/img\]|\[area=([^\]]+)\]|\[\/area\]/gi,f=/\[b\]/i,c=/\[\/b\]/i,d=/\[i\]/i,p=/\[\/i\]/i,y=/\[size=(\d+)\]/i,g=/\[\/size\]/i,v=/\[color=([a-z]+|#[0-9abcdef]+)\]/i,w=/\[\/color\]/i,k=/\[u\]/i,x=/\[u=([a-z]+|#[0-9abcdef]+)\]/i,m=/\[\/u\]/i,b=/\[shadow\]/i,S=/\[\/shadow\]/i,T=/\[stroke\]/i,P=/\[stroke=([a-z]+|#[0-9abcdef]+)\]/i,O=/\[\/stroke\]/i,M=/\[img=([^\]]+)\]/i,_=/\[\/img\]/i,C=/\[area=([^\]]+)\]/i,W=/\[\/area\]/i,L=!1,F=!0,j=a;function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I=function(t){function e(t,n,i,r,s){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),R(this,z(e).call(this,t,n,i,r,s,"rexBBCodeText",j))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,i["a"]),e}();e.a=I},46:function(t,e,n){"use strict";var i=n(60),r=n.n(i),s=n(61),o=n.n(s),a=n(9),u=(a.a,a.a,{renderWebGL:r.a,renderCanvas:o.a}),l=n(28),h=n(3),f={draw:function(t,e,n,i){var r=this.penManager;this.hitAreaManager.clear();var s=this.context;s.save(),this.drawBackground(this.defatultStyle.backgroundColor);var o=this.defatultStyle;t+=this.startXOffset,e+=this.startYOffset;var a,u,l,h,f,c,d=o.halign,p=o.valign,y=o.lineHeight,g=r.lines,v=g.length,w=o.maxLines;w>0&&v>w?(u=w,l="center"===p?Math.floor((v-u)/2):"bottom"===p?v-u:0):(u=v,l=0),h=l+u,c="center"===p?Math.max((i-u*y)/2,0):"bottom"===p?Math.max(i-u*y-2,0):0,c+=e;for(var k=l;k<h;k++)if(0!==(a=r.getLineWidth(k))){f="center"===d?(n-a)/2:"right"===d?n-a:0,f+=t;for(var x=g[k],m=0,b=x.length;m<b;m++)this.drawPen(x[m],f,c)}s.restore()},drawPen:function(t,e,n){e+=t.x,n+=t.y;var i=this.canvas,r=this.context;r.save();var s=this.parser.propToContextStyle(this.defatultStyle,t.prop);s.buildFont(),s.syncFont(i,r),s.syncStyle(i,r),s.underlineThickness>0&&t.width>0&&this.drawUnderline(e,n,t.width,s),t.isTextPen&&this.drawText(e,n,t.text,s),t.isImagePen&&this.drawImage(e,n,t.prop.img,s),r.restore(),t.hasAreaMarker&&t.width>0&&this.hitAreaManager.add(t.prop.area,e,n-this.startYOffset,t.width,this.defatultStyle.lineHeight)},clear:function(){var t=this.canvas;this.context.clearRect(0,0,t.width,t.height)},drawBackground:function(t){null!==t&&(this.context.fillStyle=t,this.context.fillRect(0,0,this.canvas.width,this.canvas.height))},drawUnderline:function(t,e,n,i){e+=i.underlineOffset-i.underlineThickness/2,this.autoRound&&(t=Math.round(t),e=Math.round(e));var r=this.context,s=r.lineCap;r.lineCap="butt",r.beginPath(),r.strokeStyle=i.underlineColor,r.lineWidth=i.underlineThickness,r.moveTo(t,e),r.lineTo(t+n,e),r.stroke(),r.lineCap=s},drawText:function(t,e,n,i){this.autoRound&&(t=Math.round(t),e=Math.round(e));var r=this.context;i.strokeThickness&&(i.syncShadow(r,i.shadowStroke),r.strokeText(n,t,e)),i.color&&"none"!==i.color&&(i.syncShadow(r,i.shadowFill),r.fillText(n,t,e))},drawImage:function(t,e,n,i){var r=this.parent.imageManager,s=r.get(n),o=r.getFrame(n);t+=s.left,e+=-this.startYOffset+s.y,this.autoRound&&(t=Math.round(t),e=Math.round(e)),this.context.drawImage(o.source.image,o.cutX,o.cutY,o.cutWidth,o.cutHeight,t,e,s.width,s.height)}},c=n(12);function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=Phaser.Utils.Objects.GetValue,y=h.a.NO_NEWLINE,g=h.a.RAW_NEWLINE,v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.prop={},this.resetFromJSON(e)}var e,n,i;return e=t,(n=[{key:"resetFromJSON",value:function(t){this.text=p(t,"text",""),this.x=p(t,"x",0),this.y=p(t,"y",0),this.width=p(t,"width",0);var e=p(t,"prop",null);null===e&&(e={}),this.prop=e,this.newLineMode=p(t,"newLineMode",0),this.startIndex=p(t,"startIndex",0)}},{key:"plainText",get:function(){var t=this.text;return this.newLineMode===g&&(t+="\n"),t}},{key:"wrapText",get:function(){var t=this.text;return this.newLineMode!==y&&(t+="\n"),t}},{key:"rawTextLength",get:function(){var t=this.text.length;return this.newLineMode===g&&(t+=1),t}},{key:"endIndex",get:function(){return this.startIndex+this.rawTextLength}},{key:"lastX",get:function(){return this.x+this.width}},{key:"isTextPen",get:function(){return""!==this.text}},{key:"isImagePen",get:function(){return!!this.prop.img}},{key:"hasAreaMarker",get:function(){return!!this.prop.area}}])&&d(e.prototype,n),i&&d(e,i),t}(),w=n(10);function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var x=Phaser.Utils.Objects.GetFastValue,m=h.a.NO_NEWLINE,b=h.a.WRAPPED_NEWLINE,S=new c.a,T=new c.a,P=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=x(e,"pensPool",S),this.LinesPool=x(e,"linesPool",T),this.tagToText=x(e,"tagToText",a.a),this.tagToTextScope=x(e,"tagToTextScope",void 0)}var e,n,i;return e=t,(n=[{key:"destroy",value:function(){this.freePens(),this.tagToText=void 0,this.tagToTextScope=void 0}},{key:"freePens",value:function(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}},{key:"addTextPen",value:function(t,e,n,i,r,s){var o=this.PensPool.pop();return null==o&&(o=new v),O.text=t,O.x=e,O.y=n,O.width=i,O.prop=r,O.newLineMode=s,o.resetFromJSON(O),this.addPen(o),this}},{key:"addImagePen",value:function(t,e,n,i){return this.addTextPen("",t,e,n,i,m),this}},{key:"addNewLinePen",value:function(){var t=this.lastPen,e=t?t.lastX:0,n=t?t.y:0,i=t?Object(w.a)(t.prop):null;return this.addTextPen("",e,n,0,i,b),this}},{key:"addPen",value:function(t){var e=this.lastPen;t.startIndex=null==e?0:e.endIndex,this.pens.push(t);var n=this.lastLine;null==n&&(n=this.LinesPool.pop()||[],this.lines.push(n)),n.push(t),t.newLineMode!==m&&(n=this.LinesPool.pop()||[],this.lines.push(n)),this.maxLinesWidth=void 0}},{key:"clone",value:function(e){null==e&&(e=new t),e.freePens();for(var n=0,i=this.lines.length;n<i;n++)for(var r=this.lines[n],s=0,o=r.length;s<o;s++){var a=r[s];e.addPen(a.text,a.x,a.y,a.width,Object(w.a)(a.prop),a.newLineMode)}return e}},{key:"getLineStartIndex",value:function(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e&&e[0]?e[0].startIndex:0}},{key:"getLineEndIndex",value:function(t){t>=this.lines.length&&(t=this.lines.length-1);var e,n,i=!1;for(e=t;e>=0&&!(i=null!=(n=this.lines[e])&&n.length>0);e--);return i?n[n.length-1].endIndex:0}},{key:"getLineWidth",value:function(t){var e=this.lines[t];if(!e)return 0;var n=e[e.length-1];return null==n?0:n.lastX}},{key:"getMaxLineWidth",value:function(){if(void 0!==this.maxLinesWidth)return this.maxLinesWidth;for(var t,e=0,n=0,i=this.lines.length;n<i;n++)(t=this.getLineWidth(n))>e&&(e=t);return this.maxLinesWidth=e,e}},{key:"getLineWidths",value:function(){for(var t=[],e=0,n=this.lines.length;e<n;e++)t.push(this.getLineWidth(e));return t}},{key:"getSliceTagText",value:function(t,e,n){if(void 0===t&&(t=0),void 0===e){var i=this.lastPen;if(null==i)return"";e=i.endIndex}void 0===n&&(n=!1);for(var r,s,o,a,u,l,h="",f=0,c=this.pens.length;f<c&&((a=(r=this.pens[f]).endIndex)<=t||(r=this.pens[f],s=n?r.wrapText:r.plainText,u=r.prop,(o=r.startIndex)>=t&&a<=e||(s=s.substring(t-o,e-o)),this.tagToTextScope?h+=this.tagToText.call(this.tagToTextScope,s,u,l):h+=this.tagToText(s,u,l),l=u,!(a>=e)));f++);return h}},{key:"lastPen",get:function(){return this.pens[this.pens.length-1]}},{key:"lastLine",get:function(){return this.lines[this.lines.length-1]}},{key:"linesCount",get:function(){return this.lines.length}},{key:"plainText",get:function(){for(var t="",e=this.pens,n=0,i=e.length;n<i;n++)t+=e[n].plainText;return t}},{key:"rawTextLength",get:function(){for(var t=0,e=this.pens,n=0,i=this.pens.length;n<i;n++)t+=e[n].rawTextLength;return t}}])&&k(e.prototype,n),i&&k(e,i),t}(),O={},M=P;function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var C=Phaser.Geom.Rectangle,W=new c.a,L=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hitAreas=[]}var e,n,i;return e=t,(n=[{key:"destroy",value:function(){this.clear()}},{key:"clear",value:function(){return W.pushMultiple(this.hitAreas),this}},{key:"add",value:function(t,e,n,i,r){var s=W.pop();return null===s?s=new C(e,n,i,r):s.setTo(e,n,i,r),s.key=t,this.hitAreas.push(s),this}},{key:"contains",value:function(t,e){for(var n,i=this.hitAreas,r=0,s=i.length;r<s;r++)if((n=i[r]).contains(t,e))return n.key;return!1}},{key:"drawBounds",value:function(t,e,n){void 0===e&&(e=16777215),n&&t.save().scaleCanvas(n.scaleX,n.scaleY).rotateCanvas(n.rotation).translateCanvas(n.x,n.y);for(var i,r=this.hitAreas,s=0,o=r.length;s<o;s++)i=r[s],t.lineStyle(1,e).strokeRect(i.x,i.y,i.width,i.height);return n&&t.restore(),this}}])&&_(e.prototype,n),i&&_(e,i),t}(),F=function(t,e,n,i){var r=this.hitAreaManager.contains(n,i);!1!==r&&(this.parent.emit("".concat(t,"-").concat(r),e,n,i),this.parent.emit(t,r,e,n,i))},j=function(){this.parent.on("pointerdown",function(t,e,n,i){F.call(this,"areadown",t,e,n)},this).on("pointerup",function(t,e,n,i){F.call(this,"areaup",t,e,n)},this)},A=h.a.NO_NEWLINE,R=h.a.RAW_NEWLINE,z=h.a.WRAPPED_NEWLINE,E=h.a.NO_WRAP,I=h.a.WORD_WRAP,N=(h.a.CHAR_WRAP,h.a.SPLITREGEXP),B=[],X=new c.a;X.newline=function(t,e,n){var i=this.pop();return null===i&&(i={}),i.text=t,i.width=e,i.newLineMode=n,i};var H=function(t,e,n,i,r){i<=0&&(n=E);var s=B;if(X.pushMultiple(s),!t||!t.length)return s;for(var o,a,u,l=t.split(N),h=0,f=l.length;h<f;h++)if(o=l[h],u=h===f-1?A:R,n!==E){var c,d;if(a=0===h?i-r:i,o.length<=100&&(x=e(o))<=a){s.push(X.newline(o,x,u));continue}for(var p,y="",g="",v=0,w=0,k=(c=n===I?o.split(" "):o).length;w<k;w++)d=c[w],n===I?(y+=d,w<k-1&&(y+=" ")):y+=d,(p=e(y))>a&&(0===w?s.push(X.newline("",0,z)):(s.push(X.newline(g,v,z)),y=d,n===I&&w<k-1&&(y+=" "),p=e(y)),a=i),g=y,v=p;s.push(X.newline(g,v,u))}else{var x=e(o);s.push(X.newline(o,x,u))}return s};function Y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var G=Phaser.Utils.Objects.GetValue,D=h.a.NO_WRAP,U=h.a.NO_NEWLINE,V=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e.parent,this.context=G(e,"context",null),this.canvas=this.context.canvas,this.parser=G(e,"parser",null),this.defatultStyle=G(e,"style",null),this.autoRound=!0,this.pensPool=G(e,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new L;var n=this.context;this.getTextWidth=function(t){return n.measureText(t).width}}var e,n,i;return e=t,(n=[{key:"destroy",value:function(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defatultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}},{key:"updatePenManager",value:function(t,e,n,i,r){if(void 0===r&&(r=this.penManager),r.freePens(),""===t)return r;for(var s,o,a,u,l,h=this.canvas,f=this.context,c=0,d=0,p=this.parser.splitText(t),y=0,g=p.length;y<g;y++)if(s=(u=this.parser.tagTextToProp(p[y],o)).plainText,(o=u.prop).img){var v=this.imageManager.getOuterWidth(o.img);n>0&&e!==D&&n<c+v&&(r.addNewLinePen(),d+=i,c=0),r.addImagePen(c,d,v,Object(w.a)(o)),c+=v}else if(""!==s){var k;this.context.save(),(a=this.parser.propToContextStyle(this.defatultStyle,o)).buildFont(),a.syncFont(h,f),a.syncStyle(h,f);for(var x=0,m=(l=H(s,this.getTextWidth,e,n,c)).length;x<m;x++)k=l[x],r.addTextPen(k.text,c,d,k.width,Object(w.a)(o),k.newLineMode),k.newLineMode!==U?(c=0,d+=i):c+=k.width;this.context.restore()}return r}},{key:"newPenManager",value:function(){return new M({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}},{key:"getPlainText",value:function(t,e,n){var i;if(null==t)i=this.penManager.plainText;else{var r=this.parser.splitText(t,1);i="";for(var s=0,o=r.length;s<o;s++)i+=r[s]}return null==e&&null==n||(null==e&&(e=0),null==n&&(n=i.length),i=i.substring(e,n)),i}},{key:"getPenManager",value:function(t,e){if(void 0===t)return this.copyPenManager(e,this.penManager);void 0===e&&(e=this.newPenManager());var n=this.defatultStyle;return this.updatePenManager(t,n.wrapMode,n.wrapWidth,n.lineHeight,e),e}},{key:"getText",value:function(t,e,n,i){if(null==t)return this.penManager.getSliceTagText(e,n,i);var r=this.tmpPenManager,s=this.defatultStyle;return this.updatePenManager(t,s.wrapMode,s.wrapWidth,s.lineHeight,r),r.getSliceTagText(e,n,i)}},{key:"copyPenManager",value:function(t,e){return void 0===e&&(e=this.penManager),e.copy(t)}},{key:"getTextWidth",value:function(t){return void 0===t&&(t=this.penManager),t.getMaxLineWidth()}},{key:"getLastPen",value:function(t){return void 0===t&&(t=this.penManager),t.lastPen}},{key:"startXOffset",get:function(){return this.defatultStyle.strokeThickness/2}},{key:"startYOffset",get:function(){var t=this.defatultStyle;return t.strokeThickness/2+t.metrics.ascent}},{key:"lines",get:function(){return this.penManager.lines}},{key:"desplayLinesCount",get:function(){var t=this.penManager.linesCount,e=this.defatultStyle.maxLines;return e>0&&t>e&&(t=e),t}},{key:"linesWidth",get:function(){return this.penManager.getMaxLineWidth()}},{key:"linesHeight",get:function(){var t=this.desplayLinesCount,e=this.defatultStyle.lineHeight*t;return t>0&&(e-=this.defatultStyle.lineSpacing),e}},{key:"imageManager",get:function(){return this.parent.imageManager}},{key:"tmpPenManager",get:function(){return null===this._tmpPenManager&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}}])&&Y(e.prototype,n),i&&Y(e,i),t}(),J={setInteractive:j};Object.assign(V.prototype,f,J);var q=V;function K(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Q,Z=Phaser.Utils.Objects.GetValue,$=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.textureManager=e,this.images={}}var e,n,i;return e=t,(n=[{key:"add",value:function(t,e){if("string"==typeof t)this._add(t,e);else if(Array.isArray(t))for(var n=0,i=(r=t).length;n<i;n++)this._add(r[n]);else{var r=t;for(var t in r)this._add(t,r[t])}return this}},{key:"_add",value:function(t,e){void 0===e&&(e={key:t});var n=e.key,i=e.frame,r=e.width,s=e.height;if(void 0===r||void 0===s){var o=this.textureManager.getFrame(n,i),a=o?o.cutWidth:0,u=o?o.cutHeight:0;void 0===r&&void 0===s?(r=a,s=u):void 0===r?r=a*(s/u):void 0===s&&(s=u*(r/a))}this.images[t]={key:n,frame:i,width:r,height:s,y:Z(e,"y",0),left:Z(e,"left",0),right:Z(e,"right",0)}}},{key:"remove",value:function(t){return this.images.hasOwnProperty(t)&&delete this.images[t],this}},{key:"get",value:function(t){return this.images.hasOwnProperty(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}},{key:"getOuterWidth",value:function(t){var e=this.get(t);return e?e.width+e.left+e.right:0}},{key:"getFrame",value:function(t){var e=this.get(t);return e?this.textureManager.getFrame(e.key,e.frame):void 0}},{key:"hasTexture",value:function(t){return!!this.getFrame(t)}}])&&K(e.prototype,n),i&&K(e,i),t}();function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var st=Phaser.DOM.AddToDOM,ot=Phaser.Display.Canvas.CanvasPool,at=Phaser.GameObjects.GameObject,ut=Phaser.Utils.Objects.GetValue,lt=Phaser.DOM.RemoveFromDOM,ht=h.a.SPLITREGEXP,ft={},ct=function(t){function e(t,n,i,r,s,o,a){var u,h,f;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===n&&(n=0),void 0===i&&(i=0),h=this,(u=!(f=nt(e).call(this,t,o))||"object"!==tt(f)&&"function"!=typeof f?it(h):f).renderer=t.sys.game.renderer,u.setPosition(n,i),u.setOrigin(0,0),u.initPipeline(),u.canvas=ot.create(it(u)),u.context=u.canvas.getContext("2d"),s&&s.hasOwnProperty("align")){var d=s.align;delete s.align,s.halign=d}return u.style=new l.a(it(u),s),u.autoRound=!0,u._text=void 0,u.padding={left:0,right:0,top:0,bottom:0},u.width=1,u.height=1,u.dirty=!1,0===u.style.resolution&&(u.style.resolution=t.sys.game.config.resolution),u._crop=u.resetCropObject(),u.texture=t.sys.textures.addCanvas(null,u.canvas,!0),u.frame=u.texture.get(),u.frame.source.resolution=u.style.resolution,u.renderer&&u.renderer.gl&&(u.renderer.deleteTexture(u.frame.source.glTexture),u.frame.source.glTexture=null),ft.hasOwnProperty(o)||(ft[o]=new c.a),u.canvasText=new q({parent:it(u),context:u.context,parser:a,style:u.style,pensPool:ft[o]}),s&&s.padding&&u.setPadding(s.padding),u.setText(r),t.sys.game.events.on("contextrestored",function(){this.dirty=!0},it(u)),u}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(e,at),n=e,(i=[{key:"initRTL",value:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",st(this.canvas,this.scene.sys.canvas),this.originX=1)}},{key:"setText",value:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this}},{key:"setStyle",value:function(t){return this.style.setStyle(t)}},{key:"setFont",value:function(t){return this.style.setFont(t)}},{key:"setFontFamily",value:function(t){return this.style.setFontFamily(t)}},{key:"setFontSize",value:function(t){return this.style.setFontSize(t)}},{key:"setFontStyle",value:function(t){return this.style.setFontStyle(t)}},{key:"setFixedSize",value:function(t,e){return this.style.setFixedSize(t,e)}},{key:"setBackgroundColor",value:function(t){return this.style.setBackgroundColor(t)}},{key:"setFill",value:function(t){return this.style.setFill(t)}},{key:"setColor",value:function(t){return this.style.setColor(t)}},{key:"setStroke",value:function(t,e){return this.style.setStroke(t,e)}},{key:"setShadow",value:function(t,e,n,i,r,s){return this.style.setShadow(t,e,n,i,r,s)}},{key:"setShadowOffset",value:function(t,e){return this.style.setShadowOffset(t,e)}},{key:"setShadowColor",value:function(t){return this.style.setShadowColor(t)}},{key:"setShadowBlur",value:function(t){return this.style.setShadowBlur(t)}},{key:"setShadowStroke",value:function(t){return this.style.setShadowStroke(t)}},{key:"setShadowFill",value:function(t){return this.style.setShadowFill(t)}},{key:"setWrapMode",value:function(t){return this.style.setWrapMode(t)}},{key:"setWrapWidth",value:function(t){return this.style.setWrapWidth(t)}},{key:"setAlign",value:function(t){return this.style.setHAlign(t)}},{key:"setLineSpacing",value:function(t){return this.style.setLineSpacing(t)}},{key:"setPadding",value:function(t,e,n,i){if("object"===tt(t)){var r=t,s=ut(r,"x",null);null!==s?(t=s,n=s):(t=ut(r,"left",0),n=ut(r,"right",t));var o=ut(r,"y",null);null!==o?(e=o,i=o):(e=ut(r,"top",0),i=ut(r,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=t),void 0===i&&(i=e);return this.padding.left=t,this.padding.top=e,this.padding.right=n,this.padding.bottom=i,this.updateText(!1)}},{key:"setResolution",value:function(t){return this.style.setResolution(t)}},{key:"setMaxLines",value:function(t){return this.style.setMaxLines(t)}},{key:"updateText",value:function(t){void 0===t&&(t=!0);var e=this.canvasText,n=this.style;t&&e.updatePenManager(this._text,n.wrapMode,n.wrapWidth,n.lineHeight);var i,r,s=this.padding;0===n.fixedWidth?(this.width=e.linesWidth+s.left+s.right,i=e.linesWidth):(this.width=n.fixedWidth,(i=this.width-s.left-s.right)<e.linesWidth&&(i=e.linesWidth)),0===n.fixedHeight?(this.height=e.linesHeight+s.top+s.bottom,r=e.linesHeight):(this.height=n.fixedHeight,(r=this.height-s.top-s.bottom)<e.linesHeight&&(r=e.linesHeight));var o=this.width,a=this.height;this.updateDisplayOrigin();var u=n.resolution;o*=u,a*=u,o=Math.max(Math.ceil(o),1),a=Math.max(Math.ceil(a),1);var l=this.canvas,h=this.context;l.width!==o||l.height!==a?(l.width=o,l.height=a,this.frame.setSize(o,a)):h.clearRect(0,0,o,a),h.save(),h.scale(u,u),e.draw(s.left,s.top,i,r),h.restore(),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(l,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=this.width,f.hitArea.height=this.height),this}},{key:"getTextMetrics",value:function(){return this.style.getTextMetrics()}},{key:"toJSON",value:function(){var t=dt.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t}},{key:"preDestroy",value:function(){this.style.rtl&&lt(this.canvas),ot.remove(this.canvas),this.canvasText.destroy()}},{key:"setInteractive",value:function(t,e,n){return at.prototype.setInteractive.call(this,t,e,n),this.canvasText.setInteractive(),this}},{key:"getWrappedText",value:function(t,e,n){return(t=this.canvasText.getText(t,e,n,!0)).split(ht)}},{key:"getPlainText",value:function(t,e,n){return this.canvasText.getPlainText(t,e,n)}},{key:"getText",value:function(t,e,n){return this.canvasText.getText(t,e,n,!1)}},{key:"getSubString",value:function(t,e,n){return this.getText(t,e,n)}},{key:"copyPenManager",value:function(t){return this.canvasText.copyPenManager(t)}},{key:"getPenManager",value:function(t,e){return this.canvasText.getPenManager(t,e)}},{key:"setSize",value:function(t,e){return this.setFixedSize(t,e)}},{key:"resize",value:function(t,e){return this.setFixedSize(t,e)}},{key:"addImage",value:function(t,e){return this.imageManager.add(t,e),this}},{key:"drawAreaBounds",value:function(t,e){return this.canvasText.hitAreaManager.drawBounds(t,e,this),this}},{key:"text",set:function(t){this.setText(t)},get:function(){return this._text}},{key:"lineSpacing",set:function(t){this.setLineSpacing(t)},get:function(){return this.style.lineSpacing}},{key:"imageManager",get:function(){return t=this.scene.textures,void 0===Q&&(Q=new $(t)),Q;var t}}])&&et(n.prototype,i),r&&et(n,r),e}(),dt=Phaser.GameObjects.Components;Phaser.Class.mixin(ct,[dt.Alpha,dt.BlendMode,dt.ComputedSize,dt.Crop,dt.Depth,dt.Flip,dt.GetBounds,dt.Mask,dt.Origin,dt.Pipeline,dt.ScrollFactor,dt.Tint,dt.Transform,dt.Visible,u]);e.a=ct},6:function(t,e,n){"use strict";e.a=function(t){if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e]}},60:function(t,e){var n=Phaser.Renderer.WebGL.Utils;t.exports=function(t,e,i,r,s){if(0!==e.width&&0!==e.height){var o=e.frame,a=o.width,u=o.height,l=n.getTintAppendFloatAlpha;this.pipeline.batchTexture(e,o.glTexture,a,u,e.x,e.y,a/e.style.resolution,u/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,u,l(e._tintTL,r.alpha*e._alphaTL),l(e._tintTR,r.alpha*e._alphaTR),l(e._tintBL,r.alpha*e._alphaBL),l(e._tintBR,r.alpha*e._alphaBR),e._isTinted&&e.tintFill,0,0,r,s)}}},61:function(t,e){t.exports=function(t,e,n,i,r){0!==e.width&&0!==e.height&&t.batchSprite(e,e.frame,i,r)}},9:function(t,e,n){"use strict";e.a=function(){}}}).default});