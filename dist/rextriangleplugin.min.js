!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).rextriangleplugin=i()}(void 0,function(){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function t(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&e(t,i)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t,i){return(e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}function s(t,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,i=a(n);if(r){var e=a(this).constructor;t=Reflect.construct(i,arguments,e)}else t=i.apply(this,arguments);return s(this,t)}}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,i,e){var n=function(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=a(t)););return t}(t,i);if(n){var r=Object.getOwnPropertyDescriptor(n,i);return r.get?r.get.call(arguments.length<3?t:e):r.value}}).apply(this,arguments)}function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return c(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function i(t){if("object"!==o(t)||null===t)return t;if(Array.isArray(t))t.length=0;else for(var i in t)delete t[i];return t}var d=Phaser.GameObjects.GetCalcMatrix,f=Phaser.Renderer.Canvas.SetTransform,p={renderWebGL:function(t,i,e,n){i.updateData(),e.addToRenderList(i);var r=t.pipelines.set(i.pipeline),a=d(i,e,n),s=r.calcMatrix.copyFrom(a.calc),h=i._displayOriginX,o=i._displayOriginY,l=e.alpha*i.alpha;t.pipelines.preBatch(i);for(var u=i.geom,c=0,f=u.length;c<f;c++)u[c].webglRender(r,s,l,h,o);t.pipelines.postBatch(i)},renderCanvas:function(t,i,e,n){i.updateData(),e.addToRenderList(i);var r=t.currentContext;if(f(t,r,i,e,n)){for(var a=i._displayOriginX,s=i._displayOriginY,h=i.geom,o=0,l=h.length;o<l;o++)h[o].canvasRender(r,a,s);r.restore()}}},v=Phaser.GameObjects.Shape,y=Phaser.Utils.Array.Remove,b=function(){t(h,v);var s=l(h);function h(t,i,e,n,r){var a;return g(this,h),void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=2),void 0===r&&(r=n),(a=s.call(this,t,"rexShapes",[]))._width=-1,a._height=-1,a.dirty=!0,a.isSizeChanged=!0,a.shapes={},a.setPosition(i,e),a.setSize(n,r),a.updateDisplayOrigin(),a}return r(h,[{key:"width",get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},{key:"height",get:function(){return this._height},set:function(t){this.setSize(this._width,t)}},{key:"setDirty",value:function(t){return void 0===t&&(t=!0),this.dirty=t,this}},{key:"setSize",value:function(t,i){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==i,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=i,this.updateDisplayOrigin();var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=t,e.hitArea.height=i),this}},{key:"resize",value:function(t,i){return this.setSize(t,i),this}},{key:"fillColor",get:function(){return this._fillColor},set:function(t){this.setFillStyle(t,this._fillAlpha)}},{key:"fillAlpha",get:function(){return this._fillAlpha},set:function(t){this.setFillStyle(this._fillColor,t)}},{key:"setFillStyle",value:function(t,i){return void 0===i&&(i=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==i,this._fillColor=t,this._fillAlpha=i,this}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}},{key:"strokeAlpha",get:function(){return this._strokeAlpha},set:function(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}},{key:"setStrokeStyle",value:function(t,i,e){return void 0===e&&(e=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==i||this.strokeAlpha!==e,this._lineWidth=t,this._strokeColor=i,this._strokeAlpha=e,this}},{key:"updateShapes",value:function(){}},{key:"updateData",value:function(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,i=0,e=t.length;i<e;i++){var n=t[i];n.dirty&&n.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}},{key:"clear",value:function(){return this.geom.length=0,i(this.shapes),this}},{key:"getShape",value:function(t){return this.shapes[t]}},{key:"getShapes",value:function(){return this.geom}},{key:"addShape",value:function(t){this.geom.push(t);var i=t.name;return i&&(this.shapes[i]=t),this.dirty=!0,this}},{key:"deleteShape",value:function(t){var i=this.getShape(t);return i&&(delete this.shapes[t],y(this.geom,i)),this}}]),h}();Object.assign(b.prototype,p);var P={fillStyle:function(t,i){return null==t?this.isFilled=!1:(void 0===i&&(i=1),this.isFilled=!0,this.fillColor=t,this.fillAlpha=i),this},lineStyle:function(t,i,e){return null==t||null==i?this.isStroked=!1:(void 0===e&&(e=1),this.isStroked=!0,this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=e),this}},k={enableData:function(){return void 0===this.data&&(this.data={}),this},setData:function(t,i){if(this.enableData(),1===arguments.length){var e=t;for(t in e)this.data[t]=e[t]}else this.data[t]=i;return this},getData:function(t,i){return this.enableData(),void 0===t?this.data:function(t,i,e){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1===i.indexOf("."))return e;for(var n=i.split("."),r=t,a=e,s=0;s<n.length;s++){if(!r.hasOwnProperty(n[s])){a=e;break}a=r[n[s]],r=r[n[s]]}return a}return e}(this.data,t,i)},incData:function(t,i,e){return void 0===e&&(e=0),this.enableData(),this.setData(t,this.getData(t,e)+i),this},mulData:function(t,i,e){return void 0===e&&(e=0),this.enableData(),this.setData(t,this.getData(t,e)*i),this},clearData:function(){return this.data&&i(this.data),this}},D=function(){function t(){g(this,t),this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}return r(t,[{key:"setName",value:function(t){return this.name=t,this}},{key:"reset",value:function(){return this.fillStyle().lineStyle(),this}},{key:"webglRender",value:function(){}},{key:"canvasRender",value:function(){}},{key:"updateData",value:function(){this.dirty=!1}}]),t}();Object.assign(D.prototype,P,k);function m(t,i,e){var n=e.length;if(2<=n){var r=e[n-2],a=e[n-1];if(t===r&&i===a)return e}return e.push(t,i),e}var C=Phaser.Renderer.WebGL.Utils,S=Phaser.Renderer.WebGL.Utils,A=Phaser.Geom.Polygon.Earcut,T=function(){t(e,D);var i=l(e);function e(){var t;return g(this,e),(t=i.call(this)).pathData=[],t.pathIndexes=[],t.closePath=!1,t}return r(e,[{key:"updateData",value:function(){return this.pathIndexes=A(this.pathData),h(a(e.prototype),"updateData",this).call(this),this}},{key:"webglRender",value:function(t,i,e,n,r){this.isFilled&&function(t,i,e,n,r,a){for(var s=C.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*n),h=e.pathData,o=e.pathIndexes,l=0;l<o.length;l+=3){var u=2*o[l],c=2*o[l+1],f=2*o[l+2],d=h[0+u]-r,p=h[1+u]-a,v=h[0+c]-r,y=h[1+c]-a,g=h[0+f]-r,b=h[1+f]-a,P=i.getX(d,p),k=i.getY(d,p),D=i.getX(v,y),m=i.getY(v,y),S=i.getX(g,b),A=i.getY(g,b);t.batchTri(e,P,k,D,m,S,A,0,0,1,1,s,s,s,2)}}(t,i,this,e,n,r),this.isStroked&&function(t,i,e,n,r){var a=t.strokeTint,s=S.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*e);a.TL=s,a.TR=s,a.BL=s,a.BR=s;var h=i.pathData,o=h.length-1,l=i.lineWidth,u=l/2,c=h[0]-n,f=h[1]-r;i.closePath||(o-=2);for(var d=2;d<o;d+=2){var p=h[d]-n,v=h[d+1]-r;t.batchLine(c,f,p,v,u,u,l,d-2,!!i.closePath&&d===o-1),c=p,f=v}}(t,this,e,n,r)}},{key:"canvasRender",value:function(t,i,e){var n,r,a,s,h,o,l,u,c,f,d,p,v,y,g,b,P,k,D=this.pathData,m=D.length-1,S=D[0]-i,A=D[1]-e;t.beginPath(),t.moveTo(S,A),this.closePath||(m-=2);for(var C=2;C<m;C+=2){var T=D[C]-i,_=D[C+1]-e;t.lineTo(T,_)}this.closePath&&t.closePath(),this.isFilled&&(n=t,r=this,h=a||r.fillColor,o=s||r.fillAlpha,l=(16711680&h)>>>16,u=(65280&h)>>>8,c=255&h,n.fillStyle="rgba("+l+","+u+","+c+","+o+")",t.fill()),this.isStroked&&(f=t,d=this,y=p||d.strokeColor,g=v||d.strokeAlpha,b=(16711680&y)>>>16,P=(65280&y)>>>8,k=255&y,f.strokeStyle="rgba("+b+","+P+","+k+","+g+")",f.lineWidth=d.lineWidth,t.stroke())}}]),e}(),_=Phaser.Math.DegToRad;Phaser.Math.DegToRad;function R(t,i,e,n,r,a){for(var s=a.length,h=a[s-2],o=a[s-1],l=1,u=r-1;l<=u;l++){var c=l/u;a.push(w(c,h,t,e),w(c,o,i,n))}return a}function O(t){var i=t.length;if(i<2)return t;var e=t[i-2],n=t[i-1];return t.push(e),t.push(n),t}function x(t,i,e,n,r){if(void 0===n&&(n=e,e=0),(e=U(e))!==(n=U(n))){var a=i[i.length-1],s=a*e,h=a*n;e<n?G(t,i,s,h,r):(G(t,i,s,a,r),G(t,i,0,h,r)),O(r)}}var w=Phaser.Math.Interpolation.QuadraticBezier,j={clear:function(){return this.start(),this},start:function(){return this.startAt(),this},startAt:function(t,i){var e,n,r;return this.restorePathData(),this.accumulationLengths=void 0,e=t,n=i,(r=this.pathData).length=0,null!=e&&r.push(e,n),this.firstPointX=t,this.firstPointY=i,this.lastPointX=t,this.lastPointY=i,this},lineTo:function(t,i,e){return void 0===e&&(e=!1),e&&(t+=this.lastPointX,i+=this.lastPointY),m(t,i,this.pathData),this.lastPointX=t,this.lastPointY=i,this},verticalLineTo:function(t,i){return this.lineTo(t,this.lastPointY,i),this},horizontalLineTo:function(t,i){return this.lineTo(this.lastPointX,t,i),this},ellipticalArc:function(t,i,e,n,r,a,s){return void 0===s&&(s=!1),function(t,i,e,n,r,a,s,h,o){s&&r<a?a-=360:!s&&a<r&&(a+=360);var l=_(a-r)/h;r=_(r);for(var u=0;u<=h;u++){var c=r+l*u,f=t+e*Math.cos(c),d=i+n*Math.sin(c);m(f,d,o)}}(t,i,e,n,r,a,s,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc:function(t,i,e,n,r,a){return this.ellipticalArc(t,i,e,e,n,r,a),this},quadraticBezierTo:function(t,i,e,n){return R(t,i,e,n,this.iterations,this.pathData),this.lastPointX=e,this.lastPointY=n,this.lastCX=t,this.lastCY=i,this},smoothQuadraticBezierTo:function(t,i){var e=2*this.lastPointX-this.lastCX,n=2*this.lastPointY-this.lastCY;return this.quadraticBezierTo(e,n,t,i),this},cubicBezierCurveTo:function(t,i,e,n,r,a){return R(t,i,e,n,r,a,this.iterations,this.pathData),this.lastPointX=r,this.lastPointY=a,this.lastCX=e,this.lastCY=n,this},smoothCubicBezierCurveTo:function(t,i,e,n){var r=2*this.lastPointX-this.lastCX,a=2*this.lastPointY-this.lastCY;return this.cubicBezierCurveTo(r,a,t,i,e,n),this},close:function(){return this.closePath=!0,this},end:function(){return O(this.pathData),this}},X=Phaser.Math.RotateAround,Y=Phaser.Math.DegToRad,L=Phaser.Math.RotateAround,z={rotateAround:function(t,i,e){if(0===this.pathData.length)return this;!function(t,i,e,n){for(var r={x:0,y:0},a=0,s=n.length-1;a<s;a+=2)r.x=n[a],r.y=n[a+1],X(r,t,i,e),n[a]=r.x,n[a+1]=r.y}(t,i,e=Y(e),this.pathData);var n=this.pathData.length;if(this.lastPointX=this.pathData[n-2],this.lastPointY=this.pathData[n-1],void 0!==this.lastCX){var r={x:this.lastCX,y:this.lastCY};L(r,t,i,e),this.lastCX=r.x,this.lastCY=r.y}return this},scale:function(t,i,e,n){if(0===this.pathData.length)return this;if(!function(t,i,e,n,r){for(var a=0,s=r.length-1;a<s;a+=2){var h=r[a]-t,o=r[a+1]-i;h*=e,o*=n,r[a]=h+t,r[a+1]=o+i}}(t,i,e,n,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],void 0!==this.lastCX){var r=this.lastCX-t,a=this.lastCY-i;r*=e,a*=n,this.lastCX=r+t,this.lastCY=a+i}return this},offset:function(t,i){return function(t,i,e){for(var n=0,r=e.length-1;n<r;n+=2)e[n]+=t,e[n+1]+=i}(t,i,this.pathData),this}},M={savePathData:function(){return this.pathDataSaved||(this.pathDataSave=u(this.pathData),this.pathData.length=0,this.pathDataSaved=!0),this},restorePathData:function(){return this.pathDataSaved&&(function(t,i,e,n){void 0===e&&(e=0),void 0===n&&(n=i.length),t.length=n-e;for(var r=0,a=t.length;r<a;r++)t[r]=i[r+e]}(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1),this}},B=Phaser.Math.Distance.Between,W=Phaser.Math.Wrap,F=Phaser.Math.Linear,G=function(t,i,e,n,r){for(var a=0<e,s=0,h=i.length;s<h;s++){var o=2*s,l=i[s];if(a){if(l<e)continue;if(l==e)a=!1;else{var u=1-(l-e)/(l-i[s-1]);r.push(I(t,o-2,o,u)),r.push(I(t,o-1,1+o,u)),a=!1}}if(!(l<=n)){u=1-(l-n)/(l-i[s-1]);r.push(I(t,o-2,o,u)),r.push(I(t,o-1,1+o,u));break}if(r.push(t[o]),r.push(t[1+o]),l===n)break}},I=function(t,i,e,n){var r=t[i],a=t[e];return F(r,a,n)},U=function(t){return 0===t?0:t%1==0?1:W(t,0,1)},E={updateAccumulationLengths:function(){if(null==this.accumulationLengths)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var t,i,e,n,r=this.accumulationLengths,a=this.pathData,s=0,h=0,o=a.length;h<o;h+=2)e=a[h],n=a[h+1],s+=void 0===t?0:B(t,i,e,n),r.push(s),t=e,i=n;return this.totalPathLength=s,this},setDisplayPathSegment:function(t,i){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,x(this.pathDataSave,this.accumulationLengths,t,i,this.pathData),this},appendFromPathSegment:function(t,i,e){var n;void 0===i?(n=this.pathData).push.apply(n,u(t.pathData)):(t.updateAccumulationLengths(),x(t.pathData,t.accumulationLengths,i,e,this.pathData));return this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},q=Phaser.Geom.Polygon,Q=function(){function i(t){g(this,i),void 0===t&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}return r(i,[{key:"setIterations",value:function(t){return this.iterations=t,this}},{key:"toPoints",value:function(){return function(t,i){void 0===i&&(i=[]);for(var e=0,n=t.length-1;e<n;e+=2)i.push({x:t[e],y:t[e+1]});return i}(this.pathData)}},{key:"toPolygon",value:function(t){return i=this.pathData,void 0===(e=t)&&(e=new q),e.setTo(i),e;var i,e}}]),i}();Object.assign(Q.prototype,j,z,M,E,{draw:function(t,i,e){var n=this.toPoints();return i&&t.fillPoints(n,this.closePath,this.closePath),e&&t.strokePoints(n,this.closePath,this.closePath),this}});var V=function(){t(e,T);var i=l(e);function e(){var t;return g(this,e),(t=i.call(this)).builder=new Q(t.pathData),t}return r(e,[{key:"iterations",get:function(){return this.builder.iterations},set:function(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}},{key:"setIterations",value:function(t){return this.iterations=t,this}},{key:"lastPointX",get:function(){return this.builder.lastPointX}},{key:"lastPointY",get:function(){return this.builder.lastPointY}},{key:"start",value:function(){return this.builder.start(),this.dirty=!0,this}},{key:"startAt",value:function(t,i){return this.builder.startAt(t,i),this.dirty=!0,this}},{key:"lineTo",value:function(t,i,e){return this.builder.lineTo(t,i,e),this.dirty=!0,this}},{key:"verticalLineTo",value:function(t,i){return this.builder.verticalLineTo(t,i),this.dirty=!0,this}},{key:"horizontalLineTo",value:function(t,i){return this.builder.horizontalLineTo(t,i),this.dirty=!0,this}},{key:"ellipticalArc",value:function(t,i,e,n,r,a,s){return this.builder.ellipticalArc(t,i,e,n,r,a,s),this.dirty=!0,this}},{key:"arc",value:function(t,i,e,n,r,a){return this.builder.arc(t,i,e,n,r,a),this.dirty=!0,this}},{key:"quadraticBezierTo",value:function(t,i,e,n){return this.builder.quadraticBezierTo(t,i,e,n),this.dirty=!0,this}},{key:"smoothQuadraticBezierTo",value:function(t,i){return this.builder.smoothQuadraticBezierTo(t,i),this.dirty=!0,this}},{key:"cubicBezierCurveTo",value:function(t,i,e,n,r,a){return this.builder.cubicBezierCurveTo(t,i,e,n,r,a),this.dirty=!0,this}},{key:"smoothCubicBezierCurveTo",value:function(t,i,e,n){return this.builder.smoothCubicBezierCurveTo(t,i,e,n),this.dirty=!0,this}},{key:"close",value:function(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}},{key:"end",value:function(){return this.builder.end(),this.dirty=!0,this}},{key:"rotateAround",value:function(t,i,e){return this.builder.rotateAround(t,i,e),this.dirty=!0,this}},{key:"scale",value:function(t,i,e,n){return this.builder.scale(t,i,e,n),this.dirty=!0,this}},{key:"offset",value:function(t,i){return this.builder.offset(t,i),this.dirty=!0,this}},{key:"toPolygon",value:function(t){return this.builder.toPolygon(t)}},{key:"appendPathFrom",value:function(t,i,e){return this.builder.appendFromPathSegment(t.builder,i,e),this}},{key:"copyPathFrom",value:function(t,i,e){return this.builder.clear().appendFromPathSegment(t.builder,i,e),this}},{key:"setDisplayPathSegment",value:function(t,i){return this.builder.setDisplayPathSegment(t,i),this}}]),e}();Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,Phaser.Utils.Objects.GetValue,Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var N=(0,Phaser.Math.DegToRad)(120),H=Phaser.Math.Wrap,$=Phaser.Math.Linear,J={buildShapes:function(){this.addShape((new V).setName("triangle"))},updateShapes:function(){var t=this.width,i=0,e=this.height,n=0,r=t/2,a=e/2,s=this.getShape("triangle").fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha);if(0===this.shapeMode){var h=this.padding;t-=h.right,i+=h.left,e-=h.bottom;var o={0:{a:{x:i,y:n+=h.top},b:{x:i,y:e},c:{x:t,y:a}},1:{a:{x:t,y:n},b:{x:i,y:n},c:{x:r,y:e}},2:{a:{x:t,y:e},b:{x:t,y:n},c:{x:i,y:a}},3:{a:{x:i,y:e},b:{x:t,y:e},c:{x:r,y:n}}},l=H(this.verticeAngle/90,0,4),u=Math.floor(l),c=l-u,f=o[u],d=o[(u+1)%4],p=$(f.a.x,d.a.x,c),v=$(f.a.y,d.a.y,c),y=$(f.b.x,d.b.x,c),g=$(f.b.y,d.b.y,c),b=$(f.c.x,d.c.x,c),P=$(f.c.y,d.c.y,c);s.startAt(p,v).lineTo(y,g).lineTo(b,P).close()}else{var k=Math.min(r,a)*this.radius,D=this.verticeRotation;s.startAt(r+k*Math.cos(D),a+k*Math.sin(D)).lineTo(r+k*Math.cos(D+N),a+k*Math.sin(D+N)).lineTo(r+k*Math.cos(D-N),a+k*Math.sin(D-N)).close()}}},K=Phaser.Utils.Objects.GetValue,Z=Phaser.Utils.Objects.IsPlainObject,tt=Phaser.Math.DegToRad,it=Phaser.Math.RadToDeg,et=function(){t(y,b);var v=l(y);function y(t,i,e,n,r,a,s){var h,o,l,u,c,f,d;if(g(this,y),Z(i)){var p=i;i=p.x,e=p.y,n=p.width,r=p.height,a=p.color,s=p.alpha,o=p.strokeColor,l=p.strokeAlpha,u=p.strokeWidth,c=p.direction,f=p.padding,d=p.radius}return void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=n),void 0===c&&(c=0),void 0===f&&(f=0),void 0===d&&(d=void 0),(h=v.call(this,t,i,e,n,r)).type="rexTriangle",h.setFillStyle(a,s),void 0!==o&&void 0===u&&(u=2),h.setStrokeStyle(u,o,l),h.setDirection(c),h.setPadding(f),h.setRadius(d),h.buildShapes(),h}return r(y,[{key:"verticeRotation",get:function(){return this._verticeRotation},set:function(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}},{key:"setVerticeRotation",value:function(t){return this.verticeRotation=t,this}},{key:"verticeAngle",get:function(){return it(this.verticeRotation)},set:function(t){this.verticeRotation=tt(t)}},{key:"setVerticeAngle",value:function(t){return this.verticeAngle=t,this}},{key:"direction",get:function(){return this._direction},set:function(t){"string"==typeof t&&(t=nt[t]),t%=4,this._direction=t,this.verticeAngle=90*t}},{key:"setDirection",value:function(t){return this.direction=t,this}},{key:"setPadding",value:function(t,i,e,n){if("object"===o(t)){var r=t,a=K(r,"x",null);e=null!==a?t=a:(t=K(r,"left",0),K(r,"right",t));var s=K(r,"y",null);n=null!==s?i=s:(i=K(r,"top",0),K(r,"bottom",i))}else void 0===t&&(t=0),void 0===i&&(i=t),void 0===e&&(e=t),void 0===n&&(n=i);return void 0===this.padding&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=i||this.padding.right!=e||this.padding.bottom!=n,this.padding.left=t,this.padding.top=i,this.padding.right=e,this.padding.bottom=n,this.setRadius(),this}},{key:"radius",get:function(){return this._radius},set:function(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}},{key:"setRadius",value:function(t){return this.radius=t,this.shapeMode=null==t?0:1,this}}]),y}(),nt={right:0,down:1,left:2,up:3};function rt(t,i,e,n,r,a){var s=new et(this.scene,t,i,e,n,r,a);return this.scene.add.existing(s),s}Object.assign(et.prototype,J);var at=Phaser.GameObjects.BuildGameObject;function st(t,i){void 0===t&&(t={}),void 0!==i&&(t.add=i);var e=new et(this.scene,t);return at(this.scene,e,t),e}function ht(t){return null==t||""===t||0===t.length}var ot=function(){t(n,Phaser.Plugins.BasePlugin);var e=l(n);function n(t){var i;return g(this,n),i=e.call(this,t),t.registerGameObject("rexTriangle",rt,st),i}return r(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}}]),n}();return function(t,i,e,n){if(void 0===n&&(n="."),"object"===o(t)){if(ht(i)){if(null==e)return;"object"===o(e)&&(t=e)}else{"string"==typeof i&&(i=i.split(n));var r=i.pop();(function(t,i,e){var n=t;if(!ht(i)){var r;"string"==typeof i&&(i=i.split("."));for(var a=0,s=i.length;a<s;a++){var h;if(null==n[r=i[a]]||"object"!==o(n[r]))h=a!==s-1||void 0===e?{}:e,n[r]=h;n=n[r]}}return n})(t,i)[r]=e}}}(window,"RexPlugins.GameObjects.Triangle",et),ot});
