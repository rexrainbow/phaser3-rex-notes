var e,t;e=void 0,t=function(){var e={setEventEmitter(e,t){return void 0===t&&(t=Phaser.Events.EventEmitter),this._privateEE=!0===e||void 0===e,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},t={hasProperty(e){var t=this.gameObject;return!!t.hasOwnProperty(e)||void 0!==t[e]},getProperty(e){return this.gameObject[e]},setProperty(e,t){return this.gameObject[e]=t,this},easeProperty(e){var t=e.property,r=e.value,i=e.duration,n=e.delay,o=e.ease,a=e.repeat,s=e.yoyo,c=e.from,f=e.complete,u=e.target;if(void 0===i&&(i=1e3),void 0===n&&(n=0),void 0===o&&(o="Linear"),void 0===a&&(a=0),void 0===s&&(s=!1),void 0===u&&(u=this.gameObject),c){var l=r;r=u[t],u[t]=l}return(e={targets:u,duration:i,delay:n,ease:o,repeat:a,yoyo:s,onComplete:f})[t]=r,this.addTweenTask(t,e),this},addTweenTask(e,t){var r=this.tweens,i=r[e];i&&i.remove();var n=t.onComplete;return t.onComplete=function(){r[e].remove(),r[e]=null,n&&n(t.targets,e)},(i=this.scene.tweens.add(t)).timeScale=this.timeScale,r[e]=i,this},getTweenTask(e){return this.tweens[e]},freeTweens(){var e,t=this.tweens;for(var r in t)(e=t[r])&&e.remove(),t[r]=null;return this}},r={hasMethod(e){return"function"==typeof this.gameObject[e]},call(e,...t){if(!this.hasMethod(e))return console.warn(`[GameObjectManager] Game object '${this.name}' does not have method '${e}'`),this;var r=this.gameObject;return r[e].apply(r,t),this}},i={hasData(e){var t=this.gameObject;return!!t.data&&t.data.has(e)},getData(e){return this.gameObject.getData(e)},setData(e,t){return this.gameObject.setData(e,t),this}};class n{constructor(e,t,r){this.GOManager=e,this.tweens={},this.effects={},this.setGO(t,r)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.bob=void 0,this.gameObject.destroy(),this.gameObject=void 0,this}setGO(e,t){return e.goName=t,e.goType=this.GOManager.name,e.bob=this,this.gameObject=e,this.name=t,this.freeTweens(),this}setTimeScale(e){var t=this.tweens;for(var r in t){var i=t[r];i&&(i.timeScale=e)}return this}}Object.assign(n.prototype,t,r,i);var o=function(e){return e&&"!"!==e.charAt(0)},a={has(e){return this.bobs.hasOwnProperty(e)},exists(e){return this.bobs.hasOwnProperty(e)},get(e,t){if(o(e))return this.bobs[e];for(var r in void 0===t&&(t=[]),e&&(e=e.substring(1)),this.bobs)e&&r===e||t.push(this.bobs[r]);return t},getFitst(e){for(var t in e&&"!"===e.charAt(0)&&(e=e.substring(1)),this.bobs)if(!e||e!==t)return this.bobs[t];return null},getGO(e,t){var r=this.get(e);return r?Array.isArray(r)?(void 0===t&&(t=[]),r.forEach((function(e){t.push(e.gameObject)})),t):r.gameObject:null},forEachGO(e,t){for(var r in this.bobs){var i=this.bobs[r].gameObject;if(t?e.call(t,i,r,this):e(i,r,this))break}return this},getAllGO(e){for(var t in void 0===e&&(e=[]),this.bobs){var r=this.bobs[t].gameObject;e.push(r)}return e}},s=function(e){return e>>16&255},c=function(e){return e>>8&255},f=function(e){return 255&e};const u=Phaser.Events.EventEmitter;var l=function(e,t,r,i,n,o){return void 0===o?o={}:!0===o&&(o=h),"number"!=typeof r&&(r=0,i=0),o.x=n.x+n.width*e+r,o.y=n.y+n.height*t+i,o},h={},d=function(e,t,r,i,n,o,a){if(e.hasOwnProperty("vp"))return e;"function"==typeof r&&(a=r,r=void 0),"function"==typeof n&&(a=n,n=void 0),void 0===r&&(r=.5),void 0===i&&(i=.5),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=l),function(e){if(e.events)return e;var t=new u,r=e.x;Object.defineProperty(e,"x",{get:function(){return r},set:function(i){r!==i&&(r=i,t.emit("update",e))}});var i=e.y;Object.defineProperty(e,"y",{get:function(){return i},set:function(r){i!==r&&(i=r,t.emit("update",e))}});var n=e.width;Object.defineProperty(e,"width",{get:function(){return n},set:function(r){n!==r&&(n=r,t.emit("update",e))}});var o=e.height;Object.defineProperty(e,"height",{get:function(){return o},set:function(r){o!==r&&(o=r,t.emit("update",e))}}),e.events=t}(t);var s=t.events;e.vp=t;var c=function(){a(r,i,n,o,t,e)};s.on("update",c),e.once("destroy",(function(){s.off("update",c),e.vp=void 0})),Object.defineProperty(e,"vpx",{get:function(){return r},set:function(e){r!==e&&(r=e,c())}}),Object.defineProperty(e,"vpy",{get:function(){return i},set:function(e){i!==e&&(i=e,c())}}),Object.defineProperty(e,"vpxOffset",{get:function(){return n},set:function(e){n!==e&&(n=e,c())}}),Object.defineProperty(e,"vpyOffset",{get:function(){return o},set:function(e){o!==e&&(o=e,c())}}),c()},v=function(e,t){if(!e)return!1;if(e.hasOwnProperty(t))return!0;for(;e;){if(Object.getOwnPropertyDescriptor(e,t))return!0;e=e.__proto__}return!1},p=function(e){return e.preFX?e.preFX:e.postFX?e.postFX:null},g=function(e,t){e._effectSwitchNames||(e._effectSwitchNames=[],e.clearAllEffects=function(){for(var t=e._effectSwitchNames,r=0,i=t.length;r<i;r++)e[t[r]]=null;return e},e.on("destroy",e.clearAllEffects,e)),e._effectSwitchNames.push(t)},y=function(e,t,r){if(v(e,t))return e;var i=p(e);if(!i)return e;var n,o=`_${t}Effect`;return Object.defineProperty(e,t,{get:function(){return n},set:function(a){n!==a&&(null===(n=a)||!1===n?e[o]&&(i.remove(e[o]),e[o]=void 0):(e[o]||(e[o]=i.addColorMatrix()),e[o][t](1===r?a:void 0)))}}),e[t]=null,g(e,t),e};const b={barrel:function(e){if(v(e,"barrel"))return e;var t,r=p(e);return r?(Object.defineProperty(e,"barrel",{get:function(){return t},set:function(i){t!==i&&(null===(t=i)||!1===t?e._barrelEffect&&(r.remove(e._barrelEffect),e._barrelEffect=void 0):(e._barrelEffect||(e._barrelEffect=r.addBarrel()),e._barrelEffect.amount=t))}}),e.barrel=null,g(e,"barrel"),e):e},blackWhite:function(e){return y(e,"blackWhite"),e},bloom:function(e){if(v(e,"bloomColor"))return e;var t=p(e);if(!t)return e;var r,i=1,n=1,o=1,a=1,s=4;return Object.defineProperty(e,"bloomColor",{get:function(){return r},set:function(c){r!==c&&(null===(r=c)||!1===r?e._bloom&&(t.remove(e._bloom),e._bloom=void 0,t.setPadding(0)):(e._bloom||(e._bloom=t.addBloom(r,i,n,o,a,s),t.setPadding(Math.max(i,n)+1)),e._bloom.color=r))}}),Object.defineProperty(e,"bloomOffsetX",{get:function(){return i},set:function(r){if(i!==r&&(i=r,e._bloom)){var o=Math.max(i,n);t.setPadding(o+1),e._bloom.offsetX=i}}}),Object.defineProperty(e,"bloomOffsetY",{get:function(){return n},set:function(r){if(n!==r&&(n=r,e._bloom)){var o=Math.max(i,n);t.setPadding(o+1),e._bloom.offsetY=n}}}),Object.defineProperty(e,"bloomBlurStrength",{get:function(){return o},set:function(t){o!==t&&(o=t,e._bloom&&(e._bloom.blurStrength=o))}}),Object.defineProperty(e,"bloomStrength",{get:function(){return a},set:function(t){a!==t&&(a=t,e._bloom&&(e._bloom.strength=a))}}),Object.defineProperty(e,"bloomSteps",{get:function(){return s},set:function(t){s!==t&&(s=t,e._bloom&&(e._bloom.steps=s))}}),e.bloomColor=null,g(e,"bloomColor"),e},blur:function(e){if(v(e,"blurColor"))return e;var t=p(e);if(!t)return e;var r,i=0,n=1,o=1,a=1,s=4;return Object.defineProperty(e,"blurColor",{get:function(){return r},set:function(c){r!==c&&(null===(r=c)||!1===r?e._blur&&(t.remove(e._blur),e._blur=void 0,t.setPadding(0)):(e._blur||(e._blur=t.addBlur(i,n,o,a,r,s),t.setPadding(Math.max(n,o)+1)),e._blur.color=r))}}),Object.defineProperty(e,"blurQuality",{get:function(){return i},set:function(t){i!==t&&(i=t,e._blur&&(e._blur.quality=i))}}),Object.defineProperty(e,"blurX",{get:function(){return n},set:function(r){if(n!==r&&(n=r,e._blur)){var i=Math.max(n,o);t.setPadding(i+1),e._blur.x=n}}}),Object.defineProperty(e,"blurY",{get:function(){return o},set:function(r){if(o!==r&&(o=r,e._blur)){var i=Math.max(n,o);t.setPadding(i+1),e._blur.y=o}}}),Object.defineProperty(e,"blurStrength",{get:function(){return a},set:function(t){a!==t&&(a=t,e._blur&&(e._blur.strength=a))}}),Object.defineProperty(e,"blurSteps",{get:function(){return s},set:function(t){s!==t&&(s=t,e._blur&&(e._blur.steps=s))}}),e.blurColor=null,g(e,"blurColor"),e},bokeh:function(e){if(v(e,"bokehRadius"))return e;var t=p(e);if(!t)return e;var r,i=1,n=.2;return Object.defineProperty(e,"bokehRadius",{get:function(){return r},set:function(o){r!==o&&(null===(r=o)||!1===r?e._bokeh&&(t.remove(e._bokeh),e._bokeh=void 0):(e._bokeh||(e._bokeh=t.addBokeh(r,i,n)),e._bokeh.radius=r))}}),Object.defineProperty(e,"bokehAmount",{get:function(){return i},set:function(t){i!==t&&(i=t,e._bokeh&&(e._bokeh.amount=i))}}),Object.defineProperty(e,"bokehContrast",{get:function(){return n},set:function(t){n!==t&&(n=t,e._bokeh&&(e._bokeh.contrast=n))}}),e.bokehRadius=null,g(e,"bokehRadius"),e},brightness:function(e){return y(e,"brightness",1),e},brown:function(e){return y(e,"brown"),e},circle:function(e){if(v(e,"circleColor"))return e;var t=p(e);if(!t)return e;var r,i=8,n=0,o=.4,a=1,s=.005;return Object.defineProperty(e,"circleColor",{get:function(){return r},set:function(c){r!==c&&(null===(r=c)||!1===r?e._circle&&(t.remove(e._circle),e._circle=void 0):(e._circle||(e._circle=t.addCircle(i,r,n,a,s),e.circleBackgroundAlpha=o),e._circle.color=r))}}),Object.defineProperty(e,"circleThickness",{get:function(){return i},set:function(t){i!==t&&(i=t,e._circle&&(e._circle.thickness=i))}}),Object.defineProperty(e,"circleBackgroundColor",{get:function(){return n},set:function(t){n!==t&&(n=t,e._circle&&(e._circle.backgroundColor=n))}}),Object.defineProperty(e,"circleBackgroundAlpha",{get:function(){return o},set:function(t){o!==t&&(o=t,e._circle&&(e._circle.glcolor2[3]=o))}}),Object.defineProperty(e,"circleScale",{get:function(){return a},set:function(t){a!==t&&(a=t,e._circle&&(e._circle.scale=a))}}),Object.defineProperty(e,"circleFeather",{get:function(){return s},set:function(t){s!==t&&(s=t,e._circle&&(e._circle.feather=s))}}),e.circleColor=null,g(e,"circleColor"),e},contrast:function(e){return y(e,"contrast",1),e},desaturate:function(e){return y(e,"desaturate",1),e},desaturateLuminance:function(e){return y(e,"desaturateLuminance"),e},displacement:function(e){if(v(e,"displacementKey"))return e;var t=p(e);if(!t)return e;var r,i=.005,n=.005;return Object.defineProperty(e,"displacementKey",{get:function(){return r},set:function(o){r!==o&&(null===(r=o)||!1===r?e._displacement&&(t.remove(e._displacement),e._displacement=void 0):(e._displacement||(e._displacement=t.addDisplacement(r,i,n)),e._displacement.setTexture(r)))}}),Object.defineProperty(e,"displacementX",{get:function(){return i},set:function(t){i!==t&&(i=t,e._displacement&&(e._displacement.x=i))}}),Object.defineProperty(e,"displacementY",{get:function(){return n},set:function(t){n!==t&&(n=t,e._displacement&&(e._displacement.y=n))}}),e.displacementKey=null,g(e,"displacementKey"),e},glow:function(e){if(v(e,"glowColor"))return e;var t=p(e);if(!t)return e;var r,i=4,n=0;return Object.defineProperty(e,"glowColor",{get:function(){return r},set:function(o){r!==o&&(null===(r=o)||!1===r?e._glow&&(t.remove(e._glow),e._glow=void 0,t.setPadding(0)):(e._glow||(e._glow=t.addGlow(r,i,n),t.setPadding(i+1)),e._glow.color=r))}}),Object.defineProperty(e,"glowOuterStrength",{get:function(){return i},set:function(r){i!==r&&(i=r,e._glow&&(t.setPadding(i+1),e._glow.outerStrength=i))}}),Object.defineProperty(e,"glowInnerStrength",{get:function(){return n},set:function(t){n!==t&&(n=t,e._glow&&(e._glow.innerStrength=n))}}),e.glowColor=null,g(e,"glowColor"),e},gradient:function(e){if(v(e,"gradientColor"))return e;var t=p(e);if(!t)return e;var r,i,n=.5,o=0,a=0,s=0,c=1,f=0;return Object.defineProperty(e,"gradientColor",{get:function(){return[r,i]},set:function(u){var l,h;null===u||!1===u?(l=null,h=null):(l=u[0],h=u[1]),r===l&&i===h||(i=h,null===(r=l)||!1===r?e._gradient&&(t.remove(e._gradient),e._gradient=void 0):(e._gradient||(e._gradient=t.addGradient(r,i,n,o,a,s,c,f)),e._gradient.color1=r,e._gradient.color2=i))}}),Object.defineProperty(e,"gradientColor1",{get:function(){return r},set:function(t){null!==t&&!1!==t?r!==t&&(r=t,e._gradient&&(e._gradient.color1=r)):e.gradientColor=t}}),Object.defineProperty(e,"gradientColor2",{get:function(){return i},set:function(t){null!==t&&!1!==t?i!==t&&(i=t,e._gradient&&(e._gradient.color2=i)):e.gradientColor=t}}),Object.defineProperty(e,"gradientAlpha",{get:function(){return n},set:function(t){n!==t&&(n=t,e._gradient&&(e._gradient.alpha=n))}}),Object.defineProperty(e,"gradientFromX",{get:function(){return o},set:function(t){o!==t&&(o=t,e._gradient&&(e._gradient.fromX=o))}}),Object.defineProperty(e,"gradientFromY",{get:function(){return a},set:function(t){a!==t&&(a=t,e._gradient&&(e._gradient.fromY=a))}}),Object.defineProperty(e,"gradientToX",{get:function(){return s},set:function(t){s!==t&&(s=t,e._gradient&&(e._gradient.toX=s))}}),Object.defineProperty(e,"gradientToY",{get:function(){return c},set:function(t){c!==t&&(c=t,e._gradient&&(e._gradient.toY=c))}}),Object.defineProperty(e,"gradientSize",{get:function(){return f},set:function(t){f!==t&&(f=t,e._gradient&&(e._gradient.size=f))}}),e.gradientColor=null,g(e,"gradientColor"),e},grayscale:function(e){return y(e,"grayscale",1),e},hue:function(e){return y(e,"hue",1),e},kodachrome:function(e){return y(e,"kodachrome"),e},lsd:function(e){return y(e,"lsd"),e},negative:function(e){return y(e,"negative"),e},pixelate:function(e){if(v(e,"pixelate"))return e;var t,r=p(e);return r?(Object.defineProperty(e,"pixelate",{get:function(){return t},set:function(i){t!==i&&(null===(t=i)||!1===t?e._pixelateEffect&&(r.remove(e._pixelateEffect),e._pixelateEffect=void 0):(e._pixelateEffect||(e._pixelateEffect=r.addPixelate()),e._pixelateEffect.amount=t))}}),e.pixelate=null,g(e,"pixelate"),e):e},polaroid:function(e){return y(e,"polaroid"),e},reveal:function(e){if(v(e,"revealLeft"))return e;var t=p(e);if(!t)return e;var r,i,n,o,a=.1,s=function(){r=null,i=null,n=null,o=null},c=function(e){e._revealEffect&&(t.remove(e._revealEffect),e._revealEffect=void 0)};return Object.defineProperty(e,"revealLeft",{get:function(){return r},set:function(i){r!==i&&(s(),null===(r=i)||!1===r?c(e):(e._revealEffect||(e._revealEffect=t.addReveal(a,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=0,e._revealEffect.progress=r))}}),Object.defineProperty(e,"revealRight",{get:function(){return i},set:function(r){i!==r&&(s(),null===(i=r)||!1===i?c(e):(e._revealEffect||(e._revealEffect=t.addReveal(a,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=0,e._revealEffect.progress=i))}}),Object.defineProperty(e,"revealUp",{get:function(){return n},set:function(r){n!==r&&(s(),null===(n=r)||!1===n?c(e):(e._revealEffect||(e._revealEffect=t.addReveal(a,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=1,e._revealEffect.progress=n))}}),Object.defineProperty(e,"revealDown",{get:function(){return o},set:function(r){o!==r&&(s(),null===(o=r)||!1===o?c(e):(e._revealEffect||(e._revealEffect=t.addReveal(a,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=1,e._revealEffect.progress=o))}}),Object.defineProperty(e,"revealWidth",{get:function(){return a},set:function(t){a!==t&&(a=t,e._revealEffect&&(e._revealEffect.wipeWidth=a))}}),e.revealLeft=null,g(e,"revealLeft"),g(e,"revealRight"),g(e,"revealUp"),g(e,"revealDown"),e},saturate:function(e){return y(e,"saturate",1),e},sepia:function(e){return y(e,"sepia"),e},shadow:function(e){if(v(e,"shadowColor"))return e;var t=p(e);if(!t)return e;var r,i=0,n=0,o=.1,a=1,s=6,c=1;return Object.defineProperty(e,"shadowColor",{get:function(){return r},set:function(f){r!==f&&(null===(r=f)||!1===r?e._shadow&&(t.remove(e._shadow),e._shadow=void 0):(e._shadow||(e._shadow=t.addShadow(i,n,o,a,r,s,c)),e._shadow.color=r))}}),Object.defineProperty(e,"shadowX",{get:function(){return i},set:function(t){i!==t&&(i=t,e._shadow&&(e._shadow.x=i))}}),Object.defineProperty(e,"shadowY",{get:function(){return n},set:function(t){n!==t&&(n=t,e._shadow&&(e._shadow.y=n))}}),Object.defineProperty(e,"decay",{get:function(){return o},set:function(t){o!==t&&(o=t,e._shadow&&(e._shadow.decay=o))}}),Object.defineProperty(e,"shadowPower",{get:function(){return a},set:function(t){a!==t&&(a=t,e._shadow&&(e._shadow.power=a))}}),Object.defineProperty(e,"shadowSamples",{get:function(){return s},set:function(t){s!==t&&(s=t,e._shadow&&(e._shadow.samples=s))}}),Object.defineProperty(e,"shadowIntensity",{get:function(){return c},set:function(t){c!==t&&(c=t,e._shadow&&(e._shadow.intensity=c))}}),e.shadowColor=null,g(e,"shadowColor"),e},shiftToBGR:function(e){return y(e,"shiftToBGR"),e},shine:function(e){if(v(e,"shineSpeed"))return e;var t=p(e);if(!t)return e;var r,i=.5,n=3;return Object.defineProperty(e,"shineSpeed",{get:function(){return r},set:function(o){r!==o&&(null===(r=o)||!1===r?e._shine&&(t.remove(e._shine),e._shine=void 0):(e._shine||(e._shine=t.addShine(r,i,n)),e._shine.speed=r))}}),Object.defineProperty(e,"shineLineWidth",{get:function(){return i},set:function(t){i!==t&&(i=t,e._shine&&(e._shine.lineWidth=i))}}),Object.defineProperty(e,"shineGradient",{get:function(){return n},set:function(t){n!==t&&(n=t,e._shine&&(e._shine.gradient=n))}}),e.shineSpeed=null,g(e,"shineSpeed"),e},technicolor:function(e){return y(e,"technicolor"),e},tiltShift:function(e){if(v(e,"tiltShiftRadius"))return e;var t=p(e);if(!t)return e;var r,i=1,n=.2,o=1,a=1,s=1;return Object.defineProperty(e,"tiltShiftRadius",{get:function(){return r},set:function(c){r!==c&&(null===(r=c)||!1===r?e._tiltShift&&(t.remove(e._tiltShift),e._tiltShift=void 0):(e._tiltShift||(e._tiltShift=t.addTiltShift(r,i,n,o,a,s)),e._tiltShift.radius=r))}}),Object.defineProperty(e,"tiltShiftAmount",{get:function(){return i},set:function(t){i!==t&&(i=t,e._tiltShift&&(e._tiltShift.amount=i))}}),Object.defineProperty(e,"tiltShiftContrast",{get:function(){return n},set:function(t){n!==t&&(n=t,e._tiltShift&&(e._tiltShift.contrast=n))}}),Object.defineProperty(e,"tiltShiftBlurX",{get:function(){return o},set:function(t){o!==t&&(o=t,e._tiltShift&&(e._tiltShift.blurX=o))}}),Object.defineProperty(e,"tiltShiftBlurY",{get:function(){return a},set:function(t){a!==t&&(a=t,e._tiltShift&&(e._tiltShift.blurY=a))}}),Object.defineProperty(e,"tiltShiftStrength",{get:function(){return s},set:function(t){s!==t&&(s=t,e._tiltShift&&(e._tiltShift.strength=s))}}),e.tiltShiftRadius=null,g(e,"tiltShiftRadius"),e},vignette:function(e){if(v(e,"vignetteRadius"))return e;var t=p(e);if(!t)return e;var r,i=.5,n=.5,o=.5;return Object.defineProperty(e,"vignetteRadius",{get:function(){return r},set:function(a){r!==a&&(null===(r=a)||!1===r?e._vignette&&(t.remove(e._vignette),e._vignette=void 0):(e._vignette||(e._vignette=t.addVignette(i,n,r,o)),e._vignette.radius=r))}}),Object.defineProperty(e,"vignetteX",{get:function(){return i},set:function(t){i!==t&&(i=t,e._vignette&&(e._vignette.x=i))}}),Object.defineProperty(e,"vignetteY",{get:function(){return n},set:function(t){n!==t&&(n=t,e._vignette&&(e._vignette.y=n))}}),Object.defineProperty(e,"vignetteStrength",{get:function(){return o},set:function(t){o!==t&&(o=t,e._vignette&&(e._vignette.strength=o))}}),e.vignetteRadius=null,g(e,"vignetteRadius"),e},vintagePinhole:function(e){return y(e,"vintagePinhole"),e},wipe:function(e){if(v(e,"wipeLeft"))return e;var t=p(e);if(!t)return e;var r,i,n,o,a=.1,s=function(){r=null,i=null,n=null,o=null},c=function(e){e._wipeEffect&&(t.remove(e._wipeEffect),e._wipeEffect=void 0)};return Object.defineProperty(e,"wipeLeft",{get:function(){return r},set:function(i){r!==i&&(s(),null===(r=i)||!1===r?c(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(a,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=0,e._wipeEffect.progress=r))}}),Object.defineProperty(e,"wipeRight",{get:function(){return i},set:function(r){i!==r&&(s(),null===(i=r)||!1===i?c(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(a,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=0,e._wipeEffect.progress=i))}}),Object.defineProperty(e,"wipeUp",{get:function(){return n},set:function(r){n!==r&&(s(),null===(n=r)||!1===n?c(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(a,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=1,e._wipeEffect.progress=n))}}),Object.defineProperty(e,"wipeDown",{get:function(){return o},set:function(r){o!==r&&(s(),null===(o=r)||!1===o?c(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(a,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=1,e._wipeEffect.progress=o))}}),Object.defineProperty(e,"wipeWidth",{get:function(){return a},set:function(t){a!==t&&(a=t,e._wipeEffect&&(e._wipeEffect.wipeWidth=a))}}),e.wipeLeft=null,g(e,"wipeLeft"),g(e,"wipeRight"),g(e,"wipeUp"),g(e,"wipeDown"),e}};var m=function(e,t){if(void 0===t)t=!0;else if("string"==typeof t)t={config:!0};else if(Array.isArray(t))for(var r=t,i=(t={},0),n=r.length;i<n;i++)t[r[i]]=!0;if(!0===t)for(var o in b)b[o](e);else for(var o in t)t[o]&&b[o]&&b[o](e);return e};const _=Phaser.Utils.Array.Remove;var O={addGO(e,t){this.remove(e,!0),this.useTintFadeEffect(t)&&function(e,t){if(e.hasOwnProperty("tintR"))return e;void 0===t&&(t=16777215);var r=s(t),i=c(t),n=f(t);Object.defineProperty(e,"tint",{get:function(){return t},set:function(o){o=16777215&Math.floor(o),e.setTint&&e.setTint(o),t!==o&&(r=s(t=o),i=c(t),n=f(t))}}),Object.defineProperty(e,"tintR",{get:function(){return r},set:function(i){i=255&Math.floor(i),r!==i&&(r=i,e.tint=(255&i)<<16|65535&t)}}),Object.defineProperty(e,"tintG",{get:function(){return i},set:function(r){r=255&Math.floor(r),i!==r&&(i=r,e.tint=(255&r)<<8|16711935&t)}}),Object.defineProperty(e,"tintB",{get:function(){return n},set:function(r){r=255&Math.floor(r),n!==r&&(n=r,e.tint=255&r|16776960&t)}}),Object.defineProperty(e,"tintGray",{get:function(){return Math.floor((r+i+n)/3)},set:function(t){t=255&Math.floor(t),r===t&&i===t&&n===t||(r=t,i=t,n=t,e.tint=(255&t)<<16|(255&t)<<8|255&t)}}),e.tint=t}(t),this.viewportCoordinateEnable&&d(t,this.viewport),this.effectPropertiesConfig&&m(t,this.effectPropertiesConfig),t.setName(e).once("destroy",(function(){_(this.removedGOs,t),this.isEmpty&&this.emit("empty")}),this);var r=new this.BobClass(this,t,e);return this.bobs[e]=r,this},add(e,...t){var r=this.createGameObjectCallback,i=this.createGameObjectScope,n=r.call(i,this.scene,...t);this.addGO(e,n),null!=this.gameObjectDepth&&n.setDepth(this.gameObjectDepth);var o=this.get(e);return this.fadeBob(o,0,1),this}},w={remove(e,t){var r=this.get(e);if(!r)return this;Array.isArray(r)||(r=[r]);var i=this;return r.forEach((function(e){delete i.bobs[e.name];var r=e.gameObject;i.removedGOs.push(r),r.setName(),t?e.destroy():i.fadeBob(e,void 0,0,(function(){e.destroy()}))})),this},removeAll(){var e=this.bobs;for(var t in e)this.remove(t);return this},clear(e){void 0===e&&(e=!0);var t=this.bobs;for(var r in t)e&&t[r].destroy(),delete t[r];return this.removedGOs.length=0,this}},P={hasProperty(e,t){var r=o(e)?this.get(e):this.getFitst(e);return!!r&&r.hasProperty(t)},getProperty(e,t){var r=o(e)?this.get(e):this.getFitst(e);if(r)return r.getProperty(t)},isNumberProperty(e,t){return"number"==typeof this.getProperty(e,t)},setProperty(e,t,r){var i=this.get(e);return i?(Array.isArray(i)||(i=[i]),this.symbols&&"string"==typeof r&&this.isNumberProperty(e,t)&&(r in this.symbols?r=this.symbols[r]:console.warn(`Can't find symbol ${r}`)),i.forEach((function(e){e.setProperty(t,r)})),this):this},easeProperty(e,t){var r=this.get(e);if(!r)return this;Array.isArray(r)||(r=[r]);var i=t.value,n=t.property;return this.symbols&&"string"==typeof i&&this.isNumberProperty(e,n)&&i in this.symbols&&(t.value=this.symbols[i]),r.forEach((function(e){e.easeProperty(t)})),this},hasTweenTask(e,t){var r=o(e)?this.get(e):this.getFitst(e);return!!r&&r.tweens.hasOwnProperty(t)},getTweenTask(e,t){var r=o(e)?this.get(e):this.getFitst(e);return r&&r.tweens[t]||null}},E={hasMethod(e,t){var r=o(e)?this.get(e):this.getFitst(e);return!!r&&r.hasMethod(t)},call(e,t,...r){var i=this.get(e);return i?(Array.isArray(i)||(i=[i]),i.forEach((function(e){e.call(t,...r)})),this):this}},j={hasData(e,t){var r=o(e)?this.get(e):this.getFitst(e);return!!r&&r.hasData(t)},getData(e,t){if(this.has(e))return this.get(e).getData(t)},setData(e,t,r){var i=this.get(e);return i?(Array.isArray(i)||(i=[i]),i.forEach((function(e){e.setData(t,r)})),this):this}};const C={tint:0,alpha:1,revealUp:2,revealDown:3,revealLeft:4,revealRight:5};var L={setGOFadeMode(e){return"string"==typeof e&&(e=C[e]),this.fadeMode=e,this},setGOFadeTime(e){return this.fadeTime=e,this},useTintFadeEffect(e){return(void 0===this.fadeMode||0===this.fadeMode)&&this.fadeTime>0&&void 0!==e.setTint},useAlphaFadeEffect(e){return(void 0===this.fadeMode||1===this.fadeMode)&&this.fadeTime>0&&void 0!==e.setAlpha},useRevealEffect(e){return this.fadeMode>=2&&this.fadeMode<=5&&this.fadeTime>0&&(e.preFX||e.postFX)},fadeBob(e,t,r,i){var n=e.gameObject;if(this.useTintFadeEffect(n))void 0!==t&&e.setProperty("tintGray",255*t),e.easeProperty({property:"tintGray",value:Math.floor(255*r),duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:i});else if(this.useAlphaFadeEffect(n))void 0!==t&&e.setProperty("alpha",t),e.easeProperty({property:"alpha",value:r,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:i});else if(this.useRevealEffect(n)){var o;switch(m(n,"reveal"),this.fadeMode){case 2:o="revealUp";break;case 3:o="revealDown";break;case 4:o="revealLeft";break;case 5:o="revealRight"}void 0===t&&(t=0),n[o]=t,e.easeProperty({property:o,value:r,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:i}),e.getTweenTask(o).once("complete",(function(){n[o]=null}))}else i&&i(n);return this}},S=function(e){return void 0!==e.displayWidth?e.displayWidth:e.width},x=function(e){return void 0!==e.displayHeight?e.displayHeight:e.height};Phaser.Geom.Rectangle;const T=Phaser.Math.Vector2,G=Phaser.Math.RotateAround;Phaser.GameObjects.Container;var k=void 0,M=function(e,t,r){return void 0===r&&(r=!1),0!==e.rotation&&G(t,e.x,e.y,e.rotation),r&&e.parentContainer&&e.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t};const A=Phaser.Utils.Objects.GetValue;var F=function(e,t,r,i,n,o,a){if(e.getBounds||void 0!==e.width&&void 0!==e.height){void 0===r&&(r=16777215),void 0===i&&(i=1),void 0===n&&(n=null),void 0===o&&(o=1),void 0===a&&(a=0);var s=function(e,t,r){return void 0===t?t=new T:!0===t&&(void 0===k&&(k=new T),t=k),e.getTopLeft?e.getTopLeft(t):(t.x=e.x-S(e)*e.originX,t.y=e.y-x(e)*e.originY,M(e,t,r))}(e,R[0]);s.x-=a,s.y-=a;var c=function(e,t,r){return void 0===t?t=new T:!0===t&&(void 0===k&&(k=new T),t=k),e.getTopRight?e.getTopRight(t):(t.x=e.x-S(e)*e.originX+S(e),t.y=e.y-x(e)*e.originY,M(e,t,r))}(e,R[1]);c.x+=a,c.y-=a;var f=function(e,t,r){return void 0===t?t=new T:!0===t&&(void 0===k&&(k=new T),t=k),e.getBottomRight?e.getBottomRight(t):(t.x=e.x-S(e)*e.originX+S(e),t.y=e.y-x(e)*e.originY+x(e),M(e,t,r))}(e,R[2]);f.x+=a,f.y+=a;var u=function(e,t,r){return void 0===t?t=new T:!0===t&&(void 0===k&&(k=new T),t=k),e.getBottomLeft?e.getBottomLeft(t):(t.x=e.x-S(e)*e.originX,t.y=e.y-x(e)*e.originY+x(e),M(e,t,r))}(e,R[3]);u.x-=a,u.y+=a,null!==n&&t.fillStyle(n,o).fillPoints(R,!0,!0),null!==r&&t.lineStyle(i,r).strokePoints(R,!0,!0)}},R=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],B=function(e,t){var r,i=e.cameras;if(void 0===t)r=i.main;else switch(typeof t){case"string":r=i.getCamera(t);break;case"number":r=i.cameras[t];break;default:r=t}return r},D={setCamera(e,t){var r=this.get(e);if(!r)return this;var i=B(this.scene,t);return i?(r.gameObject.cameraFilter=4294967295^i.id,r.camera=i,this):this},getCamera(e){var t=this.get(e);return t?t.camera:null}},X={drawGameObjectsBounds:function(e,t){return this.forEachGO((function(r){r.drawBounds?r.drawBounds(e,t):function(e,t,r){var i,n,o,a,s;if("number"==typeof r?i=r:(i=A(r,"color"),n=A(r,"lineWidth"),o=A(r,"fillColor"),a=A(r,"fillAlpha",1),s=A(r,"padding",0)),Array.isArray(e))for(var c=0,f=e.length;c<f;c++)F(e[c],t,i,n,o,a,s);else F(e,t,i,n,o,a,s)}(r,e,t)})),this}};Object.assign(X,a,O,w,P,E,j,L,D);const Y=Phaser.Cameras.Scene2D.BaseCamera,N=Phaser.Geom.Rectangle;var W=function(e,t,r){return t instanceof Y||(r=t,t=void 0),void 0===r?r=new N:!0===r&&(r=V),t?e.scale.getViewPort(t,r):e.scale.getViewPort(r)},V=new N;const U=Phaser.Utils.Objects.GetValue;class ${constructor(e,t){this.scene=e,this.BobClass=U(t,"BobClass",n),this.setCreateGameObjectCallback(U(t,"createGameObject"),U(t,"createGameObjectScope")),this.setEventEmitter(U(t,"eventEmitter",void 0)),this.setGameObjectDepth(U(t,"depth",void 0));var r=U(t,"fade",500);"number"==typeof r?(this.setGOFadeMode(),this.setGOFadeTime(r)):(this.setGOFadeMode(U(r,"mode")),this.setGOFadeTime(U(r,"time",500)));var i=U(t,"viewportCoordinate",!1);!1!==i?(this.setViewportCoordinateEnable(U(t,"enable",!0)),this.setViewport(U(i,"viewport"))):this.setViewportCoordinateEnable(!1);var o=U(t,"effectProperties",!1);this.setEffectPropertiesConfig(o),this.setSymbols(U(t,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1,this.name=U(t,"name")}destroy(e){this.clear(!e),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(e){if(this._timeScale!==e){this._timeScale=e;var t=this.bobs;for(var r in t)t[r].setTimeScale(e)}}get timeScale(){return this._timeScale}setTimeScale(e){return this.timeScale=e,this}setCreateGameObjectCallback(e,t){return this.createGameObjectCallback=e,this.createGameObjectScope=t,this}setGameObjectDepth(e){return this.gameObjectDepth=e,this}setViewportCoordinateEnable(e){return void 0===e&&(e=!0),this.viewportCoordinateEnable=e,this}setEffectPropertiesConfig(e){return void 0===e&&(e=!0),this.effectPropertiesConfig=e,this}setViewport(e){return void 0===e&&(e=W(this.scene,this.scene.cameras.main)),this.viewport=e,this}setSymbols(e){return this.symbols=e,this}get isEmpty(){return function(e){for(var t in e)return!1;return!0}(this.bobs)&&0===this.removedGOs.length}}Object.assign($.prototype,e,X);const K=Phaser.GameObjects.GameObject,z=Phaser.GameObjects.Layer,H=Phaser.GameObjects.Layer;var I=function(e){var t=e.displayList;return function(e){return e instanceof H}(t)?t:null},q={getLayer(e){return this.getGO(e)},getLayers(e){return void 0===e&&(e=[]),this.forEachGO((function(t){e.push(t)})),function(e,t){if(e.length<=1)return e;var r;void 0===t&&(t=!1);for(var i=0,n=e.length;i<n;i++){var o=e[i];if(o.displayList?r=o.displayList:o.parentContainer&&(r=o.parentContainer.list),r)break}r||(r=o.scene.sys.displayList),r.depthSort&&(r.depthSort(),r=r.list),t?e.sort((function(e,t){return r.indexOf(t)-r.indexOf(e)})):e.sort((function(e,t){return r.indexOf(e)-r.indexOf(t)}))}(e,!1),e},addToLayer(e,t){var r=this.getGO(e);if(r){Array.isArray(t)||(t=[t]);for(var i=0,n=t.length;i<n;i++){var o=t[i];o.isRexContainerLite?o.addToLayer(r):r.add(o)}return void 0!==r.scrollFactorX&&o.setScrollFactor(r.scrollFactorX,r.scrollFactorY),this}console.warn(`[LayerManager] Can't get layer "${e}"`)},addToBottomLayer(e){var t=this.getLayers()[0];return this.addToLayer(t.goName,e),this},addToTopLayer(e){var t=this.getLayers(),r=t[t.length-1];return this.addToLayer(r.goName,e),this},removeFromLayer(e,t,r){var i=this.getGO(e);if(i)return void 0===r&&(r=!0),t.isRexContainerLite?t.removeFromLayer(i,r):(i.remove(t),r&&t.addToDisplayList()),this;console.warn(`[LayerManager] Can't get layer "${e}"`)},clearLayer(e,t){void 0===t&&(t=!0);var r=this.getGO(e);if(r){if(t)for(var i=r.getAll(),n=0,o=i.length;n<o;n++)i[n].destroy();else r.removeAll();return this}console.warn(`Can't get layer "${e}"`)}},Q={setScrollFactor(e,t,r){void 0===r&&(r=t);var i=this.getLayer(e);if(!i)return this;i.scrollFactorX=t,i.scrollFactorY=r;for(var n=i.getAll(),o=0,a=n.length;o<a;o++)n[o].setScrollFactor(t,r);return this}};const J=Phaser.Utils.Array;var Z={bringMeToTop:function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(J.BringToTop(e,this),this):this},sendMeToBack:function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(J.SendToBack(e,this),this):this},moveMyDepthBelow:function(e){var t;return e.parentContainer?-1===(t=e.parentContainer.list).indexOf(this)&&e.parentContainer.add(this):e.displayList&&-1===(t=e.displayList.list).indexOf(this)&&e.displayList.add(this),t?(J.MoveBelow(t,this,e),this):this},moveMyDepthAbove:function(e){var t;return e.parentContainer?-1===(t=e.parentContainer.list).indexOf(this)&&(e.isRexContainerLite?e.addToContainer(e.parentContainer):e.parentContainer.add(e)):e.displayList&&-1===(t=e.displayList.list).indexOf(this)&&(e.isRexContainerLite?e.addToLayer(e.displayList):e.displayList.add(e)),t?(J.MoveAbove(t,this,e),this):this}},ee={bringLayerToTop(e){var t=this.getLayer(e);return t?(Z.bringMeToTop.call(t),this):this},sendLayerToBack(e){var t=this.getLayer(e);return t?(Z.sendMeToBack.call(t),this):this},moveLayerBelow(e,t){if(e===t)return this;var r=this.getLayer(e),i=this.getLayer(t);return r&&i?(Z.moveMyDepthBelow.call(r,i),this):this},moveLayerAbove(e,t){if(e===t)return this;var r=this.getLayer(e),i=this.getLayer(t);return r&&i?(Z.moveMyDepthAbove.call(r,i),this):this}};const te=$.prototype.setCamera;var re={setCamera(e,t){var r=B(this.scene,t);return r||(r=this.scene.cameras.add(void 0,void 0,void 0,void 0,!1,t)),te.call(this,e,r),this}},ie={};Object.assign(ie,q,Q,ee,re);const ne=Phaser.Utils.Objects.GetValue;class oe extends ${constructor(e,t){void 0===t?t={}:Array.isArray(t)&&(t={layers:t}),t.hasOwnProperty("fade")||(t.fade=0),t.viewportCoordinate=!1,super(e,t);var r=ne(t,"rootLayer");this.setRootLayer(r);var i=ne(t,"layers");if(i)for(var n=0,o=i.length;n<o;n++){var a=i[n];if("string"==typeof a)this.add(a);else{var s=a.name;this.add(s);var c=a.scrollFactor,f=ne(a,"scrollFactorX",c),u=ne(a,"scrollFactorY",c);void 0!==f&&this.setScrollFactor(s,f,u),this.setCamera(s,a.cameraName)}}}setCreateGameObjectCallback(e,t){return e||(e=ae),super.setCreateGameObjectCallback(e,t),this}setRootLayer(e){if(e===this.rootLayer)return this;var t=this.getAllGO();return e?e.add(t):this.scene.displayList.add(t),this.rootLayer=e,this}addGO(e,t){return super.addGO(e,t),t.name=e,this.rootLayer&&this.rootLayer.add(t),this}get(e,t){if((i=e)instanceof K||i instanceof z){var r=I(e);if(!r)return;if(!(e=r.name))return}var i;return super.get(e,t)}}var ae=function(e,t){var r=e.add.layer();return void 0!==t&&r.setDepth(t),r};Object.assign(oe.prototype,ie);class se extends Phaser.Plugins.BasePlugin{constructor(e){super(e)}start(){this.game.events.on("destroy",this.destroy,this)}add(e,t){return new oe(e,t)}}return se},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).rexlayermanagerplugin=t();
