!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexspiralcurveplugin=e()}(void 0,function(){function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==typeof t?t:String(t)}(i.key),i)}}function t(t,e,n){e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");e=t;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(n);return r(this,i?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}var e=Phaser.Curves.Curve,P=Phaser.Utils.Objects.GetValue,x=Phaser.Math.DegToRad,o=Phaser.Math.RadToDeg,w=Phaser.Math.Vector2,m=Phaser.Tweens.Builders.GetEaseFunction,d=Phaser.Math.Linear,h=function(){s(k,e);var Y=a(k);function k(t,e,n,i,s,u,r){var a,o,d,h,c,f,l,y,R,p,_,g,v,X;return A(this,k),"object"===b(t)?(y=(l=t).hasOwnProperty("x")?a=l.x:(a=P(l,"startX",0),P(l,"endX",a)),R=P(l,"easeX","Linear"),p=l.hasOwnProperty("y")?o=l.y:(o=P(l,"startY",0),P(l,"endY",o)),_=P(l,"easeY","Linear"),g=l.hasOwnProperty("startRadius")?(d=l.startRadius,h=P(l,"endRadius",c=d)):(h=l.hasOwnProperty("xRadius")?d=l.xRadius:(d=P(l,"startXRadius",0),P(l,"endXRadius",d)),l.hasOwnProperty("yRadius")?c=l.yRadius:(c=P(l,"startYRadius",d),P(l,"endYRadius",h))),v=P(l,"easeXRadius","Linear"),X=P(l,"easeXRadius",v),s=P(l,"startAngle",0),u=P(l,"endAngle",360),f=P(l,"easeAngle","Linear"),r=P(l,"rotation",0)):(void 0===s&&(s=0),void 0===u&&(u=360),void 0===r&&(r=0),y=a=t=void 0===t?0:t,p=o=e=void 0===e?0:e,c=d=n=void 0===n?0:n,g=h=i=void 0===i?0:i,f=X=v=_=R="Linear"),(l=Y.call(this,"SpiralCurve")).p0=new w(a,o),l.p1=new w(y,p),l._easeX=R,l._easeXFunction=m(R),l._easeY=_,l._easeYFunction=m(_),l._startXRadius=d,l._endXRadius=h,l._easeXRadius=v,l._easeXRadiusFunction=m(v),l._startYRadius=c,l._endYRadius=g,l._easeYRadius=X,l._easeYRadiusFunction=m(X),l._startAngle=x(s),l._endAngle=x(u),l._easeAngle=f,l._easeAngleFunction=m(f),l._rotation=x(r),l}return t(k,[{key:"getResolution",value:function(t){return 2*t}},{key:"getStartPoint",value:function(t){return this.getPoint(0,t)}},{key:"getPoint",value:function(t,e){void 0===e&&(e=new w);var n,i,s,u=d(this.p0.x,this.p1.x,this._easeXFunction(t)),r=d(this.p0.y,this.p1.y,this._easeYFunction(t)),a=d(this._startAngle,this._endAngle,this._easeAngleFunction(t)),o=d(this._startXRadius,this._endXRadius,this._easeXRadiusFunction(t)),t=d(this._startYRadius,this._endYRadius,this._easeYRadiusFunction(t)),o=u+o*Math.cos(a),t=r+t*Math.sin(a);return 0!==this._rotation&&(o=(a=o-u)*(n=Math.cos(this._rotation))-(s=t-r)*(i=Math.sin(this._rotation))+u,t=a*i+s*n+r),e.set(o,t)}},{key:"x",get:function(){return this.p0.x},set:function(t){t-=this.p0.x;this.p0.x+=t,this.p1.x+=t}},{key:"y",get:function(){return this.p0.y},set:function(t){t-=this.p0.y;this.p0.y+=t,this.p1.y+=t}},{key:"setStartX",value:function(t){return this.startX=t,this}},{key:"startX",get:function(){return this.p0.x},set:function(t){this.p0.x=t}},{key:"setEndX",value:function(t){return this.endX=t,this}},{key:"endX",get:function(){return this.p1.x},set:function(t){this.p1.x=t}},{key:"setEaseX",value:function(t){return this.easeX=t,this}},{key:"easeX",get:function(){return this._easeX},set:function(t){this._easeX=t,this._easeXFunction=m(t)}},{key:"setStartY",value:function(t){return this.startY=t,this}},{key:"startY",get:function(){return this.p0.y},set:function(t){this.p0.y=t}},{key:"setEndY",value:function(t){return this.endY=t,this}},{key:"endY",get:function(){return this.p1.y},set:function(t){this.p1.y=t}},{key:"setEaseY",value:function(t){return this.easeY=t,this}},{key:"easeY",get:function(){return this._easeY},set:function(t){this._easeY=t,this._easeYFunction=m(t)}},{key:"setXRadius",value:function(t){return this.xRadius=t,this}},{key:"xRadius",get:function(){return Math.max(this._startXRadius,this._endXRadius)},set:function(t){this._startXRadius=t,this._endXRadius=t}},{key:"setStartXRadius",value:function(t){return this.startXRadius=t,this}},{key:"startXRadius",get:function(){return this._startXRadius},set:function(t){this._startXRadius=t}},{key:"setEndXRadius",value:function(t){return this.endXRadius=t,this}},{key:"endXRadius",get:function(){return this._endXRadius},set:function(t){this._endXRadius=t}},{key:"setEaseXRadius",value:function(t){return this.easeXRadius=t,this}},{key:"easeXRadius",get:function(){return this._easeXRadius},set:function(t){this._easeXRadius=t,this._easeXRadiusFunction=m(t)}},{key:"setYRadius",value:function(t){return this.startYRadius=t,this.endYRadius=t,this}},{key:"yRadius",get:function(){return Math.max(this._startYRadius,this._endYRadius)},set:function(t){this._startYRadius=t,this._endYRadius=t}},{key:"setStartYRadius",value:function(t){return this.startYRadius=t,this}},{key:"startYRadius",get:function(){return this._startYRadius},set:function(t){this._startYRadius=t}},{key:"setEndYRadius",value:function(t){return this.endYRadius=t,this}},{key:"endYRadius",get:function(){return this._endYRadius},set:function(t){this._endYRadius=t}},{key:"setEaseYRadius",value:function(t){return this.easeYRadius=t,this}},{key:"easeYRadius",get:function(){return this._easeYRadius},set:function(t){this._easeYRadius=t,this._easeYRadiusFunction=m(t)}},{key:"setWidth",value:function(t){t=this.xRadius/t;return this._startXRadius*=t,this._endXRadius*=t,this}},{key:"setHeight",value:function(t){t=this.yRadius/t;return this._startYRadius*=t,this._endYRadius*=t,this}},{key:"setStartAngle",value:function(t){return this.startAngle=t,this}},{key:"startAngle",get:function(){return o(this._startAngle)},set:function(t){this._startAngle=x(t)}},{key:"setEndAngle",value:function(t){return this.endAngle=t,this}},{key:"endAngle",get:function(){return o(this._endAngle)},set:function(t){this._endAngle=x(t)}},{key:"setEaseAngle",value:function(t){return this.easeAngle=t,this}},{key:"easeAngle",get:function(){return this._easeAngle},set:function(t){this._easeAngle=t,this._easeAngleFunction=m(t)}},{key:"setRotation",value:function(t){return this.rotation=t,this}},{key:"angle",get:function(){return o(this._rotation)},set:function(t){this._rotation=x(t)}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t}},{key:"toJSON",value:function(){return{type:this.type,startX:this.p0.x,startY:this.p0.y,endX:this.p1.x,endY:this.p1.y,startXRadius:this._startXRadius,endXRadius:this._endXRadius,easeXRadius:this._easeXRadius,startYRadius:this._startYRadius,endYRadius:this._endYRadius,easeYRadius:this._easeYRadius,startAngle:o(this._startAngle),endAngle:o(this._endAngle),easeAngle:this._easeAngle,rotation:o(this._rotation)}}}],[{key:"fromJSON",value:function(t){return new k(t)}}]),k}(),c=function(t){return null==t||""===t||0===t.length},f=function(){s(n,Phaser.Plugins.BasePlugin);var e=a(n);function n(t){return A(this,n),e.call(this,t)}return t(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t,e,n,i,s,u,r){return new h(t,e,n,i,s,u,r)}}]),n}();return function(t,e,n,i){if(void 0===i&&(i="."),"object"===b(t)){if(c(e)){if(null==n)return;"object"===b(n)&&(t=n)}else{i=(e="string"==typeof e?e.split(i):e).pop();(function(t,e,n){var i=t;if(!c(e))for(var s,u=0,r=(e="string"==typeof e?e.split("."):e).length;u<r;u++)null!=i[s=e[u]]&&"object"===b(i[s])||(i[s]=u!==r-1||void 0===n?{}:n),i=i[s];return i})(t,e)[i]=n}}}(window,"RexPlugins.Curve.SpiralCurve",h),f});
