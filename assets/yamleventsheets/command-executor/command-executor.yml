title: Example
script:
  # Create gameobjects
  - title: Initialize
    actions:
      - name: BG
        parameters:
          id: Background
          key: classroom

      - name: TEXTBOX
        parameters:
          id: Dialog
          width: 500
          height: 120

      - name: SPRITE
        parameters:
          id: CharacterA
          key: characters
          name: A
          expression: smile

      - name: SPRITE
        parameters:
          id: CharacterB
          key: characters
          name: B
          expression: smile

      - name: SPRITE
        parameters:
          id: CharacterC
          key: characters
          name: C
          expression: smile

      - name: CHOICE
        parameters:
          id: Choice
          width: 500

  # Manipulate gameobjects
  - title: Section A
    actions:
      - name: log.disable

      - name: log
        parameters: { text: "Test disable" }

      - name: log.enable

      - name: log
        parameters: { text: "Start..." }

      - name: Dialog.set
        parameters: { vpy: 0.99, alpha: 0.9 }

      - name: CharacterA.set
        parameters: { vpx: 0.2, vpy: 1 }

      - name: CharacterB.set
        parameters: { vpx: -0.4, vpy: 1 }

      - name: CharacterC.set
        parameters: { vpx: -0.3, vpy: 1 }

      - name: bgm.play
        parameters: { key: "theme0" }

      - name: camera.set
        parameters: { x: 0, y: 200, rotate: -90, zoom: 2 }

      - name: camera.rotateTo
        parameters: { rotate: 0, duration: 2000, ease: "Cubic" }

      - name: camera.zoomTo
        parameters: { zoom: 1, duration: 2000, ease: "Cubic", wait: true }

      - name: wait
        parameters: { time: 300 }

      - name: camera.scrollTo
        parameters: { x: 0, y: 0, duration: 2000, ease: "Cubic", wait: true }

      - name: camera.shake
        parameters: { duration: 500 }

      - name: camera.flash

      - name: CharacterA.to
        parameters: { vpx: 0.8, ease: "Back", duration: 2000, wait: true }

      - name: CharacterB.to
        parameters: { vpx: 0.2, ease: "Back", duration: 2000, wait: false }

      - name: CharacterC.to
        parameters: { vpx: 0.5, ease: "Back", duration: 2000 }
        # Wait until tween complete

      - name: log
        parameters: { text: "CharacterA.x = {{@CharacterA.x}}" }

      # Ease all SPRITE game objects excluding CharacterA
      - name: "!CharacterA.to"
        parameters: { alpha: 0.5, duration: 300 }
        # Wait until tween complete

      - name: CharacterA.focus

      # Wait until typing complete
      - name: Dialog.typing
        parameters:
          name: "A"
          expression: "smile"
          icon: "portraits"
          speed: 100
          text: |-
            Line0...
            Line1...
            Line2...
            Line3...

  # Test choice and IF-branch
  - title: Section B
    actions:
      - name: setData
        parameters: { hp: 5, coin: 100 }

      - name: log.memory
        parameters: { text: "Befor choice" }

      - name: Choice.choice
        parameters:
          title: Would you like some...
          resultKey: choiceIndex
          option1: Ice cream
          option2: Burger
          option3: Cola Cola Cola Cola Cola Cola Cola Cola Cola Cola Cola Cola
        # Wait until clicking any chioce button

      - name: log
        parameters: { text: "Select option[color=red]{{choiceIndex}}[/color]" }

      - type: if
        branches:
          - condition: choiceIndex == 1
            actions:
              - name: Dialog.typing
                parameters:
                  name: A
                  expression: anger
                  text: Not today
                  speed: 100

              - name: setData
                parameters: { hp: "#(hp+3)", coin: "#(coin-10)" }

          - condition: choiceIndex == 2
            actions:
              - name: Dialog.typing
                parameters:
                  name: A
                  expression: dizzy
                  text: Too fat
                  speed: 100

              - name: incData
                parameters: { hp: 5, coin: -10 }

          - condition: choiceIndex == 3
            actions:
              - name: Dialog.typing
                parameters:
                  name: A
                  expression: happy
                  text: Another bottle!
                  speed: 100

              - name: incData
                parameters: { hp: 10, coin: -20 }

      - name: log.memory
        parameters: { text: "After choice" }

      - name: wait
        parameters: { time: 3000, click: true }
        # Wait until 3s or any touch

  - title: Section C
    actions:
      # - name: SPRITE.set
      #  parameters: { tint: 0xffffff}

      - name: CharacterA.unfocus

      - name: se.play
        parameters: { key: explosion, wait: true }
        # Wait until playing se complete

      - name: SPRITE.cross
        parameters: { expression: dizzy }

      - name: bgm.cross
        parameters: { key: theme1 }

      - name: wait
        parameters: { time: 200 }

      - name: Background.cross
        parameters: { key: road, mode: irisOut }

      - name: wait
        parameters: { time: 200 }

      # Ease all SPRITE game objects
      - name: SPRITE.to
        parameters: { vpx: -0.3 }
        # Wait until tween complete

      # - name: uiLayer.to
      #   parameters: { alpha: 0 }
      #   # Wait until ui layer fade-out

      - name: bgm.stop
